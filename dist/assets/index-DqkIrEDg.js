var ik=Object.defineProperty;var sk=(t,e,n)=>e in t?ik(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var J=(t,e,n)=>sk(t,typeof e!="symbol"?e+"":e,n);function ok(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function ak(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Jw={exports:{}},Ju={},Zw={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hl=Symbol.for("react.element"),lk=Symbol.for("react.portal"),ck=Symbol.for("react.fragment"),uk=Symbol.for("react.strict_mode"),hk=Symbol.for("react.profiler"),dk=Symbol.for("react.provider"),fk=Symbol.for("react.context"),pk=Symbol.for("react.forward_ref"),mk=Symbol.for("react.suspense"),gk=Symbol.for("react.memo"),yk=Symbol.for("react.lazy"),n_=Symbol.iterator;function _k(t){return t===null||typeof t!="object"?null:(t=n_&&t[n_]||t["@@iterator"],typeof t=="function"?t:null)}var eE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},tE=Object.assign,nE={};function so(t,e,n){this.props=t,this.context=e,this.refs=nE,this.updater=n||eE}so.prototype.isReactComponent={};so.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};so.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function rE(){}rE.prototype=so.prototype;function Wp(t,e,n){this.props=t,this.context=e,this.refs=nE,this.updater=n||eE}var Hp=Wp.prototype=new rE;Hp.constructor=Wp;tE(Hp,so.prototype);Hp.isPureReactComponent=!0;var r_=Array.isArray,iE=Object.prototype.hasOwnProperty,qp={current:null},sE={key:!0,ref:!0,__self:!0,__source:!0};function oE(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)iE.call(e,r)&&!sE.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:hl,type:t,key:s,ref:o,props:i,_owner:qp.current}}function vk(t,e){return{$$typeof:hl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Kp(t){return typeof t=="object"&&t!==null&&t.$$typeof===hl}function wk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var i_=/\/+/g;function md(t,e){return typeof t=="object"&&t!==null&&t.key!=null?wk(""+t.key):e.toString(36)}function Cc(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case hl:case lk:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+md(o,0):r,r_(i)?(n="",t!=null&&(n=t.replace(i_,"$&/")+"/"),Cc(i,e,n,"",function(c){return c})):i!=null&&(Kp(i)&&(i=vk(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(i_,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",r_(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+md(s,a);o+=Cc(s,e,n,l,i)}else if(l=_k(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+md(s,a++),o+=Cc(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ql(t,e,n){if(t==null)return t;var r=[],i=0;return Cc(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Ek(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Rt={current:null},Ac={transition:null},xk={ReactCurrentDispatcher:Rt,ReactCurrentBatchConfig:Ac,ReactCurrentOwner:qp};function aE(){throw Error("act(...) is not supported in production builds of React.")}he.Children={map:ql,forEach:function(t,e,n){ql(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ql(t,function(){e++}),e},toArray:function(t){return ql(t,function(e){return e})||[]},only:function(t){if(!Kp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};he.Component=so;he.Fragment=ck;he.Profiler=hk;he.PureComponent=Wp;he.StrictMode=uk;he.Suspense=mk;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xk;he.act=aE;he.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=tE({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=qp.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)iE.call(e,l)&&!sE.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:hl,type:t.type,key:i,ref:s,props:r,_owner:o}};he.createContext=function(t){return t={$$typeof:fk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:dk,_context:t},t.Consumer=t};he.createElement=oE;he.createFactory=function(t){var e=oE.bind(null,t);return e.type=t,e};he.createRef=function(){return{current:null}};he.forwardRef=function(t){return{$$typeof:pk,render:t}};he.isValidElement=Kp;he.lazy=function(t){return{$$typeof:yk,_payload:{_status:-1,_result:t},_init:Ek}};he.memo=function(t,e){return{$$typeof:gk,type:t,compare:e===void 0?null:e}};he.startTransition=function(t){var e=Ac.transition;Ac.transition={};try{t()}finally{Ac.transition=e}};he.unstable_act=aE;he.useCallback=function(t,e){return Rt.current.useCallback(t,e)};he.useContext=function(t){return Rt.current.useContext(t)};he.useDebugValue=function(){};he.useDeferredValue=function(t){return Rt.current.useDeferredValue(t)};he.useEffect=function(t,e){return Rt.current.useEffect(t,e)};he.useId=function(){return Rt.current.useId()};he.useImperativeHandle=function(t,e,n){return Rt.current.useImperativeHandle(t,e,n)};he.useInsertionEffect=function(t,e){return Rt.current.useInsertionEffect(t,e)};he.useLayoutEffect=function(t,e){return Rt.current.useLayoutEffect(t,e)};he.useMemo=function(t,e){return Rt.current.useMemo(t,e)};he.useReducer=function(t,e,n){return Rt.current.useReducer(t,e,n)};he.useRef=function(t){return Rt.current.useRef(t)};he.useState=function(t){return Rt.current.useState(t)};he.useSyncExternalStore=function(t,e,n){return Rt.current.useSyncExternalStore(t,e,n)};he.useTransition=function(){return Rt.current.useTransition()};he.version="18.3.1";Zw.exports=he;var O=Zw.exports;const Zu=ak(O),Tk=ok({__proto__:null,default:Zu},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sk=O,Ik=Symbol.for("react.element"),bk=Symbol.for("react.fragment"),kk=Object.prototype.hasOwnProperty,Ck=Sk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ak={key:!0,ref:!0,__self:!0,__source:!0};function lE(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)kk.call(e,r)&&!Ak.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Ik,type:t,key:s,ref:o,props:i,_owner:Ck.current}}Ju.Fragment=bk;Ju.jsx=lE;Ju.jsxs=lE;Jw.exports=Ju;var p=Jw.exports,df={},cE={exports:{}},Xt={},uE={exports:{}},hE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,H){var Z=z.length;z.push(H);e:for(;0<Z;){var ce=Z-1>>>1,ie=z[ce];if(0<i(ie,H))z[ce]=H,z[Z]=ie,Z=ce;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var H=z[0],Z=z.pop();if(Z!==H){z[0]=Z;e:for(var ce=0,ie=z.length,B=ie>>>1;ce<B;){var se=2*(ce+1)-1,oe=z[se],ne=se+1,De=z[ne];if(0>i(oe,Z))ne<ie&&0>i(De,oe)?(z[ce]=De,z[ne]=Z,ce=ne):(z[ce]=oe,z[se]=Z,ce=se);else if(ne<ie&&0>i(De,Z))z[ce]=De,z[ne]=Z,ce=ne;else break e}}return H}function i(z,H){var Z=z.sortIndex-H.sortIndex;return Z!==0?Z:z.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,f=3,g=!1,_=!1,v=!1,T=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(z){for(var H=n(c);H!==null;){if(H.callback===null)r(c);else if(H.startTime<=z)r(c),H.sortIndex=H.expirationTime,e(l,H);else break;H=n(c)}}function R(z){if(v=!1,b(z),!_)if(n(l)!==null)_=!0,Q(N);else{var H=n(c);H!==null&&X(R,H.startTime-z)}}function N(z,H){_=!1,v&&(v=!1,w(E),E=-1),g=!0;var Z=f;try{for(b(H),d=n(l);d!==null&&(!(d.expirationTime>H)||z&&!P());){var ce=d.callback;if(typeof ce=="function"){d.callback=null,f=d.priorityLevel;var ie=ce(d.expirationTime<=H);H=t.unstable_now(),typeof ie=="function"?d.callback=ie:d===n(l)&&r(l),b(H)}else r(l);d=n(l)}if(d!==null)var B=!0;else{var se=n(c);se!==null&&X(R,se.startTime-H),B=!1}return B}finally{d=null,f=Z,g=!1}}var M=!1,S=null,E=-1,C=5,I=-1;function P(){return!(t.unstable_now()-I<C)}function D(){if(S!==null){var z=t.unstable_now();I=z;var H=!0;try{H=S(!0,z)}finally{H?A():(M=!1,S=null)}}else M=!1}var A;if(typeof x=="function")A=function(){x(D)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,j=Y.port2;Y.port1.onmessage=D,A=function(){j.postMessage(null)}}else A=function(){T(D,0)};function Q(z){S=z,M||(M=!0,A())}function X(z,H){E=T(function(){z(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){_||g||(_=!0,Q(N))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(z){switch(f){case 1:case 2:case 3:var H=3;break;default:H=f}var Z=f;f=H;try{return z()}finally{f=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,H){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Z=f;f=z;try{return H()}finally{f=Z}},t.unstable_scheduleCallback=function(z,H,Z){var ce=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ce+Z:ce):Z=ce,z){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=Z+ie,z={id:h++,callback:H,priorityLevel:z,startTime:Z,expirationTime:ie,sortIndex:-1},Z>ce?(z.sortIndex=Z,e(c,z),n(l)===null&&z===n(c)&&(v?(w(E),E=-1):v=!0,X(R,Z-ce))):(z.sortIndex=ie,e(l,z),_||g||(_=!0,Q(N))),z},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(z){var H=f;return function(){var Z=f;f=H;try{return z.apply(this,arguments)}finally{f=Z}}}})(hE);uE.exports=hE;var Pk=uE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rk=O,Yt=Pk;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var dE=new Set,Ca={};function Xi(t,e){Us(t,e),Us(t+"Capture",e)}function Us(t,e){for(Ca[t]=e,t=0;t<e.length;t++)dE.add(e[t])}var ir=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ff=Object.prototype.hasOwnProperty,Nk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,s_={},o_={};function Dk(t){return ff.call(o_,t)?!0:ff.call(s_,t)?!1:Nk.test(t)?o_[t]=!0:(s_[t]=!0,!1)}function Mk(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Ok(t,e,n,r){if(e===null||typeof e>"u"||Mk(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ct[t]=new Nt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ct[e]=new Nt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ct[t]=new Nt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ct[t]=new Nt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ct[t]=new Nt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ct[t]=new Nt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ct[t]=new Nt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ct[t]=new Nt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ct[t]=new Nt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Gp=/[\-:]([a-z])/g;function Qp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Gp,Qp);ct[e]=new Nt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Gp,Qp);ct[e]=new Nt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Gp,Qp);ct[e]=new Nt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ct[t]=new Nt(t,1,!1,t.toLowerCase(),null,!1,!1)});ct.xlinkHref=new Nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ct[t]=new Nt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Yp(t,e,n,r){var i=ct.hasOwnProperty(e)?ct[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Ok(e,n,i,r)&&(n=null),r||i===null?Dk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var fr=Rk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Kl=Symbol.for("react.element"),ps=Symbol.for("react.portal"),ms=Symbol.for("react.fragment"),Xp=Symbol.for("react.strict_mode"),pf=Symbol.for("react.profiler"),fE=Symbol.for("react.provider"),pE=Symbol.for("react.context"),Jp=Symbol.for("react.forward_ref"),mf=Symbol.for("react.suspense"),gf=Symbol.for("react.suspense_list"),Zp=Symbol.for("react.memo"),xr=Symbol.for("react.lazy"),mE=Symbol.for("react.offscreen"),a_=Symbol.iterator;function Ro(t){return t===null||typeof t!="object"?null:(t=a_&&t[a_]||t["@@iterator"],typeof t=="function"?t:null)}var Le=Object.assign,gd;function Ko(t){if(gd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);gd=e&&e[1]||""}return`
`+gd+t}var yd=!1;function _d(t,e){if(!t||yd)return"";yd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{yd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ko(t):""}function Lk(t){switch(t.tag){case 5:return Ko(t.type);case 16:return Ko("Lazy");case 13:return Ko("Suspense");case 19:return Ko("SuspenseList");case 0:case 2:case 15:return t=_d(t.type,!1),t;case 11:return t=_d(t.type.render,!1),t;case 1:return t=_d(t.type,!0),t;default:return""}}function yf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ms:return"Fragment";case ps:return"Portal";case pf:return"Profiler";case Xp:return"StrictMode";case mf:return"Suspense";case gf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case pE:return(t.displayName||"Context")+".Consumer";case fE:return(t._context.displayName||"Context")+".Provider";case Jp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Zp:return e=t.displayName||null,e!==null?e:yf(t.type)||"Memo";case xr:e=t._payload,t=t._init;try{return yf(t(e))}catch{}}return null}function Vk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yf(e);case 8:return e===Xp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ei(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function gE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function jk(t){var e=gE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Gl(t){t._valueTracker||(t._valueTracker=jk(t))}function yE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=gE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function eu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function _f(t,e){var n=e.checked;return Le({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function l_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ei(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function _E(t,e){e=e.checked,e!=null&&Yp(t,"checked",e,!1)}function vf(t,e){_E(t,e);var n=ei(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?wf(t,e.type,n):e.hasOwnProperty("defaultValue")&&wf(t,e.type,ei(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function c_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function wf(t,e,n){(e!=="number"||eu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Go=Array.isArray;function ks(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ei(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ef(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return Le({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function u_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(Go(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ei(n)}}function vE(t,e){var n=ei(e.value),r=ei(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function h_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function wE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?wE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ql,EE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ql=Ql||document.createElement("div"),Ql.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ql.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Aa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ca={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fk=["Webkit","ms","Moz","O"];Object.keys(ca).forEach(function(t){Fk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ca[e]=ca[t]})});function xE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ca.hasOwnProperty(t)&&ca[t]?(""+e).trim():e+"px"}function TE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=xE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Uk=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tf(t,e){if(e){if(Uk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function Sf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var If=null;function em(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var bf=null,Cs=null,As=null;function d_(t){if(t=pl(t)){if(typeof bf!="function")throw Error($(280));var e=t.stateNode;e&&(e=ih(e),bf(t.stateNode,t.type,e))}}function SE(t){Cs?As?As.push(t):As=[t]:Cs=t}function IE(){if(Cs){var t=Cs,e=As;if(As=Cs=null,d_(t),e)for(t=0;t<e.length;t++)d_(e[t])}}function bE(t,e){return t(e)}function kE(){}var vd=!1;function CE(t,e,n){if(vd)return t(e,n);vd=!0;try{return bE(t,e,n)}finally{vd=!1,(Cs!==null||As!==null)&&(kE(),IE())}}function Pa(t,e){var n=t.stateNode;if(n===null)return null;var r=ih(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var kf=!1;if(ir)try{var No={};Object.defineProperty(No,"passive",{get:function(){kf=!0}}),window.addEventListener("test",No,No),window.removeEventListener("test",No,No)}catch{kf=!1}function zk(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var ua=!1,tu=null,nu=!1,Cf=null,Bk={onError:function(t){ua=!0,tu=t}};function $k(t,e,n,r,i,s,o,a,l){ua=!1,tu=null,zk.apply(Bk,arguments)}function Wk(t,e,n,r,i,s,o,a,l){if($k.apply(this,arguments),ua){if(ua){var c=tu;ua=!1,tu=null}else throw Error($(198));nu||(nu=!0,Cf=c)}}function Ji(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function AE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function f_(t){if(Ji(t)!==t)throw Error($(188))}function Hk(t){var e=t.alternate;if(!e){if(e=Ji(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return f_(i),t;if(s===r)return f_(i),e;s=s.sibling}throw Error($(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function PE(t){return t=Hk(t),t!==null?RE(t):null}function RE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=RE(t);if(e!==null)return e;t=t.sibling}return null}var NE=Yt.unstable_scheduleCallback,p_=Yt.unstable_cancelCallback,qk=Yt.unstable_shouldYield,Kk=Yt.unstable_requestPaint,Be=Yt.unstable_now,Gk=Yt.unstable_getCurrentPriorityLevel,tm=Yt.unstable_ImmediatePriority,DE=Yt.unstable_UserBlockingPriority,ru=Yt.unstable_NormalPriority,Qk=Yt.unstable_LowPriority,ME=Yt.unstable_IdlePriority,eh=null,Dn=null;function Yk(t){if(Dn&&typeof Dn.onCommitFiberRoot=="function")try{Dn.onCommitFiberRoot(eh,t,void 0,(t.current.flags&128)===128)}catch{}}var _n=Math.clz32?Math.clz32:Zk,Xk=Math.log,Jk=Math.LN2;function Zk(t){return t>>>=0,t===0?32:31-(Xk(t)/Jk|0)|0}var Yl=64,Xl=4194304;function Qo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function iu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Qo(a):(s&=o,s!==0&&(r=Qo(s)))}else o=n&~i,o!==0?r=Qo(o):s!==0&&(r=Qo(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-_n(e),i=1<<n,r|=t[n],e&=~i;return r}function eC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-_n(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=eC(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Af(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function OE(){var t=Yl;return Yl<<=1,!(Yl&4194240)&&(Yl=64),t}function wd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function dl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-_n(e),t[e]=n}function nC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-_n(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function nm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-_n(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ee=0;function LE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var VE,rm,jE,FE,UE,Pf=!1,Jl=[],jr=null,Fr=null,Ur=null,Ra=new Map,Na=new Map,Sr=[],rC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function m_(t,e){switch(t){case"focusin":case"focusout":jr=null;break;case"dragenter":case"dragleave":Fr=null;break;case"mouseover":case"mouseout":Ur=null;break;case"pointerover":case"pointerout":Ra.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Na.delete(e.pointerId)}}function Do(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=pl(e),e!==null&&rm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function iC(t,e,n,r,i){switch(e){case"focusin":return jr=Do(jr,t,e,n,r,i),!0;case"dragenter":return Fr=Do(Fr,t,e,n,r,i),!0;case"mouseover":return Ur=Do(Ur,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ra.set(s,Do(Ra.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Na.set(s,Do(Na.get(s)||null,t,e,n,r,i)),!0}return!1}function zE(t){var e=Pi(t.target);if(e!==null){var n=Ji(e);if(n!==null){if(e=n.tag,e===13){if(e=AE(n),e!==null){t.blockedOn=e,UE(t.priority,function(){jE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Pc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Rf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);If=r,n.target.dispatchEvent(r),If=null}else return e=pl(n),e!==null&&rm(e),t.blockedOn=n,!1;e.shift()}return!0}function g_(t,e,n){Pc(t)&&n.delete(e)}function sC(){Pf=!1,jr!==null&&Pc(jr)&&(jr=null),Fr!==null&&Pc(Fr)&&(Fr=null),Ur!==null&&Pc(Ur)&&(Ur=null),Ra.forEach(g_),Na.forEach(g_)}function Mo(t,e){t.blockedOn===e&&(t.blockedOn=null,Pf||(Pf=!0,Yt.unstable_scheduleCallback(Yt.unstable_NormalPriority,sC)))}function Da(t){function e(i){return Mo(i,t)}if(0<Jl.length){Mo(Jl[0],t);for(var n=1;n<Jl.length;n++){var r=Jl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(jr!==null&&Mo(jr,t),Fr!==null&&Mo(Fr,t),Ur!==null&&Mo(Ur,t),Ra.forEach(e),Na.forEach(e),n=0;n<Sr.length;n++)r=Sr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Sr.length&&(n=Sr[0],n.blockedOn===null);)zE(n),n.blockedOn===null&&Sr.shift()}var Ps=fr.ReactCurrentBatchConfig,su=!0;function oC(t,e,n,r){var i=Ee,s=Ps.transition;Ps.transition=null;try{Ee=1,im(t,e,n,r)}finally{Ee=i,Ps.transition=s}}function aC(t,e,n,r){var i=Ee,s=Ps.transition;Ps.transition=null;try{Ee=4,im(t,e,n,r)}finally{Ee=i,Ps.transition=s}}function im(t,e,n,r){if(su){var i=Rf(t,e,n,r);if(i===null)Pd(t,e,r,ou,n),m_(t,r);else if(iC(i,t,e,n,r))r.stopPropagation();else if(m_(t,r),e&4&&-1<rC.indexOf(t)){for(;i!==null;){var s=pl(i);if(s!==null&&VE(s),s=Rf(t,e,n,r),s===null&&Pd(t,e,r,ou,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Pd(t,e,r,null,n)}}var ou=null;function Rf(t,e,n,r){if(ou=null,t=em(r),t=Pi(t),t!==null)if(e=Ji(t),e===null)t=null;else if(n=e.tag,n===13){if(t=AE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ou=t,null}function BE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Gk()){case tm:return 1;case DE:return 4;case ru:case Qk:return 16;case ME:return 536870912;default:return 16}default:return 16}}var Pr=null,sm=null,Rc=null;function $E(){if(Rc)return Rc;var t,e=sm,n=e.length,r,i="value"in Pr?Pr.value:Pr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Rc=i.slice(t,1<r?1-r:void 0)}function Nc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Zl(){return!0}function y_(){return!1}function Jt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Zl:y_,this.isPropagationStopped=y_,this}return Le(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Zl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Zl)},persist:function(){},isPersistent:Zl}),e}var oo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},om=Jt(oo),fl=Le({},oo,{view:0,detail:0}),lC=Jt(fl),Ed,xd,Oo,th=Le({},fl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:am,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Oo&&(Oo&&t.type==="mousemove"?(Ed=t.screenX-Oo.screenX,xd=t.screenY-Oo.screenY):xd=Ed=0,Oo=t),Ed)},movementY:function(t){return"movementY"in t?t.movementY:xd}}),__=Jt(th),cC=Le({},th,{dataTransfer:0}),uC=Jt(cC),hC=Le({},fl,{relatedTarget:0}),Td=Jt(hC),dC=Le({},oo,{animationName:0,elapsedTime:0,pseudoElement:0}),fC=Jt(dC),pC=Le({},oo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),mC=Jt(pC),gC=Le({},oo,{data:0}),v_=Jt(gC),yC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_C={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=vC[t])?!!e[t]:!1}function am(){return wC}var EC=Le({},fl,{key:function(t){if(t.key){var e=yC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Nc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?_C[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:am,charCode:function(t){return t.type==="keypress"?Nc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Nc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),xC=Jt(EC),TC=Le({},th,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),w_=Jt(TC),SC=Le({},fl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:am}),IC=Jt(SC),bC=Le({},oo,{propertyName:0,elapsedTime:0,pseudoElement:0}),kC=Jt(bC),CC=Le({},th,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),AC=Jt(CC),PC=[9,13,27,32],lm=ir&&"CompositionEvent"in window,ha=null;ir&&"documentMode"in document&&(ha=document.documentMode);var RC=ir&&"TextEvent"in window&&!ha,WE=ir&&(!lm||ha&&8<ha&&11>=ha),E_=" ",x_=!1;function HE(t,e){switch(t){case"keyup":return PC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var gs=!1;function NC(t,e){switch(t){case"compositionend":return qE(e);case"keypress":return e.which!==32?null:(x_=!0,E_);case"textInput":return t=e.data,t===E_&&x_?null:t;default:return null}}function DC(t,e){if(gs)return t==="compositionend"||!lm&&HE(t,e)?(t=$E(),Rc=sm=Pr=null,gs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return WE&&e.locale!=="ko"?null:e.data;default:return null}}var MC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function T_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!MC[t.type]:e==="textarea"}function KE(t,e,n,r){SE(r),e=au(e,"onChange"),0<e.length&&(n=new om("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var da=null,Ma=null;function OC(t){ix(t,0)}function nh(t){var e=vs(t);if(yE(e))return t}function LC(t,e){if(t==="change")return e}var GE=!1;if(ir){var Sd;if(ir){var Id="oninput"in document;if(!Id){var S_=document.createElement("div");S_.setAttribute("oninput","return;"),Id=typeof S_.oninput=="function"}Sd=Id}else Sd=!1;GE=Sd&&(!document.documentMode||9<document.documentMode)}function I_(){da&&(da.detachEvent("onpropertychange",QE),Ma=da=null)}function QE(t){if(t.propertyName==="value"&&nh(Ma)){var e=[];KE(e,Ma,t,em(t)),CE(OC,e)}}function VC(t,e,n){t==="focusin"?(I_(),da=e,Ma=n,da.attachEvent("onpropertychange",QE)):t==="focusout"&&I_()}function jC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return nh(Ma)}function FC(t,e){if(t==="click")return nh(e)}function UC(t,e){if(t==="input"||t==="change")return nh(e)}function zC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var En=typeof Object.is=="function"?Object.is:zC;function Oa(t,e){if(En(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ff.call(e,i)||!En(t[i],e[i]))return!1}return!0}function b_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function k_(t,e){var n=b_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=b_(n)}}function YE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?YE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function XE(){for(var t=window,e=eu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=eu(t.document)}return e}function cm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function BC(t){var e=XE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&YE(n.ownerDocument.documentElement,n)){if(r!==null&&cm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=k_(n,s);var o=k_(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var $C=ir&&"documentMode"in document&&11>=document.documentMode,ys=null,Nf=null,fa=null,Df=!1;function C_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Df||ys==null||ys!==eu(r)||(r=ys,"selectionStart"in r&&cm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),fa&&Oa(fa,r)||(fa=r,r=au(Nf,"onSelect"),0<r.length&&(e=new om("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ys)))}function ec(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var _s={animationend:ec("Animation","AnimationEnd"),animationiteration:ec("Animation","AnimationIteration"),animationstart:ec("Animation","AnimationStart"),transitionend:ec("Transition","TransitionEnd")},bd={},JE={};ir&&(JE=document.createElement("div").style,"AnimationEvent"in window||(delete _s.animationend.animation,delete _s.animationiteration.animation,delete _s.animationstart.animation),"TransitionEvent"in window||delete _s.transitionend.transition);function rh(t){if(bd[t])return bd[t];if(!_s[t])return t;var e=_s[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in JE)return bd[t]=e[n];return t}var ZE=rh("animationend"),ex=rh("animationiteration"),tx=rh("animationstart"),nx=rh("transitionend"),rx=new Map,A_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function oi(t,e){rx.set(t,e),Xi(e,[t])}for(var kd=0;kd<A_.length;kd++){var Cd=A_[kd],WC=Cd.toLowerCase(),HC=Cd[0].toUpperCase()+Cd.slice(1);oi(WC,"on"+HC)}oi(ZE,"onAnimationEnd");oi(ex,"onAnimationIteration");oi(tx,"onAnimationStart");oi("dblclick","onDoubleClick");oi("focusin","onFocus");oi("focusout","onBlur");oi(nx,"onTransitionEnd");Us("onMouseEnter",["mouseout","mouseover"]);Us("onMouseLeave",["mouseout","mouseover"]);Us("onPointerEnter",["pointerout","pointerover"]);Us("onPointerLeave",["pointerout","pointerover"]);Xi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yo));function P_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Wk(r,e,void 0,t),t.currentTarget=null}function ix(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;P_(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;P_(i,a,c),s=l}}}if(nu)throw t=Cf,nu=!1,Cf=null,t}function Ce(t,e){var n=e[jf];n===void 0&&(n=e[jf]=new Set);var r=t+"__bubble";n.has(r)||(sx(e,t,2,!1),n.add(r))}function Ad(t,e,n){var r=0;e&&(r|=4),sx(n,t,r,e)}var tc="_reactListening"+Math.random().toString(36).slice(2);function La(t){if(!t[tc]){t[tc]=!0,dE.forEach(function(n){n!=="selectionchange"&&(qC.has(n)||Ad(n,!1,t),Ad(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[tc]||(e[tc]=!0,Ad("selectionchange",!1,e))}}function sx(t,e,n,r){switch(BE(e)){case 1:var i=oC;break;case 4:i=aC;break;default:i=im}n=i.bind(null,e,n,t),i=void 0,!kf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Pd(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Pi(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}CE(function(){var c=s,h=em(n),d=[];e:{var f=rx.get(t);if(f!==void 0){var g=om,_=t;switch(t){case"keypress":if(Nc(n)===0)break e;case"keydown":case"keyup":g=xC;break;case"focusin":_="focus",g=Td;break;case"focusout":_="blur",g=Td;break;case"beforeblur":case"afterblur":g=Td;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=__;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=uC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=IC;break;case ZE:case ex:case tx:g=fC;break;case nx:g=kC;break;case"scroll":g=lC;break;case"wheel":g=AC;break;case"copy":case"cut":case"paste":g=mC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=w_}var v=(e&4)!==0,T=!v&&t==="scroll",w=v?f!==null?f+"Capture":null:f;v=[];for(var x=c,b;x!==null;){b=x;var R=b.stateNode;if(b.tag===5&&R!==null&&(b=R,w!==null&&(R=Pa(x,w),R!=null&&v.push(Va(x,R,b)))),T)break;x=x.return}0<v.length&&(f=new g(f,_,null,n,h),d.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==If&&(_=n.relatedTarget||n.fromElement)&&(Pi(_)||_[sr]))break e;if((g||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,g?(_=n.relatedTarget||n.toElement,g=c,_=_?Pi(_):null,_!==null&&(T=Ji(_),_!==T||_.tag!==5&&_.tag!==6)&&(_=null)):(g=null,_=c),g!==_)){if(v=__,R="onMouseLeave",w="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(v=w_,R="onPointerLeave",w="onPointerEnter",x="pointer"),T=g==null?f:vs(g),b=_==null?f:vs(_),f=new v(R,x+"leave",g,n,h),f.target=T,f.relatedTarget=b,R=null,Pi(h)===c&&(v=new v(w,x+"enter",_,n,h),v.target=b,v.relatedTarget=T,R=v),T=R,g&&_)t:{for(v=g,w=_,x=0,b=v;b;b=ls(b))x++;for(b=0,R=w;R;R=ls(R))b++;for(;0<x-b;)v=ls(v),x--;for(;0<b-x;)w=ls(w),b--;for(;x--;){if(v===w||w!==null&&v===w.alternate)break t;v=ls(v),w=ls(w)}v=null}else v=null;g!==null&&R_(d,f,g,v,!1),_!==null&&T!==null&&R_(d,T,_,v,!0)}}e:{if(f=c?vs(c):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var N=LC;else if(T_(f))if(GE)N=UC;else{N=jC;var M=VC}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=FC);if(N&&(N=N(t,c))){KE(d,N,n,h);break e}M&&M(t,f,c),t==="focusout"&&(M=f._wrapperState)&&M.controlled&&f.type==="number"&&wf(f,"number",f.value)}switch(M=c?vs(c):window,t){case"focusin":(T_(M)||M.contentEditable==="true")&&(ys=M,Nf=c,fa=null);break;case"focusout":fa=Nf=ys=null;break;case"mousedown":Df=!0;break;case"contextmenu":case"mouseup":case"dragend":Df=!1,C_(d,n,h);break;case"selectionchange":if($C)break;case"keydown":case"keyup":C_(d,n,h)}var S;if(lm)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else gs?HE(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(WE&&n.locale!=="ko"&&(gs||E!=="onCompositionStart"?E==="onCompositionEnd"&&gs&&(S=$E()):(Pr=h,sm="value"in Pr?Pr.value:Pr.textContent,gs=!0)),M=au(c,E),0<M.length&&(E=new v_(E,t,null,n,h),d.push({event:E,listeners:M}),S?E.data=S:(S=qE(n),S!==null&&(E.data=S)))),(S=RC?NC(t,n):DC(t,n))&&(c=au(c,"onBeforeInput"),0<c.length&&(h=new v_("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=S))}ix(d,e)})}function Va(t,e,n){return{instance:t,listener:e,currentTarget:n}}function au(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Pa(t,n),s!=null&&r.unshift(Va(t,s,i)),s=Pa(t,e),s!=null&&r.push(Va(t,s,i))),t=t.return}return r}function ls(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function R_(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Pa(n,s),l!=null&&o.unshift(Va(n,l,a))):i||(l=Pa(n,s),l!=null&&o.push(Va(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var KC=/\r\n?/g,GC=/\u0000|\uFFFD/g;function N_(t){return(typeof t=="string"?t:""+t).replace(KC,`
`).replace(GC,"")}function nc(t,e,n){if(e=N_(e),N_(t)!==e&&n)throw Error($(425))}function lu(){}var Mf=null,Of=null;function Lf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Vf=typeof setTimeout=="function"?setTimeout:void 0,QC=typeof clearTimeout=="function"?clearTimeout:void 0,D_=typeof Promise=="function"?Promise:void 0,YC=typeof queueMicrotask=="function"?queueMicrotask:typeof D_<"u"?function(t){return D_.resolve(null).then(t).catch(XC)}:Vf;function XC(t){setTimeout(function(){throw t})}function Rd(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Da(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Da(e)}function zr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function M_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ao=Math.random().toString(36).slice(2),Rn="__reactFiber$"+ao,ja="__reactProps$"+ao,sr="__reactContainer$"+ao,jf="__reactEvents$"+ao,JC="__reactListeners$"+ao,ZC="__reactHandles$"+ao;function Pi(t){var e=t[Rn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[sr]||n[Rn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=M_(t);t!==null;){if(n=t[Rn])return n;t=M_(t)}return e}t=n,n=t.parentNode}return null}function pl(t){return t=t[Rn]||t[sr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function vs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function ih(t){return t[ja]||null}var Ff=[],ws=-1;function ai(t){return{current:t}}function Re(t){0>ws||(t.current=Ff[ws],Ff[ws]=null,ws--)}function Ie(t,e){ws++,Ff[ws]=t.current,t.current=e}var ti={},Tt=ai(ti),Ut=ai(!1),ji=ti;function zs(t,e){var n=t.type.contextTypes;if(!n)return ti;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function zt(t){return t=t.childContextTypes,t!=null}function cu(){Re(Ut),Re(Tt)}function O_(t,e,n){if(Tt.current!==ti)throw Error($(168));Ie(Tt,e),Ie(Ut,n)}function ox(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error($(108,Vk(t)||"Unknown",i));return Le({},n,r)}function uu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ti,ji=Tt.current,Ie(Tt,t),Ie(Ut,Ut.current),!0}function L_(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=ox(t,e,ji),r.__reactInternalMemoizedMergedChildContext=t,Re(Ut),Re(Tt),Ie(Tt,t)):Re(Ut),Ie(Ut,n)}var Kn=null,sh=!1,Nd=!1;function ax(t){Kn===null?Kn=[t]:Kn.push(t)}function eA(t){sh=!0,ax(t)}function li(){if(!Nd&&Kn!==null){Nd=!0;var t=0,e=Ee;try{var n=Kn;for(Ee=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Kn=null,sh=!1}catch(i){throw Kn!==null&&(Kn=Kn.slice(t+1)),NE(tm,li),i}finally{Ee=e,Nd=!1}}return null}var Es=[],xs=0,hu=null,du=0,en=[],tn=0,Fi=null,Qn=1,Yn="";function Si(t,e){Es[xs++]=du,Es[xs++]=hu,hu=t,du=e}function lx(t,e,n){en[tn++]=Qn,en[tn++]=Yn,en[tn++]=Fi,Fi=t;var r=Qn;t=Yn;var i=32-_n(r)-1;r&=~(1<<i),n+=1;var s=32-_n(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Qn=1<<32-_n(e)+i|n<<i|r,Yn=s+t}else Qn=1<<s|n<<i|r,Yn=t}function um(t){t.return!==null&&(Si(t,1),lx(t,1,0))}function hm(t){for(;t===hu;)hu=Es[--xs],Es[xs]=null,du=Es[--xs],Es[xs]=null;for(;t===Fi;)Fi=en[--tn],en[tn]=null,Yn=en[--tn],en[tn]=null,Qn=en[--tn],en[tn]=null}var Qt=null,Kt=null,Ne=!1,yn=null;function cx(t,e){var n=nn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function V_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Qt=t,Kt=zr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Qt=t,Kt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Fi!==null?{id:Qn,overflow:Yn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=nn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Qt=t,Kt=null,!0):!1;default:return!1}}function Uf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function zf(t){if(Ne){var e=Kt;if(e){var n=e;if(!V_(t,e)){if(Uf(t))throw Error($(418));e=zr(n.nextSibling);var r=Qt;e&&V_(t,e)?cx(r,n):(t.flags=t.flags&-4097|2,Ne=!1,Qt=t)}}else{if(Uf(t))throw Error($(418));t.flags=t.flags&-4097|2,Ne=!1,Qt=t}}}function j_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qt=t}function rc(t){if(t!==Qt)return!1;if(!Ne)return j_(t),Ne=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Lf(t.type,t.memoizedProps)),e&&(e=Kt)){if(Uf(t))throw ux(),Error($(418));for(;e;)cx(t,e),e=zr(e.nextSibling)}if(j_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Kt=zr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Kt=null}}else Kt=Qt?zr(t.stateNode.nextSibling):null;return!0}function ux(){for(var t=Kt;t;)t=zr(t.nextSibling)}function Bs(){Kt=Qt=null,Ne=!1}function dm(t){yn===null?yn=[t]:yn.push(t)}var tA=fr.ReactCurrentBatchConfig;function Lo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function ic(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function F_(t){var e=t._init;return e(t._payload)}function hx(t){function e(w,x){if(t){var b=w.deletions;b===null?(w.deletions=[x],w.flags|=16):b.push(x)}}function n(w,x){if(!t)return null;for(;x!==null;)e(w,x),x=x.sibling;return null}function r(w,x){for(w=new Map;x!==null;)x.key!==null?w.set(x.key,x):w.set(x.index,x),x=x.sibling;return w}function i(w,x){return w=Hr(w,x),w.index=0,w.sibling=null,w}function s(w,x,b){return w.index=b,t?(b=w.alternate,b!==null?(b=b.index,b<x?(w.flags|=2,x):b):(w.flags|=2,x)):(w.flags|=1048576,x)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,x,b,R){return x===null||x.tag!==6?(x=Fd(b,w.mode,R),x.return=w,x):(x=i(x,b),x.return=w,x)}function l(w,x,b,R){var N=b.type;return N===ms?h(w,x,b.props.children,R,b.key):x!==null&&(x.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===xr&&F_(N)===x.type)?(R=i(x,b.props),R.ref=Lo(w,x,b),R.return=w,R):(R=Fc(b.type,b.key,b.props,null,w.mode,R),R.ref=Lo(w,x,b),R.return=w,R)}function c(w,x,b,R){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=Ud(b,w.mode,R),x.return=w,x):(x=i(x,b.children||[]),x.return=w,x)}function h(w,x,b,R,N){return x===null||x.tag!==7?(x=Oi(b,w.mode,R,N),x.return=w,x):(x=i(x,b),x.return=w,x)}function d(w,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Fd(""+x,w.mode,b),x.return=w,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Kl:return b=Fc(x.type,x.key,x.props,null,w.mode,b),b.ref=Lo(w,null,x),b.return=w,b;case ps:return x=Ud(x,w.mode,b),x.return=w,x;case xr:var R=x._init;return d(w,R(x._payload),b)}if(Go(x)||Ro(x))return x=Oi(x,w.mode,b,null),x.return=w,x;ic(w,x)}return null}function f(w,x,b,R){var N=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return N!==null?null:a(w,x,""+b,R);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Kl:return b.key===N?l(w,x,b,R):null;case ps:return b.key===N?c(w,x,b,R):null;case xr:return N=b._init,f(w,x,N(b._payload),R)}if(Go(b)||Ro(b))return N!==null?null:h(w,x,b,R,null);ic(w,b)}return null}function g(w,x,b,R,N){if(typeof R=="string"&&R!==""||typeof R=="number")return w=w.get(b)||null,a(x,w,""+R,N);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Kl:return w=w.get(R.key===null?b:R.key)||null,l(x,w,R,N);case ps:return w=w.get(R.key===null?b:R.key)||null,c(x,w,R,N);case xr:var M=R._init;return g(w,x,b,M(R._payload),N)}if(Go(R)||Ro(R))return w=w.get(b)||null,h(x,w,R,N,null);ic(x,R)}return null}function _(w,x,b,R){for(var N=null,M=null,S=x,E=x=0,C=null;S!==null&&E<b.length;E++){S.index>E?(C=S,S=null):C=S.sibling;var I=f(w,S,b[E],R);if(I===null){S===null&&(S=C);break}t&&S&&I.alternate===null&&e(w,S),x=s(I,x,E),M===null?N=I:M.sibling=I,M=I,S=C}if(E===b.length)return n(w,S),Ne&&Si(w,E),N;if(S===null){for(;E<b.length;E++)S=d(w,b[E],R),S!==null&&(x=s(S,x,E),M===null?N=S:M.sibling=S,M=S);return Ne&&Si(w,E),N}for(S=r(w,S);E<b.length;E++)C=g(S,w,E,b[E],R),C!==null&&(t&&C.alternate!==null&&S.delete(C.key===null?E:C.key),x=s(C,x,E),M===null?N=C:M.sibling=C,M=C);return t&&S.forEach(function(P){return e(w,P)}),Ne&&Si(w,E),N}function v(w,x,b,R){var N=Ro(b);if(typeof N!="function")throw Error($(150));if(b=N.call(b),b==null)throw Error($(151));for(var M=N=null,S=x,E=x=0,C=null,I=b.next();S!==null&&!I.done;E++,I=b.next()){S.index>E?(C=S,S=null):C=S.sibling;var P=f(w,S,I.value,R);if(P===null){S===null&&(S=C);break}t&&S&&P.alternate===null&&e(w,S),x=s(P,x,E),M===null?N=P:M.sibling=P,M=P,S=C}if(I.done)return n(w,S),Ne&&Si(w,E),N;if(S===null){for(;!I.done;E++,I=b.next())I=d(w,I.value,R),I!==null&&(x=s(I,x,E),M===null?N=I:M.sibling=I,M=I);return Ne&&Si(w,E),N}for(S=r(w,S);!I.done;E++,I=b.next())I=g(S,w,E,I.value,R),I!==null&&(t&&I.alternate!==null&&S.delete(I.key===null?E:I.key),x=s(I,x,E),M===null?N=I:M.sibling=I,M=I);return t&&S.forEach(function(D){return e(w,D)}),Ne&&Si(w,E),N}function T(w,x,b,R){if(typeof b=="object"&&b!==null&&b.type===ms&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Kl:e:{for(var N=b.key,M=x;M!==null;){if(M.key===N){if(N=b.type,N===ms){if(M.tag===7){n(w,M.sibling),x=i(M,b.props.children),x.return=w,w=x;break e}}else if(M.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===xr&&F_(N)===M.type){n(w,M.sibling),x=i(M,b.props),x.ref=Lo(w,M,b),x.return=w,w=x;break e}n(w,M);break}else e(w,M);M=M.sibling}b.type===ms?(x=Oi(b.props.children,w.mode,R,b.key),x.return=w,w=x):(R=Fc(b.type,b.key,b.props,null,w.mode,R),R.ref=Lo(w,x,b),R.return=w,w=R)}return o(w);case ps:e:{for(M=b.key;x!==null;){if(x.key===M)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){n(w,x.sibling),x=i(x,b.children||[]),x.return=w,w=x;break e}else{n(w,x);break}else e(w,x);x=x.sibling}x=Ud(b,w.mode,R),x.return=w,w=x}return o(w);case xr:return M=b._init,T(w,x,M(b._payload),R)}if(Go(b))return _(w,x,b,R);if(Ro(b))return v(w,x,b,R);ic(w,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(n(w,x.sibling),x=i(x,b),x.return=w,w=x):(n(w,x),x=Fd(b,w.mode,R),x.return=w,w=x),o(w)):n(w,x)}return T}var $s=hx(!0),dx=hx(!1),fu=ai(null),pu=null,Ts=null,fm=null;function pm(){fm=Ts=pu=null}function mm(t){var e=fu.current;Re(fu),t._currentValue=e}function Bf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Rs(t,e){pu=t,fm=Ts=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(jt=!0),t.firstContext=null)}function ln(t){var e=t._currentValue;if(fm!==t)if(t={context:t,memoizedValue:e,next:null},Ts===null){if(pu===null)throw Error($(308));Ts=t,pu.dependencies={lanes:0,firstContext:t}}else Ts=Ts.next=t;return e}var Ri=null;function gm(t){Ri===null?Ri=[t]:Ri.push(t)}function fx(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,gm(e)):(n.next=i.next,i.next=n),e.interleaved=n,or(t,r)}function or(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Tr=!1;function ym(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function px(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function tr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Br(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,me&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,or(t,n)}return i=r.interleaved,i===null?(e.next=e,gm(r)):(e.next=i.next,i.next=e),r.interleaved=e,or(t,n)}function Dc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,nm(t,n)}}function U_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function mu(t,e,n,r){var i=t.updateQueue;Tr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,h=c=l=null,a=s;do{var f=a.lane,g=a.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,v=a;switch(f=e,g=n,v.tag){case 1:if(_=v.payload,typeof _=="function"){d=_.call(g,d,f);break e}d=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=v.payload,f=typeof _=="function"?_.call(g,d,f):_,f==null)break e;d=Le({},d,f);break e;case 2:Tr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=g,l=d):h=h.next=g,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);zi|=o,t.lanes=o,t.memoizedState=d}}function z_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error($(191,i));i.call(r)}}}var ml={},Mn=ai(ml),Fa=ai(ml),Ua=ai(ml);function Ni(t){if(t===ml)throw Error($(174));return t}function _m(t,e){switch(Ie(Ua,e),Ie(Fa,t),Ie(Mn,ml),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:xf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=xf(e,t)}Re(Mn),Ie(Mn,e)}function Ws(){Re(Mn),Re(Fa),Re(Ua)}function mx(t){Ni(Ua.current);var e=Ni(Mn.current),n=xf(e,t.type);e!==n&&(Ie(Fa,t),Ie(Mn,n))}function vm(t){Fa.current===t&&(Re(Mn),Re(Fa))}var Me=ai(0);function gu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Dd=[];function wm(){for(var t=0;t<Dd.length;t++)Dd[t]._workInProgressVersionPrimary=null;Dd.length=0}var Mc=fr.ReactCurrentDispatcher,Md=fr.ReactCurrentBatchConfig,Ui=0,Oe=null,Ge=null,tt=null,yu=!1,pa=!1,za=0,nA=0;function pt(){throw Error($(321))}function Em(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!En(t[n],e[n]))return!1;return!0}function xm(t,e,n,r,i,s){if(Ui=s,Oe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Mc.current=t===null||t.memoizedState===null?oA:aA,t=n(r,i),pa){s=0;do{if(pa=!1,za=0,25<=s)throw Error($(301));s+=1,tt=Ge=null,e.updateQueue=null,Mc.current=lA,t=n(r,i)}while(pa)}if(Mc.current=_u,e=Ge!==null&&Ge.next!==null,Ui=0,tt=Ge=Oe=null,yu=!1,e)throw Error($(300));return t}function Tm(){var t=za!==0;return za=0,t}function An(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?Oe.memoizedState=tt=t:tt=tt.next=t,tt}function cn(){if(Ge===null){var t=Oe.alternate;t=t!==null?t.memoizedState:null}else t=Ge.next;var e=tt===null?Oe.memoizedState:tt.next;if(e!==null)tt=e,Ge=t;else{if(t===null)throw Error($(310));Ge=t,t={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},tt===null?Oe.memoizedState=tt=t:tt=tt.next=t}return tt}function Ba(t,e){return typeof e=="function"?e(t):e}function Od(t){var e=cn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=Ge,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((Ui&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Oe.lanes|=h,zi|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,En(r,e.memoizedState)||(jt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Oe.lanes|=s,zi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ld(t){var e=cn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);En(s,e.memoizedState)||(jt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function gx(){}function yx(t,e){var n=Oe,r=cn(),i=e(),s=!En(r.memoizedState,i);if(s&&(r.memoizedState=i,jt=!0),r=r.queue,Sm(wx.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||tt!==null&&tt.memoizedState.tag&1){if(n.flags|=2048,$a(9,vx.bind(null,n,r,i,e),void 0,null),nt===null)throw Error($(349));Ui&30||_x(n,e,i)}return i}function _x(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function vx(t,e,n,r){e.value=n,e.getSnapshot=r,Ex(e)&&xx(t)}function wx(t,e,n){return n(function(){Ex(e)&&xx(t)})}function Ex(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!En(t,n)}catch{return!0}}function xx(t){var e=or(t,1);e!==null&&vn(e,t,1,-1)}function B_(t){var e=An();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ba,lastRenderedState:t},e.queue=t,t=t.dispatch=sA.bind(null,Oe,t),[e.memoizedState,t]}function $a(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Tx(){return cn().memoizedState}function Oc(t,e,n,r){var i=An();Oe.flags|=t,i.memoizedState=$a(1|e,n,void 0,r===void 0?null:r)}function oh(t,e,n,r){var i=cn();r=r===void 0?null:r;var s=void 0;if(Ge!==null){var o=Ge.memoizedState;if(s=o.destroy,r!==null&&Em(r,o.deps)){i.memoizedState=$a(e,n,s,r);return}}Oe.flags|=t,i.memoizedState=$a(1|e,n,s,r)}function $_(t,e){return Oc(8390656,8,t,e)}function Sm(t,e){return oh(2048,8,t,e)}function Sx(t,e){return oh(4,2,t,e)}function Ix(t,e){return oh(4,4,t,e)}function bx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function kx(t,e,n){return n=n!=null?n.concat([t]):null,oh(4,4,bx.bind(null,e,t),n)}function Im(){}function Cx(t,e){var n=cn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Em(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ax(t,e){var n=cn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Em(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Px(t,e,n){return Ui&21?(En(n,e)||(n=OE(),Oe.lanes|=n,zi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,jt=!0),t.memoizedState=n)}function rA(t,e){var n=Ee;Ee=n!==0&&4>n?n:4,t(!0);var r=Md.transition;Md.transition={};try{t(!1),e()}finally{Ee=n,Md.transition=r}}function Rx(){return cn().memoizedState}function iA(t,e,n){var r=Wr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Nx(t))Dx(e,n);else if(n=fx(t,e,n,r),n!==null){var i=Pt();vn(n,t,r,i),Mx(n,e,r)}}function sA(t,e,n){var r=Wr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Nx(t))Dx(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,En(a,o)){var l=e.interleaved;l===null?(i.next=i,gm(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=fx(t,e,i,r),n!==null&&(i=Pt(),vn(n,t,r,i),Mx(n,e,r))}}function Nx(t){var e=t.alternate;return t===Oe||e!==null&&e===Oe}function Dx(t,e){pa=yu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Mx(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,nm(t,n)}}var _u={readContext:ln,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useInsertionEffect:pt,useLayoutEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useMutableSource:pt,useSyncExternalStore:pt,useId:pt,unstable_isNewReconciler:!1},oA={readContext:ln,useCallback:function(t,e){return An().memoizedState=[t,e===void 0?null:e],t},useContext:ln,useEffect:$_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Oc(4194308,4,bx.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Oc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Oc(4,2,t,e)},useMemo:function(t,e){var n=An();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=An();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=iA.bind(null,Oe,t),[r.memoizedState,t]},useRef:function(t){var e=An();return t={current:t},e.memoizedState=t},useState:B_,useDebugValue:Im,useDeferredValue:function(t){return An().memoizedState=t},useTransition:function(){var t=B_(!1),e=t[0];return t=rA.bind(null,t[1]),An().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Oe,i=An();if(Ne){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),nt===null)throw Error($(349));Ui&30||_x(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,$_(wx.bind(null,r,s,t),[t]),r.flags|=2048,$a(9,vx.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=An(),e=nt.identifierPrefix;if(Ne){var n=Yn,r=Qn;n=(r&~(1<<32-_n(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=za++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=nA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},aA={readContext:ln,useCallback:Cx,useContext:ln,useEffect:Sm,useImperativeHandle:kx,useInsertionEffect:Sx,useLayoutEffect:Ix,useMemo:Ax,useReducer:Od,useRef:Tx,useState:function(){return Od(Ba)},useDebugValue:Im,useDeferredValue:function(t){var e=cn();return Px(e,Ge.memoizedState,t)},useTransition:function(){var t=Od(Ba)[0],e=cn().memoizedState;return[t,e]},useMutableSource:gx,useSyncExternalStore:yx,useId:Rx,unstable_isNewReconciler:!1},lA={readContext:ln,useCallback:Cx,useContext:ln,useEffect:Sm,useImperativeHandle:kx,useInsertionEffect:Sx,useLayoutEffect:Ix,useMemo:Ax,useReducer:Ld,useRef:Tx,useState:function(){return Ld(Ba)},useDebugValue:Im,useDeferredValue:function(t){var e=cn();return Ge===null?e.memoizedState=t:Px(e,Ge.memoizedState,t)},useTransition:function(){var t=Ld(Ba)[0],e=cn().memoizedState;return[t,e]},useMutableSource:gx,useSyncExternalStore:yx,useId:Rx,unstable_isNewReconciler:!1};function pn(t,e){if(t&&t.defaultProps){e=Le({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function $f(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Le({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ah={isMounted:function(t){return(t=t._reactInternals)?Ji(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Pt(),i=Wr(t),s=tr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Br(t,s,i),e!==null&&(vn(e,t,i,r),Dc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Pt(),i=Wr(t),s=tr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Br(t,s,i),e!==null&&(vn(e,t,i,r),Dc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Pt(),r=Wr(t),i=tr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Br(t,i,r),e!==null&&(vn(e,t,r,n),Dc(e,t,r))}};function W_(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Oa(n,r)||!Oa(i,s):!0}function Ox(t,e,n){var r=!1,i=ti,s=e.contextType;return typeof s=="object"&&s!==null?s=ln(s):(i=zt(e)?ji:Tt.current,r=e.contextTypes,s=(r=r!=null)?zs(t,i):ti),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ah,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function H_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ah.enqueueReplaceState(e,e.state,null)}function Wf(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},ym(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ln(s):(s=zt(e)?ji:Tt.current,i.context=zs(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&($f(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ah.enqueueReplaceState(i,i.state,null),mu(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Hs(t,e){try{var n="",r=e;do n+=Lk(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Vd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Hf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var cA=typeof WeakMap=="function"?WeakMap:Map;function Lx(t,e,n){n=tr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){wu||(wu=!0,tp=r),Hf(t,e)},n}function Vx(t,e,n){n=tr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Hf(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Hf(t,e),typeof r!="function"&&($r===null?$r=new Set([this]):$r.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function q_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new cA;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=TA.bind(null,t,e,n),e.then(t,t))}function K_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function G_(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=tr(-1,1),e.tag=2,Br(n,e,1))),n.lanes|=1),t)}var uA=fr.ReactCurrentOwner,jt=!1;function Ct(t,e,n,r){e.child=t===null?dx(e,null,n,r):$s(e,t.child,n,r)}function Q_(t,e,n,r,i){n=n.render;var s=e.ref;return Rs(e,i),r=xm(t,e,n,r,s,i),n=Tm(),t!==null&&!jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ar(t,e,i)):(Ne&&n&&um(e),e.flags|=1,Ct(t,e,r,i),e.child)}function Y_(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Dm(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,jx(t,e,s,r,i)):(t=Fc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Oa,n(o,r)&&t.ref===e.ref)return ar(t,e,i)}return e.flags|=1,t=Hr(s,r),t.ref=e.ref,t.return=e,e.child=t}function jx(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Oa(s,r)&&t.ref===e.ref)if(jt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(jt=!0);else return e.lanes=t.lanes,ar(t,e,i)}return qf(t,e,n,r,i)}function Fx(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(Is,qt),qt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ie(Is,qt),qt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ie(Is,qt),qt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ie(Is,qt),qt|=r;return Ct(t,e,i,n),e.child}function Ux(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function qf(t,e,n,r,i){var s=zt(n)?ji:Tt.current;return s=zs(e,s),Rs(e,i),n=xm(t,e,n,r,s,i),r=Tm(),t!==null&&!jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ar(t,e,i)):(Ne&&r&&um(e),e.flags|=1,Ct(t,e,n,i),e.child)}function X_(t,e,n,r,i){if(zt(n)){var s=!0;uu(e)}else s=!1;if(Rs(e,i),e.stateNode===null)Lc(t,e),Ox(e,n,r),Wf(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=ln(c):(c=zt(n)?ji:Tt.current,c=zs(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&H_(e,o,r,c),Tr=!1;var f=e.memoizedState;o.state=f,mu(e,r,o,i),l=e.memoizedState,a!==r||f!==l||Ut.current||Tr?(typeof h=="function"&&($f(e,n,h,r),l=e.memoizedState),(a=Tr||W_(e,n,a,r,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,px(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:pn(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=ln(l):(l=zt(n)?ji:Tt.current,l=zs(e,l));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&H_(e,o,r,l),Tr=!1,f=e.memoizedState,o.state=f,mu(e,r,o,i);var _=e.memoizedState;a!==d||f!==_||Ut.current||Tr?(typeof g=="function"&&($f(e,n,g,r),_=e.memoizedState),(c=Tr||W_(e,n,c,r,f,_,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Kf(t,e,n,r,s,i)}function Kf(t,e,n,r,i,s){Ux(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&L_(e,n,!1),ar(t,e,s);r=e.stateNode,uA.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=$s(e,t.child,null,s),e.child=$s(e,null,a,s)):Ct(t,e,a,s),e.memoizedState=r.state,i&&L_(e,n,!0),e.child}function zx(t){var e=t.stateNode;e.pendingContext?O_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&O_(t,e.context,!1),_m(t,e.containerInfo)}function J_(t,e,n,r,i){return Bs(),dm(i),e.flags|=256,Ct(t,e,n,r),e.child}var Gf={dehydrated:null,treeContext:null,retryLane:0};function Qf(t){return{baseLanes:t,cachePool:null,transitions:null}}function Bx(t,e,n){var r=e.pendingProps,i=Me.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ie(Me,i&1),t===null)return zf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=uh(o,r,0,null),t=Oi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Qf(n),e.memoizedState=Gf,t):bm(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return hA(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Hr(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Hr(a,s):(s=Oi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Qf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Gf,r}return s=t.child,t=s.sibling,r=Hr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function bm(t,e){return e=uh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function sc(t,e,n,r){return r!==null&&dm(r),$s(e,t.child,null,n),t=bm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function hA(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Vd(Error($(422))),sc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=uh({mode:"visible",children:r.children},i,0,null),s=Oi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&$s(e,t.child,null,o),e.child.memoizedState=Qf(o),e.memoizedState=Gf,s);if(!(e.mode&1))return sc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error($(419)),r=Vd(s,r,void 0),sc(t,e,o,r)}if(a=(o&t.childLanes)!==0,jt||a){if(r=nt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,or(t,i),vn(r,t,i,-1))}return Nm(),r=Vd(Error($(421))),sc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=SA.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Kt=zr(i.nextSibling),Qt=e,Ne=!0,yn=null,t!==null&&(en[tn++]=Qn,en[tn++]=Yn,en[tn++]=Fi,Qn=t.id,Yn=t.overflow,Fi=e),e=bm(e,r.children),e.flags|=4096,e)}function Z_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Bf(t.return,e,n)}function jd(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function $x(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Ct(t,e,r.children,n),r=Me.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Z_(t,n,e);else if(t.tag===19)Z_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ie(Me,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&gu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),jd(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&gu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}jd(e,!0,n,null,s);break;case"together":jd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Lc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ar(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),zi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=Hr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Hr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function dA(t,e,n){switch(e.tag){case 3:zx(e),Bs();break;case 5:mx(e);break;case 1:zt(e.type)&&uu(e);break;case 4:_m(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ie(fu,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ie(Me,Me.current&1),e.flags|=128,null):n&e.child.childLanes?Bx(t,e,n):(Ie(Me,Me.current&1),t=ar(t,e,n),t!==null?t.sibling:null);Ie(Me,Me.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return $x(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ie(Me,Me.current),r)break;return null;case 22:case 23:return e.lanes=0,Fx(t,e,n)}return ar(t,e,n)}var Wx,Yf,Hx,qx;Wx=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Yf=function(){};Hx=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ni(Mn.current);var s=null;switch(n){case"input":i=_f(t,i),r=_f(t,r),s=[];break;case"select":i=Le({},i,{value:void 0}),r=Le({},r,{value:void 0}),s=[];break;case"textarea":i=Ef(t,i),r=Ef(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=lu)}Tf(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ca.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ca.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ce("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};qx=function(t,e,n,r){n!==r&&(e.flags|=4)};function Vo(t,e){if(!Ne)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function fA(t,e,n){var r=e.pendingProps;switch(hm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(e),null;case 1:return zt(e.type)&&cu(),mt(e),null;case 3:return r=e.stateNode,Ws(),Re(Ut),Re(Tt),wm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(rc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,yn!==null&&(ip(yn),yn=null))),Yf(t,e),mt(e),null;case 5:vm(e);var i=Ni(Ua.current);if(n=e.type,t!==null&&e.stateNode!=null)Hx(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return mt(e),null}if(t=Ni(Mn.current),rc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Rn]=e,r[ja]=s,t=(e.mode&1)!==0,n){case"dialog":Ce("cancel",r),Ce("close",r);break;case"iframe":case"object":case"embed":Ce("load",r);break;case"video":case"audio":for(i=0;i<Yo.length;i++)Ce(Yo[i],r);break;case"source":Ce("error",r);break;case"img":case"image":case"link":Ce("error",r),Ce("load",r);break;case"details":Ce("toggle",r);break;case"input":l_(r,s),Ce("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ce("invalid",r);break;case"textarea":u_(r,s),Ce("invalid",r)}Tf(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&nc(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&nc(r.textContent,a,t),i=["children",""+a]):Ca.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ce("scroll",r)}switch(n){case"input":Gl(r),c_(r,s,!0);break;case"textarea":Gl(r),h_(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=lu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=wE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Rn]=e,t[ja]=r,Wx(t,e,!1,!1),e.stateNode=t;e:{switch(o=Sf(n,r),n){case"dialog":Ce("cancel",t),Ce("close",t),i=r;break;case"iframe":case"object":case"embed":Ce("load",t),i=r;break;case"video":case"audio":for(i=0;i<Yo.length;i++)Ce(Yo[i],t);i=r;break;case"source":Ce("error",t),i=r;break;case"img":case"image":case"link":Ce("error",t),Ce("load",t),i=r;break;case"details":Ce("toggle",t),i=r;break;case"input":l_(t,r),i=_f(t,r),Ce("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Le({},r,{value:void 0}),Ce("invalid",t);break;case"textarea":u_(t,r),i=Ef(t,r),Ce("invalid",t);break;default:i=r}Tf(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?TE(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&EE(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Aa(t,l):typeof l=="number"&&Aa(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ca.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ce("scroll",t):l!=null&&Yp(t,s,l,o))}switch(n){case"input":Gl(t),c_(t,r,!1);break;case"textarea":Gl(t),h_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ei(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ks(t,!!r.multiple,s,!1):r.defaultValue!=null&&ks(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=lu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return mt(e),null;case 6:if(t&&e.stateNode!=null)qx(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=Ni(Ua.current),Ni(Mn.current),rc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Rn]=e,(s=r.nodeValue!==n)&&(t=Qt,t!==null))switch(t.tag){case 3:nc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&nc(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Rn]=e,e.stateNode=r}return mt(e),null;case 13:if(Re(Me),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ne&&Kt!==null&&e.mode&1&&!(e.flags&128))ux(),Bs(),e.flags|=98560,s=!1;else if(s=rc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error($(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error($(317));s[Rn]=e}else Bs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;mt(e),s=!1}else yn!==null&&(ip(yn),yn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Me.current&1?Ye===0&&(Ye=3):Nm())),e.updateQueue!==null&&(e.flags|=4),mt(e),null);case 4:return Ws(),Yf(t,e),t===null&&La(e.stateNode.containerInfo),mt(e),null;case 10:return mm(e.type._context),mt(e),null;case 17:return zt(e.type)&&cu(),mt(e),null;case 19:if(Re(Me),s=e.memoizedState,s===null)return mt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Vo(s,!1);else{if(Ye!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=gu(t),o!==null){for(e.flags|=128,Vo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ie(Me,Me.current&1|2),e.child}t=t.sibling}s.tail!==null&&Be()>qs&&(e.flags|=128,r=!0,Vo(s,!1),e.lanes=4194304)}else{if(!r)if(t=gu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Vo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ne)return mt(e),null}else 2*Be()-s.renderingStartTime>qs&&n!==1073741824&&(e.flags|=128,r=!0,Vo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Be(),e.sibling=null,n=Me.current,Ie(Me,r?n&1|2:n&1),e):(mt(e),null);case 22:case 23:return Rm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?qt&1073741824&&(mt(e),e.subtreeFlags&6&&(e.flags|=8192)):mt(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function pA(t,e){switch(hm(e),e.tag){case 1:return zt(e.type)&&cu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ws(),Re(Ut),Re(Tt),wm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return vm(e),null;case 13:if(Re(Me),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));Bs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Re(Me),null;case 4:return Ws(),null;case 10:return mm(e.type._context),null;case 22:case 23:return Rm(),null;case 24:return null;default:return null}}var oc=!1,vt=!1,mA=typeof WeakSet=="function"?WeakSet:Set,K=null;function Ss(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fe(t,e,r)}else n.current=null}function Xf(t,e,n){try{n()}catch(r){Fe(t,e,r)}}var ev=!1;function gA(t,e){if(Mf=su,t=XE(),cm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,f=null;t:for(;;){for(var g;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)f=d,d=g;for(;;){if(d===t)break t;if(f===n&&++c===i&&(a=o),f===s&&++h===r&&(l=o),(g=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Of={focusedElem:t,selectionRange:n},su=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var v=_.memoizedProps,T=_.memoizedState,w=e.stateNode,x=w.getSnapshotBeforeUpdate(e.elementType===e.type?v:pn(e.type,v),T);w.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(R){Fe(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return _=ev,ev=!1,_}function ma(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Xf(e,n,s)}i=i.next}while(i!==r)}}function lh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Jf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Kx(t){var e=t.alternate;e!==null&&(t.alternate=null,Kx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Rn],delete e[ja],delete e[jf],delete e[JC],delete e[ZC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Gx(t){return t.tag===5||t.tag===3||t.tag===4}function tv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Gx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Zf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=lu));else if(r!==4&&(t=t.child,t!==null))for(Zf(t,e,n),t=t.sibling;t!==null;)Zf(t,e,n),t=t.sibling}function ep(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ep(t,e,n),t=t.sibling;t!==null;)ep(t,e,n),t=t.sibling}var it=null,mn=!1;function vr(t,e,n){for(n=n.child;n!==null;)Qx(t,e,n),n=n.sibling}function Qx(t,e,n){if(Dn&&typeof Dn.onCommitFiberUnmount=="function")try{Dn.onCommitFiberUnmount(eh,n)}catch{}switch(n.tag){case 5:vt||Ss(n,e);case 6:var r=it,i=mn;it=null,vr(t,e,n),it=r,mn=i,it!==null&&(mn?(t=it,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):it.removeChild(n.stateNode));break;case 18:it!==null&&(mn?(t=it,n=n.stateNode,t.nodeType===8?Rd(t.parentNode,n):t.nodeType===1&&Rd(t,n),Da(t)):Rd(it,n.stateNode));break;case 4:r=it,i=mn,it=n.stateNode.containerInfo,mn=!0,vr(t,e,n),it=r,mn=i;break;case 0:case 11:case 14:case 15:if(!vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Xf(n,e,o),i=i.next}while(i!==r)}vr(t,e,n);break;case 1:if(!vt&&(Ss(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Fe(n,e,a)}vr(t,e,n);break;case 21:vr(t,e,n);break;case 22:n.mode&1?(vt=(r=vt)||n.memoizedState!==null,vr(t,e,n),vt=r):vr(t,e,n);break;default:vr(t,e,n)}}function nv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new mA),e.forEach(function(r){var i=IA.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function fn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:it=a.stateNode,mn=!1;break e;case 3:it=a.stateNode.containerInfo,mn=!0;break e;case 4:it=a.stateNode.containerInfo,mn=!0;break e}a=a.return}if(it===null)throw Error($(160));Qx(s,o,i),it=null,mn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Fe(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Yx(e,t),e=e.sibling}function Yx(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(fn(e,t),bn(t),r&4){try{ma(3,t,t.return),lh(3,t)}catch(v){Fe(t,t.return,v)}try{ma(5,t,t.return)}catch(v){Fe(t,t.return,v)}}break;case 1:fn(e,t),bn(t),r&512&&n!==null&&Ss(n,n.return);break;case 5:if(fn(e,t),bn(t),r&512&&n!==null&&Ss(n,n.return),t.flags&32){var i=t.stateNode;try{Aa(i,"")}catch(v){Fe(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&_E(i,s),Sf(a,o);var c=Sf(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?TE(i,d):h==="dangerouslySetInnerHTML"?EE(i,d):h==="children"?Aa(i,d):Yp(i,h,d,c)}switch(a){case"input":vf(i,s);break;case"textarea":vE(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?ks(i,!!s.multiple,g,!1):f!==!!s.multiple&&(s.defaultValue!=null?ks(i,!!s.multiple,s.defaultValue,!0):ks(i,!!s.multiple,s.multiple?[]:"",!1))}i[ja]=s}catch(v){Fe(t,t.return,v)}}break;case 6:if(fn(e,t),bn(t),r&4){if(t.stateNode===null)throw Error($(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){Fe(t,t.return,v)}}break;case 3:if(fn(e,t),bn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Da(e.containerInfo)}catch(v){Fe(t,t.return,v)}break;case 4:fn(e,t),bn(t);break;case 13:fn(e,t),bn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Am=Be())),r&4&&nv(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(vt=(c=vt)||h,fn(e,t),vt=c):fn(e,t),bn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(K=t,h=t.child;h!==null;){for(d=K=h;K!==null;){switch(f=K,g=f.child,f.tag){case 0:case 11:case 14:case 15:ma(4,f,f.return);break;case 1:Ss(f,f.return);var _=f.stateNode;if(typeof _.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(v){Fe(r,n,v)}}break;case 5:Ss(f,f.return);break;case 22:if(f.memoizedState!==null){iv(d);continue}}g!==null?(g.return=f,K=g):iv(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=xE("display",o))}catch(v){Fe(t,t.return,v)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(v){Fe(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:fn(e,t),bn(t),r&4&&nv(t);break;case 21:break;default:fn(e,t),bn(t)}}function bn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Gx(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Aa(i,""),r.flags&=-33);var s=tv(t);ep(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=tv(t);Zf(t,a,o);break;default:throw Error($(161))}}catch(l){Fe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function yA(t,e,n){K=t,Xx(t)}function Xx(t,e,n){for(var r=(t.mode&1)!==0;K!==null;){var i=K,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||oc;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||vt;a=oc;var c=vt;if(oc=o,(vt=l)&&!c)for(K=i;K!==null;)o=K,l=o.child,o.tag===22&&o.memoizedState!==null?sv(i):l!==null?(l.return=o,K=l):sv(i);for(;s!==null;)K=s,Xx(s),s=s.sibling;K=i,oc=a,vt=c}rv(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,K=s):rv(t)}}function rv(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:vt||lh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!vt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:pn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&z_(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}z_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Da(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}vt||e.flags&512&&Jf(e)}catch(f){Fe(e,e.return,f)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function iv(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function sv(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{lh(4,e)}catch(l){Fe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Fe(e,i,l)}}var s=e.return;try{Jf(e)}catch(l){Fe(e,s,l)}break;case 5:var o=e.return;try{Jf(e)}catch(l){Fe(e,o,l)}}}catch(l){Fe(e,e.return,l)}if(e===t){K=null;break}var a=e.sibling;if(a!==null){a.return=e.return,K=a;break}K=e.return}}var _A=Math.ceil,vu=fr.ReactCurrentDispatcher,km=fr.ReactCurrentOwner,sn=fr.ReactCurrentBatchConfig,me=0,nt=null,qe=null,at=0,qt=0,Is=ai(0),Ye=0,Wa=null,zi=0,ch=0,Cm=0,ga=null,Ot=null,Am=0,qs=1/0,qn=null,wu=!1,tp=null,$r=null,ac=!1,Rr=null,Eu=0,ya=0,np=null,Vc=-1,jc=0;function Pt(){return me&6?Be():Vc!==-1?Vc:Vc=Be()}function Wr(t){return t.mode&1?me&2&&at!==0?at&-at:tA.transition!==null?(jc===0&&(jc=OE()),jc):(t=Ee,t!==0||(t=window.event,t=t===void 0?16:BE(t.type)),t):1}function vn(t,e,n,r){if(50<ya)throw ya=0,np=null,Error($(185));dl(t,n,r),(!(me&2)||t!==nt)&&(t===nt&&(!(me&2)&&(ch|=n),Ye===4&&Ir(t,at)),Bt(t,r),n===1&&me===0&&!(e.mode&1)&&(qs=Be()+500,sh&&li()))}function Bt(t,e){var n=t.callbackNode;tC(t,e);var r=iu(t,t===nt?at:0);if(r===0)n!==null&&p_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&p_(n),e===1)t.tag===0?eA(ov.bind(null,t)):ax(ov.bind(null,t)),YC(function(){!(me&6)&&li()}),n=null;else{switch(LE(r)){case 1:n=tm;break;case 4:n=DE;break;case 16:n=ru;break;case 536870912:n=ME;break;default:n=ru}n=sT(n,Jx.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Jx(t,e){if(Vc=-1,jc=0,me&6)throw Error($(327));var n=t.callbackNode;if(Ns()&&t.callbackNode!==n)return null;var r=iu(t,t===nt?at:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=xu(t,r);else{e=r;var i=me;me|=2;var s=eT();(nt!==t||at!==e)&&(qn=null,qs=Be()+500,Mi(t,e));do try{EA();break}catch(a){Zx(t,a)}while(!0);pm(),vu.current=s,me=i,qe!==null?e=0:(nt=null,at=0,e=Ye)}if(e!==0){if(e===2&&(i=Af(t),i!==0&&(r=i,e=rp(t,i))),e===1)throw n=Wa,Mi(t,0),Ir(t,r),Bt(t,Be()),n;if(e===6)Ir(t,r);else{if(i=t.current.alternate,!(r&30)&&!vA(i)&&(e=xu(t,r),e===2&&(s=Af(t),s!==0&&(r=s,e=rp(t,s))),e===1))throw n=Wa,Mi(t,0),Ir(t,r),Bt(t,Be()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:Ii(t,Ot,qn);break;case 3:if(Ir(t,r),(r&130023424)===r&&(e=Am+500-Be(),10<e)){if(iu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Pt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Vf(Ii.bind(null,t,Ot,qn),e);break}Ii(t,Ot,qn);break;case 4:if(Ir(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-_n(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_A(r/1960))-r,10<r){t.timeoutHandle=Vf(Ii.bind(null,t,Ot,qn),r);break}Ii(t,Ot,qn);break;case 5:Ii(t,Ot,qn);break;default:throw Error($(329))}}}return Bt(t,Be()),t.callbackNode===n?Jx.bind(null,t):null}function rp(t,e){var n=ga;return t.current.memoizedState.isDehydrated&&(Mi(t,e).flags|=256),t=xu(t,e),t!==2&&(e=Ot,Ot=n,e!==null&&ip(e)),t}function ip(t){Ot===null?Ot=t:Ot.push.apply(Ot,t)}function vA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!En(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ir(t,e){for(e&=~Cm,e&=~ch,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-_n(e),r=1<<n;t[n]=-1,e&=~r}}function ov(t){if(me&6)throw Error($(327));Ns();var e=iu(t,0);if(!(e&1))return Bt(t,Be()),null;var n=xu(t,e);if(t.tag!==0&&n===2){var r=Af(t);r!==0&&(e=r,n=rp(t,r))}if(n===1)throw n=Wa,Mi(t,0),Ir(t,e),Bt(t,Be()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ii(t,Ot,qn),Bt(t,Be()),null}function Pm(t,e){var n=me;me|=1;try{return t(e)}finally{me=n,me===0&&(qs=Be()+500,sh&&li())}}function Bi(t){Rr!==null&&Rr.tag===0&&!(me&6)&&Ns();var e=me;me|=1;var n=sn.transition,r=Ee;try{if(sn.transition=null,Ee=1,t)return t()}finally{Ee=r,sn.transition=n,me=e,!(me&6)&&li()}}function Rm(){qt=Is.current,Re(Is)}function Mi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,QC(n)),qe!==null)for(n=qe.return;n!==null;){var r=n;switch(hm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&cu();break;case 3:Ws(),Re(Ut),Re(Tt),wm();break;case 5:vm(r);break;case 4:Ws();break;case 13:Re(Me);break;case 19:Re(Me);break;case 10:mm(r.type._context);break;case 22:case 23:Rm()}n=n.return}if(nt=t,qe=t=Hr(t.current,null),at=qt=e,Ye=0,Wa=null,Cm=ch=zi=0,Ot=ga=null,Ri!==null){for(e=0;e<Ri.length;e++)if(n=Ri[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ri=null}return t}function Zx(t,e){do{var n=qe;try{if(pm(),Mc.current=_u,yu){for(var r=Oe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}yu=!1}if(Ui=0,tt=Ge=Oe=null,pa=!1,za=0,km.current=null,n===null||n.return===null){Ye=1,Wa=e,qe=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=at,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=K_(o);if(g!==null){g.flags&=-257,G_(g,o,a,s,e),g.mode&1&&q_(s,c,e),e=g,l=c;var _=e.updateQueue;if(_===null){var v=new Set;v.add(l),e.updateQueue=v}else _.add(l);break e}else{if(!(e&1)){q_(s,c,e),Nm();break e}l=Error($(426))}}else if(Ne&&a.mode&1){var T=K_(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),G_(T,o,a,s,e),dm(Hs(l,a));break e}}s=l=Hs(l,a),Ye!==4&&(Ye=2),ga===null?ga=[s]:ga.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=Lx(s,l,e);U_(s,w);break e;case 1:a=l;var x=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&($r===null||!$r.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var R=Vx(s,a,e);U_(s,R);break e}}s=s.return}while(s!==null)}nT(n)}catch(N){e=N,qe===n&&n!==null&&(qe=n=n.return);continue}break}while(!0)}function eT(){var t=vu.current;return vu.current=_u,t===null?_u:t}function Nm(){(Ye===0||Ye===3||Ye===2)&&(Ye=4),nt===null||!(zi&268435455)&&!(ch&268435455)||Ir(nt,at)}function xu(t,e){var n=me;me|=2;var r=eT();(nt!==t||at!==e)&&(qn=null,Mi(t,e));do try{wA();break}catch(i){Zx(t,i)}while(!0);if(pm(),me=n,vu.current=r,qe!==null)throw Error($(261));return nt=null,at=0,Ye}function wA(){for(;qe!==null;)tT(qe)}function EA(){for(;qe!==null&&!qk();)tT(qe)}function tT(t){var e=iT(t.alternate,t,qt);t.memoizedProps=t.pendingProps,e===null?nT(t):qe=e,km.current=null}function nT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=pA(n,e),n!==null){n.flags&=32767,qe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ye=6,qe=null;return}}else if(n=fA(n,e,qt),n!==null){qe=n;return}if(e=e.sibling,e!==null){qe=e;return}qe=e=t}while(e!==null);Ye===0&&(Ye=5)}function Ii(t,e,n){var r=Ee,i=sn.transition;try{sn.transition=null,Ee=1,xA(t,e,n,r)}finally{sn.transition=i,Ee=r}return null}function xA(t,e,n,r){do Ns();while(Rr!==null);if(me&6)throw Error($(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(nC(t,s),t===nt&&(qe=nt=null,at=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ac||(ac=!0,sT(ru,function(){return Ns(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=sn.transition,sn.transition=null;var o=Ee;Ee=1;var a=me;me|=4,km.current=null,gA(t,n),Yx(n,t),BC(Of),su=!!Mf,Of=Mf=null,t.current=n,yA(n),Kk(),me=a,Ee=o,sn.transition=s}else t.current=n;if(ac&&(ac=!1,Rr=t,Eu=i),s=t.pendingLanes,s===0&&($r=null),Yk(n.stateNode),Bt(t,Be()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(wu)throw wu=!1,t=tp,tp=null,t;return Eu&1&&t.tag!==0&&Ns(),s=t.pendingLanes,s&1?t===np?ya++:(ya=0,np=t):ya=0,li(),null}function Ns(){if(Rr!==null){var t=LE(Eu),e=sn.transition,n=Ee;try{if(sn.transition=null,Ee=16>t?16:t,Rr===null)var r=!1;else{if(t=Rr,Rr=null,Eu=0,me&6)throw Error($(331));var i=me;for(me|=4,K=t.current;K!==null;){var s=K,o=s.child;if(K.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(K=c;K!==null;){var h=K;switch(h.tag){case 0:case 11:case 15:ma(8,h,s)}var d=h.child;if(d!==null)d.return=h,K=d;else for(;K!==null;){h=K;var f=h.sibling,g=h.return;if(Kx(h),h===c){K=null;break}if(f!==null){f.return=g,K=f;break}K=g}}}var _=s.alternate;if(_!==null){var v=_.child;if(v!==null){_.child=null;do{var T=v.sibling;v.sibling=null,v=T}while(v!==null)}}K=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,K=o;else e:for(;K!==null;){if(s=K,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ma(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,K=w;break e}K=s.return}}var x=t.current;for(K=x;K!==null;){o=K;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,K=b;else e:for(o=x;K!==null;){if(a=K,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:lh(9,a)}}catch(N){Fe(a,a.return,N)}if(a===o){K=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,K=R;break e}K=a.return}}if(me=i,li(),Dn&&typeof Dn.onPostCommitFiberRoot=="function")try{Dn.onPostCommitFiberRoot(eh,t)}catch{}r=!0}return r}finally{Ee=n,sn.transition=e}}return!1}function av(t,e,n){e=Hs(n,e),e=Lx(t,e,1),t=Br(t,e,1),e=Pt(),t!==null&&(dl(t,1,e),Bt(t,e))}function Fe(t,e,n){if(t.tag===3)av(t,t,n);else for(;e!==null;){if(e.tag===3){av(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&($r===null||!$r.has(r))){t=Hs(n,t),t=Vx(e,t,1),e=Br(e,t,1),t=Pt(),e!==null&&(dl(e,1,t),Bt(e,t));break}}e=e.return}}function TA(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Pt(),t.pingedLanes|=t.suspendedLanes&n,nt===t&&(at&n)===n&&(Ye===4||Ye===3&&(at&130023424)===at&&500>Be()-Am?Mi(t,0):Cm|=n),Bt(t,e)}function rT(t,e){e===0&&(t.mode&1?(e=Xl,Xl<<=1,!(Xl&130023424)&&(Xl=4194304)):e=1);var n=Pt();t=or(t,e),t!==null&&(dl(t,e,n),Bt(t,n))}function SA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),rT(t,n)}function IA(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),rT(t,n)}var iT;iT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ut.current)jt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return jt=!1,dA(t,e,n);jt=!!(t.flags&131072)}else jt=!1,Ne&&e.flags&1048576&&lx(e,du,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Lc(t,e),t=e.pendingProps;var i=zs(e,Tt.current);Rs(e,n),i=xm(null,e,r,t,i,n);var s=Tm();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,zt(r)?(s=!0,uu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ym(e),i.updater=ah,e.stateNode=i,i._reactInternals=e,Wf(e,r,t,n),e=Kf(null,e,r,!0,s,n)):(e.tag=0,Ne&&s&&um(e),Ct(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Lc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=kA(r),t=pn(r,t),i){case 0:e=qf(null,e,r,t,n);break e;case 1:e=X_(null,e,r,t,n);break e;case 11:e=Q_(null,e,r,t,n);break e;case 14:e=Y_(null,e,r,pn(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:pn(r,i),qf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:pn(r,i),X_(t,e,r,i,n);case 3:e:{if(zx(e),t===null)throw Error($(387));r=e.pendingProps,s=e.memoizedState,i=s.element,px(t,e),mu(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Hs(Error($(423)),e),e=J_(t,e,r,n,i);break e}else if(r!==i){i=Hs(Error($(424)),e),e=J_(t,e,r,n,i);break e}else for(Kt=zr(e.stateNode.containerInfo.firstChild),Qt=e,Ne=!0,yn=null,n=dx(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Bs(),r===i){e=ar(t,e,n);break e}Ct(t,e,r,n)}e=e.child}return e;case 5:return mx(e),t===null&&zf(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Lf(r,i)?o=null:s!==null&&Lf(r,s)&&(e.flags|=32),Ux(t,e),Ct(t,e,o,n),e.child;case 6:return t===null&&zf(e),null;case 13:return Bx(t,e,n);case 4:return _m(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=$s(e,null,r,n):Ct(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:pn(r,i),Q_(t,e,r,i,n);case 7:return Ct(t,e,e.pendingProps,n),e.child;case 8:return Ct(t,e,e.pendingProps.children,n),e.child;case 12:return Ct(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ie(fu,r._currentValue),r._currentValue=o,s!==null)if(En(s.value,o)){if(s.children===i.children&&!Ut.current){e=ar(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=tr(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Bf(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error($(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Bf(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ct(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Rs(e,n),i=ln(i),r=r(i),e.flags|=1,Ct(t,e,r,n),e.child;case 14:return r=e.type,i=pn(r,e.pendingProps),i=pn(r.type,i),Y_(t,e,r,i,n);case 15:return jx(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:pn(r,i),Lc(t,e),e.tag=1,zt(r)?(t=!0,uu(e)):t=!1,Rs(e,n),Ox(e,r,i),Wf(e,r,i,n),Kf(null,e,r,!0,t,n);case 19:return $x(t,e,n);case 22:return Fx(t,e,n)}throw Error($(156,e.tag))};function sT(t,e){return NE(t,e)}function bA(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nn(t,e,n,r){return new bA(t,e,n,r)}function Dm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function kA(t){if(typeof t=="function")return Dm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Jp)return 11;if(t===Zp)return 14}return 2}function Hr(t,e){var n=t.alternate;return n===null?(n=nn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Fc(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Dm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ms:return Oi(n.children,i,s,e);case Xp:o=8,i|=8;break;case pf:return t=nn(12,n,e,i|2),t.elementType=pf,t.lanes=s,t;case mf:return t=nn(13,n,e,i),t.elementType=mf,t.lanes=s,t;case gf:return t=nn(19,n,e,i),t.elementType=gf,t.lanes=s,t;case mE:return uh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case fE:o=10;break e;case pE:o=9;break e;case Jp:o=11;break e;case Zp:o=14;break e;case xr:o=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=nn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Oi(t,e,n,r){return t=nn(7,t,r,e),t.lanes=n,t}function uh(t,e,n,r){return t=nn(22,t,r,e),t.elementType=mE,t.lanes=n,t.stateNode={isHidden:!1},t}function Fd(t,e,n){return t=nn(6,t,null,e),t.lanes=n,t}function Ud(t,e,n){return e=nn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function CA(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wd(0),this.expirationTimes=wd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Mm(t,e,n,r,i,s,o,a,l){return t=new CA(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=nn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ym(s),t}function AA(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ps,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function oT(t){if(!t)return ti;t=t._reactInternals;e:{if(Ji(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(zt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(zt(n))return ox(t,n,e)}return e}function aT(t,e,n,r,i,s,o,a,l){return t=Mm(n,r,!0,t,i,s,o,a,l),t.context=oT(null),n=t.current,r=Pt(),i=Wr(n),s=tr(r,i),s.callback=e??null,Br(n,s,i),t.current.lanes=i,dl(t,i,r),Bt(t,r),t}function hh(t,e,n,r){var i=e.current,s=Pt(),o=Wr(i);return n=oT(n),e.context===null?e.context=n:e.pendingContext=n,e=tr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Br(i,e,o),t!==null&&(vn(t,i,o,s),Dc(t,i,o)),o}function Tu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function lv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Om(t,e){lv(t,e),(t=t.alternate)&&lv(t,e)}function PA(){return null}var lT=typeof reportError=="function"?reportError:function(t){console.error(t)};function Lm(t){this._internalRoot=t}dh.prototype.render=Lm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));hh(t,e,null,null)};dh.prototype.unmount=Lm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Bi(function(){hh(null,t,null,null)}),e[sr]=null}};function dh(t){this._internalRoot=t}dh.prototype.unstable_scheduleHydration=function(t){if(t){var e=FE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Sr.length&&e!==0&&e<Sr[n].priority;n++);Sr.splice(n,0,t),n===0&&zE(t)}};function Vm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function fh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function cv(){}function RA(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Tu(o);s.call(c)}}var o=aT(e,r,t,0,null,!1,!1,"",cv);return t._reactRootContainer=o,t[sr]=o.current,La(t.nodeType===8?t.parentNode:t),Bi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Tu(l);a.call(c)}}var l=Mm(t,0,!1,null,null,!1,!1,"",cv);return t._reactRootContainer=l,t[sr]=l.current,La(t.nodeType===8?t.parentNode:t),Bi(function(){hh(e,l,n,r)}),l}function ph(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Tu(o);a.call(l)}}hh(e,o,t,i)}else o=RA(n,e,t,i,r);return Tu(o)}VE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Qo(e.pendingLanes);n!==0&&(nm(e,n|1),Bt(e,Be()),!(me&6)&&(qs=Be()+500,li()))}break;case 13:Bi(function(){var r=or(t,1);if(r!==null){var i=Pt();vn(r,t,1,i)}}),Om(t,1)}};rm=function(t){if(t.tag===13){var e=or(t,134217728);if(e!==null){var n=Pt();vn(e,t,134217728,n)}Om(t,134217728)}};jE=function(t){if(t.tag===13){var e=Wr(t),n=or(t,e);if(n!==null){var r=Pt();vn(n,t,e,r)}Om(t,e)}};FE=function(){return Ee};UE=function(t,e){var n=Ee;try{return Ee=t,e()}finally{Ee=n}};bf=function(t,e,n){switch(e){case"input":if(vf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ih(r);if(!i)throw Error($(90));yE(r),vf(r,i)}}}break;case"textarea":vE(t,n);break;case"select":e=n.value,e!=null&&ks(t,!!n.multiple,e,!1)}};bE=Pm;kE=Bi;var NA={usingClientEntryPoint:!1,Events:[pl,vs,ih,SE,IE,Pm]},jo={findFiberByHostInstance:Pi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},DA={bundleType:jo.bundleType,version:jo.version,rendererPackageName:jo.rendererPackageName,rendererConfig:jo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=PE(t),t===null?null:t.stateNode},findFiberByHostInstance:jo.findFiberByHostInstance||PA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lc.isDisabled&&lc.supportsFiber)try{eh=lc.inject(DA),Dn=lc}catch{}}Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NA;Xt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vm(e))throw Error($(200));return AA(t,e,null,n)};Xt.createRoot=function(t,e){if(!Vm(t))throw Error($(299));var n=!1,r="",i=lT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Mm(t,1,!1,null,null,n,!1,r,i),t[sr]=e.current,La(t.nodeType===8?t.parentNode:t),new Lm(e)};Xt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=PE(e),t=t===null?null:t.stateNode,t};Xt.flushSync=function(t){return Bi(t)};Xt.hydrate=function(t,e,n){if(!fh(e))throw Error($(200));return ph(null,t,e,!0,n)};Xt.hydrateRoot=function(t,e,n){if(!Vm(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=lT;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=aT(e,null,t,1,n??null,i,!1,s,o),t[sr]=e.current,La(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new dh(e)};Xt.render=function(t,e,n){if(!fh(e))throw Error($(200));return ph(null,t,e,!1,n)};Xt.unmountComponentAtNode=function(t){if(!fh(t))throw Error($(40));return t._reactRootContainer?(Bi(function(){ph(null,null,t,!1,function(){t._reactRootContainer=null,t[sr]=null})}),!0):!1};Xt.unstable_batchedUpdates=Pm;Xt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!fh(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return ph(t,e,n,!1,r)};Xt.version="18.3.1-next-f1338f8080-20240426";function cT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cT)}catch(t){console.error(t)}}cT(),cE.exports=Xt;var MA=cE.exports,uv=MA;df.createRoot=uv.createRoot,df.hydrateRoot=uv.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ha(){return Ha=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ha.apply(this,arguments)}var Nr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Nr||(Nr={}));const hv="popstate";function OA(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return sp("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Su(i)}return VA(e,n,null,t)}function We(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function jm(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function LA(){return Math.random().toString(36).substr(2,8)}function dv(t,e){return{usr:t.state,key:t.key,idx:e}}function sp(t,e,n,r){return n===void 0&&(n=null),Ha({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?lo(e):e,{state:n,key:e&&e.key||r||LA()})}function Su(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function lo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function VA(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Nr.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(Ha({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=Nr.Pop;let T=h(),w=T==null?null:T-c;c=T,l&&l({action:a,location:v.location,delta:w})}function f(T,w){a=Nr.Push;let x=sp(v.location,T,w);c=h()+1;let b=dv(x,c),R=v.createHref(x);try{o.pushState(b,"",R)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;i.location.assign(R)}s&&l&&l({action:a,location:v.location,delta:1})}function g(T,w){a=Nr.Replace;let x=sp(v.location,T,w);c=h();let b=dv(x,c),R=v.createHref(x);o.replaceState(b,"",R),s&&l&&l({action:a,location:v.location,delta:0})}function _(T){let w=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof T=="string"?T:Su(T);return x=x.replace(/ $/,"%20"),We(w,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,w)}let v={get action(){return a},get location(){return t(i,o)},listen(T){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(hv,d),l=T,()=>{i.removeEventListener(hv,d),l=null}},createHref(T){return e(i,T)},createURL:_,encodeLocation(T){let w=_(T);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:f,replace:g,go(T){return o.go(T)}};return v}var fv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(fv||(fv={}));function jA(t,e,n){return n===void 0&&(n="/"),FA(t,e,n)}function FA(t,e,n,r){let i=typeof e=="string"?lo(e):e,s=Fm(i.pathname||"/",n);if(s==null)return null;let o=uT(t);UA(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=JA(s);a=QA(o[l],c)}return a}function uT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(We(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=qr([r,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(We(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),uT(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:KA(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of hT(s.path))i(s,o,l)}),e}function hT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=hT(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function UA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:GA(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const zA=/^:[\w-]+$/,BA=3,$A=2,WA=1,HA=10,qA=-2,pv=t=>t==="*";function KA(t,e){let n=t.split("/"),r=n.length;return n.some(pv)&&(r+=qA),e&&(r+=$A),n.filter(i=>!pv(i)).reduce((i,s)=>i+(zA.test(s)?BA:s===""?WA:HA),r)}function GA(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function QA(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=YA({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),f=l.route;if(!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:qr([s,d.pathname]),pathnameBase:rP(qr([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=qr([s,d.pathnameBase]))}return o}function YA(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=XA(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,d)=>{let{paramName:f,isOptional:g}=h;if(f==="*"){let v=a[d]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const _=a[d];return g&&!_?c[f]=void 0:c[f]=(_||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function XA(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),jm(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function JA(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return jm(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Fm(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const ZA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,eP=t=>ZA.test(t);function tP(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?lo(t):t,s;if(n)if(eP(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),jm(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=mv(n.substring(1),"/"):s=mv(n,e)}else s=e;return{pathname:s,search:iP(r),hash:sP(i)}}function mv(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function zd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function nP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Um(t,e){let n=nP(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function zm(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=lo(t):(i=Ha({},t),We(!i.pathname||!i.pathname.includes("?"),zd("?","pathname","search",i)),We(!i.pathname||!i.pathname.includes("#"),zd("#","pathname","hash",i)),We(!i.search||!i.search.includes("#"),zd("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=tP(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const qr=t=>t.join("/").replace(/\/\/+/g,"/"),rP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),iP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,sP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function oP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const dT=["post","put","patch","delete"];new Set(dT);const aP=["get",...dT];new Set(aP);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qa(){return qa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qa.apply(this,arguments)}const Bm=O.createContext(null),lP=O.createContext(null),ci=O.createContext(null),mh=O.createContext(null),ui=O.createContext({outlet:null,matches:[],isDataRoute:!1}),fT=O.createContext(null);function cP(t,e){let{relative:n}=e===void 0?{}:e;co()||We(!1);let{basename:r,navigator:i}=O.useContext(ci),{hash:s,pathname:o,search:a}=mT(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:qr([r,o])),i.createHref({pathname:l,search:a,hash:s})}function co(){return O.useContext(mh)!=null}function Zi(){return co()||We(!1),O.useContext(mh).location}function pT(t){O.useContext(ci).static||O.useLayoutEffect(t)}function Wt(){let{isDataRoute:t}=O.useContext(ui);return t?xP():uP()}function uP(){co()||We(!1);let t=O.useContext(Bm),{basename:e,future:n,navigator:r}=O.useContext(ci),{matches:i}=O.useContext(ui),{pathname:s}=Zi(),o=JSON.stringify(Um(i,n.v7_relativeSplatPath)),a=O.useRef(!1);return pT(()=>{a.current=!0}),O.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=zm(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:qr([e,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[e,r,o,s,t])}function mT(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=O.useContext(ci),{matches:i}=O.useContext(ui),{pathname:s}=Zi(),o=JSON.stringify(Um(i,r.v7_relativeSplatPath));return O.useMemo(()=>zm(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function hP(t,e){return dP(t,e)}function dP(t,e,n,r){co()||We(!1);let{navigator:i}=O.useContext(ci),{matches:s}=O.useContext(ui),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Zi(),h;if(e){var d;let T=typeof e=="string"?lo(e):e;l==="/"||(d=T.pathname)!=null&&d.startsWith(l)||We(!1),h=T}else h=c;let f=h.pathname||"/",g=f;if(l!=="/"){let T=l.replace(/^\//,"").split("/");g="/"+f.replace(/^\//,"").split("/").slice(T.length).join("/")}let _=jA(t,{pathname:g}),v=yP(_&&_.map(T=>Object.assign({},T,{params:Object.assign({},a,T.params),pathname:qr([l,i.encodeLocation?i.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?l:qr([l,i.encodeLocation?i.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),s,n,r);return e&&v?O.createElement(mh.Provider,{value:{location:qa({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Nr.Pop}},v):v}function fP(){let t=EP(),e=oP(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:i},n):null,null)}const pP=O.createElement(fP,null);class mP extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(ui.Provider,{value:this.props.routeContext},O.createElement(fT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function gP(t){let{routeContext:e,match:n,children:r}=t,i=O.useContext(Bm);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(ui.Provider,{value:e},r)}function yP(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||We(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:f,errors:g}=n,_=d.route.loader&&f[d.route.id]===void 0&&(!g||g[d.route.id]===void 0);if(d.route.lazy||_){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,f)=>{let g,_=!1,v=null,T=null;n&&(g=a&&d.route.id?a[d.route.id]:void 0,v=d.route.errorElement||pP,l&&(c<0&&f===0?(TP("route-fallback"),_=!0,T=null):c===f&&(_=!0,T=d.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,f+1)),x=()=>{let b;return g?b=v:_?b=T:d.route.Component?b=O.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=h,O.createElement(gP,{match:d,routeContext:{outlet:h,matches:w,isDataRoute:n!=null},children:b})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?O.createElement(mP,{location:n.location,revalidation:n.revalidation,component:v,error:g,children:x(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):x()},null)}var gT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(gT||{}),yT=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(yT||{});function _P(t){let e=O.useContext(Bm);return e||We(!1),e}function vP(t){let e=O.useContext(lP);return e||We(!1),e}function wP(t){let e=O.useContext(ui);return e||We(!1),e}function _T(t){let e=wP(),n=e.matches[e.matches.length-1];return n.route.id||We(!1),n.route.id}function EP(){var t;let e=O.useContext(fT),n=vP(),r=_T();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function xP(){let{router:t}=_P(gT.UseNavigateStable),e=_T(yT.UseNavigateStable),n=O.useRef(!1);return pT(()=>{n.current=!0}),O.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,qa({fromRouteId:e},s)))},[t,e])}const gv={};function TP(t,e,n){gv[t]||(gv[t]=!0)}function SP(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Ai(t){let{to:e,replace:n,state:r,relative:i}=t;co()||We(!1);let{future:s,static:o}=O.useContext(ci),{matches:a}=O.useContext(ui),{pathname:l}=Zi(),c=Wt(),h=zm(e,Um(a,s.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(h);return O.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:i}),[c,d,i,n,r]),null}function Mt(t){We(!1)}function IP(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Nr.Pop,navigator:s,static:o=!1,future:a}=t;co()&&We(!1);let l=e.replace(/^\/*/,"/"),c=O.useMemo(()=>({basename:l,navigator:s,static:o,future:qa({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=lo(r));let{pathname:h="/",search:d="",hash:f="",state:g=null,key:_="default"}=r,v=O.useMemo(()=>{let T=Fm(h,l);return T==null?null:{location:{pathname:T,search:d,hash:f,state:g,key:_},navigationType:i}},[l,h,d,f,g,_,i]);return v==null?null:O.createElement(ci.Provider,{value:c},O.createElement(mh.Provider,{children:n,value:v}))}function bP(t){let{children:e,location:n}=t;return hP(op(e),n)}new Promise(()=>{});function op(t,e){e===void 0&&(e=[]);let n=[];return O.Children.forEach(t,(r,i)=>{if(!O.isValidElement(r))return;let s=[...e,i];if(r.type===O.Fragment){n.push.apply(n,op(r.props.children,s));return}r.type!==Mt&&We(!1),!r.props.index||!r.props.children||We(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=op(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ap(){return ap=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ap.apply(this,arguments)}function kP(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function CP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function AP(t,e){return t.button===0&&(!e||e==="_self")&&!CP(t)}const PP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],RP="6";try{window.__reactRouterVersion=RP}catch{}const NP="startTransition",yv=Tk[NP];function DP(t){let{basename:e,children:n,future:r,window:i}=t,s=O.useRef();s.current==null&&(s.current=OA({window:i,v5Compat:!0}));let o=s.current,[a,l]=O.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=O.useCallback(d=>{c&&yv?yv(()=>l(d)):l(d)},[l,c]);return O.useLayoutEffect(()=>o.listen(h),[o,h]),O.useEffect(()=>SP(r),[r]),O.createElement(IP,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const MP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",OP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Fo=O.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:d}=e,f=kP(e,PP),{basename:g}=O.useContext(ci),_,v=!1;if(typeof c=="string"&&OP.test(c)&&(_=c,MP))try{let b=new URL(window.location.href),R=c.startsWith("//")?new URL(b.protocol+c):new URL(c),N=Fm(R.pathname,g);R.origin===b.origin&&N!=null?c=N+R.search+R.hash:v=!0}catch{}let T=cP(c,{relative:i}),w=LP(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,viewTransition:d});function x(b){r&&r(b),b.defaultPrevented||w(b)}return O.createElement("a",ap({},f,{href:_||T,onClick:v||s?r:x,ref:n,target:l}))});var _v;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(_v||(_v={}));var vv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(vv||(vv={}));function LP(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=Wt(),c=Zi(),h=mT(t,{relative:o});return O.useCallback(d=>{if(AP(d,n)){d.preventDefault();let f=r!==void 0?r:Su(c)===Su(h);l(t,{replace:f,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,h,r,i,n,t,s,o,a])}var wv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},VP=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},wT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(f=64)),r.push(n[h],n[d],n[f],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(vT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):VP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new jP;const f=s<<2|a>>4;if(r.push(f),c!==64){const g=a<<4&240|c>>2;if(r.push(g),d!==64){const _=c<<6&192|d;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class jP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const FP=function(t){const e=vT(t);return wT.encodeByteArray(e,!0)},Iu=function(t){return FP(t).replace(/\./g,"")},ET=function(t){try{return wT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP=()=>UP().__FIREBASE_DEFAULTS__,BP=()=>{if(typeof process>"u"||typeof wv>"u")return;const t=wv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},$P=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ET(t[1]);return e&&JSON.parse(e)},gh=()=>{try{return zP()||BP()||$P()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},xT=t=>{var e,n;return(n=(e=gh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},WP=t=>{const e=xT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},TT=()=>{var t;return(t=gh())===null||t===void 0?void 0:t.config},ST=t=>{var e;return(e=gh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Iu(JSON.stringify(n)),Iu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(St())}function GP(){var t;const e=(t=gh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function QP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function YP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function XP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function JP(){const t=St();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ZP(){return!GP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function eR(){try{return typeof indexedDB=="object"}catch{return!1}}function tR(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR="FirebaseError";class pr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=nR,Object.setPrototypeOf(this,pr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gl.prototype.create)}}class gl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?rR(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new pr(i,a,r)}}function rR(t,e){return t.replace(iR,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const iR=/\{\$([^}]+)}/g;function sR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function bu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Ev(s)&&Ev(o)){if(!bu(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Ev(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Xo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Jo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function oR(t,e){const n=new aR(t,e);return n.subscribe.bind(n)}class aR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");lR(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Bd),i.error===void 0&&(i.error=Bd),i.complete===void 0&&(i.complete=Bd);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Bd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ze(t){return t&&t._delegate?t._delegate:t}class $i{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new HP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hR(e))try{this.getOrInitializeService({instanceIdentifier:bi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=bi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=bi){return this.instances.has(e)}getOptions(e=bi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:uR(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=bi){return this.component?this.component.multipleInstances?e:bi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uR(t){return t===bi?void 0:t}function hR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new cR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(fe||(fe={}));const fR={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},pR=fe.INFO,mR={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},gR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=mR[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $m{constructor(e){this.name=e,this._logLevel=pR,this._logHandler=gR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...e),this._logHandler(this,fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...e),this._logHandler(this,fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...e),this._logHandler(this,fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...e),this._logHandler(this,fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...e),this._logHandler(this,fe.ERROR,...e)}}const yR=(t,e)=>e.some(n=>t instanceof n);let xv,Tv;function _R(){return xv||(xv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vR(){return Tv||(Tv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const IT=new WeakMap,lp=new WeakMap,bT=new WeakMap,$d=new WeakMap,Wm=new WeakMap;function wR(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Kr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&IT.set(n,t)}).catch(()=>{}),Wm.set(e,t),e}function ER(t){if(lp.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});lp.set(t,e)}let cp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return lp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||bT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Kr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function xR(t){cp=t(cp)}function TR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Wd(this),e,...n);return bT.set(r,e.sort?e.sort():[e]),Kr(r)}:vR().includes(t)?function(...e){return t.apply(Wd(this),e),Kr(IT.get(this))}:function(...e){return Kr(t.apply(Wd(this),e))}}function SR(t){return typeof t=="function"?TR(t):(t instanceof IDBTransaction&&ER(t),yR(t,_R())?new Proxy(t,cp):t)}function Kr(t){if(t instanceof IDBRequest)return wR(t);if($d.has(t))return $d.get(t);const e=SR(t);return e!==t&&($d.set(t,e),Wm.set(e,t)),e}const Wd=t=>Wm.get(t);function IR(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Kr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Kr(o.result),l.oldVersion,l.newVersion,Kr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const bR=["get","getKey","getAll","getAllKeys","count"],kR=["put","add","delete","clear"],Hd=new Map;function Sv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Hd.get(e))return Hd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=kR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||bR.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Hd.set(e,s),s}xR(t=>({...t,get:(e,n,r)=>Sv(e,n)||t.get(e,n,r),has:(e,n)=>!!Sv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(AR(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function AR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const up="@firebase/app",Iv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lr=new $m("@firebase/app"),PR="@firebase/app-compat",RR="@firebase/analytics-compat",NR="@firebase/analytics",DR="@firebase/app-check-compat",MR="@firebase/app-check",OR="@firebase/auth",LR="@firebase/auth-compat",VR="@firebase/database",jR="@firebase/data-connect",FR="@firebase/database-compat",UR="@firebase/functions",zR="@firebase/functions-compat",BR="@firebase/installations",$R="@firebase/installations-compat",WR="@firebase/messaging",HR="@firebase/messaging-compat",qR="@firebase/performance",KR="@firebase/performance-compat",GR="@firebase/remote-config",QR="@firebase/remote-config-compat",YR="@firebase/storage",XR="@firebase/storage-compat",JR="@firebase/firestore",ZR="@firebase/vertexai-preview",e1="@firebase/firestore-compat",t1="firebase",n1="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp="[DEFAULT]",r1={[up]:"fire-core",[PR]:"fire-core-compat",[NR]:"fire-analytics",[RR]:"fire-analytics-compat",[MR]:"fire-app-check",[DR]:"fire-app-check-compat",[OR]:"fire-auth",[LR]:"fire-auth-compat",[VR]:"fire-rtdb",[jR]:"fire-data-connect",[FR]:"fire-rtdb-compat",[UR]:"fire-fn",[zR]:"fire-fn-compat",[BR]:"fire-iid",[$R]:"fire-iid-compat",[WR]:"fire-fcm",[HR]:"fire-fcm-compat",[qR]:"fire-perf",[KR]:"fire-perf-compat",[GR]:"fire-rc",[QR]:"fire-rc-compat",[YR]:"fire-gcs",[XR]:"fire-gcs-compat",[JR]:"fire-fst",[e1]:"fire-fst-compat",[ZR]:"fire-vertex","fire-js":"fire-js",[t1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ku=new Map,i1=new Map,dp=new Map;function bv(t,e){try{t.container.addComponent(e)}catch(n){lr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ks(t){const e=t.name;if(dp.has(e))return lr.debug(`There were multiple attempts to register component ${e}.`),!1;dp.set(e,t);for(const n of ku.values())bv(n,t);for(const n of i1.values())bv(n,t);return!0}function Hm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Nn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gr=new gl("app","Firebase",s1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $i("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo=n1;function kT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:hp,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Gr.create("bad-app-name",{appName:String(i)});if(n||(n=TT()),!n)throw Gr.create("no-options");const s=ku.get(i);if(s){if(bu(n,s.options)&&bu(r,s.config))return s;throw Gr.create("duplicate-app",{appName:i})}const o=new dR(i);for(const l of dp.values())o.addComponent(l);const a=new o1(n,r,o);return ku.set(i,a),a}function CT(t=hp){const e=ku.get(t);if(!e&&t===hp&&TT())return kT();if(!e)throw Gr.create("no-app",{appName:t});return e}function Qr(t,e,n){var r;let i=(r=r1[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),lr.warn(a.join(" "));return}Ks(new $i(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1="firebase-heartbeat-database",l1=1,Ka="firebase-heartbeat-store";let qd=null;function AT(){return qd||(qd=IR(a1,l1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ka)}catch(n){console.warn(n)}}}}).catch(t=>{throw Gr.create("idb-open",{originalErrorMessage:t.message})})),qd}async function c1(t){try{const n=(await AT()).transaction(Ka),r=await n.objectStore(Ka).get(PT(t));return await n.done,r}catch(e){if(e instanceof pr)lr.warn(e.message);else{const n=Gr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});lr.warn(n.message)}}}async function kv(t,e){try{const r=(await AT()).transaction(Ka,"readwrite");await r.objectStore(Ka).put(e,PT(t)),await r.done}catch(n){if(n instanceof pr)lr.warn(n.message);else{const r=Gr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});lr.warn(r.message)}}}function PT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1=1024,h1=30*24*60*60*1e3;class d1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new p1(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Cv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=h1}),this._storage.overwrite(this._heartbeatsCache))}catch(r){lr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Cv(),{heartbeatsToSend:r,unsentEntries:i}=f1(this._heartbeatsCache.heartbeats),s=Iu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return lr.warn(n),""}}}function Cv(){return new Date().toISOString().substring(0,10)}function f1(t,e=u1){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Av(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Av(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class p1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return eR()?tR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await c1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return kv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return kv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Av(t){return Iu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(t){Ks(new $i("platform-logger",e=>new CR(e),"PRIVATE")),Ks(new $i("heartbeat",e=>new d1(e),"PRIVATE")),Qr(up,Iv,t),Qr(up,Iv,"esm2017"),Qr("fire-js","")}m1("");function qm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function RT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const g1=RT,NT=new gl("auth","Firebase",RT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cu=new $m("@firebase/auth");function y1(t,...e){Cu.logLevel<=fe.WARN&&Cu.warn(`Auth (${uo}): ${t}`,...e)}function Uc(t,...e){Cu.logLevel<=fe.ERROR&&Cu.error(`Auth (${uo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(t,...e){throw Km(t,...e)}function On(t,...e){return Km(t,...e)}function DT(t,e,n){const r=Object.assign(Object.assign({},g1()),{[e]:n});return new gl("auth","Firebase",r).create(e,{appName:t.name})}function nr(t){return DT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Km(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return NT.create(t,...e)}function te(t,e,...n){if(!t)throw Km(e,...n)}function Xn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Uc(e),new Error(e)}function cr(t,e){t||Xn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function _1(){return Pv()==="http:"||Pv()==="https:"}function Pv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_1()||YP()||"connection"in navigator)?navigator.onLine:!0}function w1(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,n){this.shortDelay=e,this.longDelay=n,cr(n>e,"Short delay should be less than long delay!"),this.isMobile=KP()||XP()}get(){return v1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(t,e){cr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1=new _l(3e4,6e4);function hi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function di(t,e,n,r,i={}){return OT(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=yl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return QP()||(c.referrerPolicy="no-referrer"),MT.fetch()(LT(t,t.config.apiHost,n,a),c)})}async function OT(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},E1),e);try{const i=new S1(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw cc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw cc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw cc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw cc(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw DT(t,h,c);xn(t,h)}}catch(i){if(i instanceof pr)throw i;xn(t,"network-request-failed",{message:String(i)})}}async function vl(t,e,n,r,i={}){const s=await di(t,e,n,r,i);return"mfaPendingCredential"in s&&xn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function LT(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Gm(t.config,i):`${t.config.apiScheme}://${i}`}function T1(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class S1{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(On(this.auth,"network-request-failed")),x1.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function cc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=On(t,e,r);return i.customData._tokenResponse=n,i}function Rv(t){return t!==void 0&&t.enterprise!==void 0}class I1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return T1(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function b1(t,e){return di(t,"GET","/v2/recaptchaConfig",hi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k1(t,e){return di(t,"POST","/v1/accounts:delete",e)}async function VT(t,e){return di(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _a(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function C1(t,e=!1){const n=Ze(t),r=await n.getIdToken(e),i=Qm(r);te(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:_a(Kd(i.auth_time)),issuedAtTime:_a(Kd(i.iat)),expirationTime:_a(Kd(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Kd(t){return Number(t)*1e3}function Qm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Uc("JWT malformed, contained fewer than 3 sections"),null;try{const i=ET(n);return i?JSON.parse(i):(Uc("Failed to decode base64 JWT payload"),null)}catch(i){return Uc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Nv(t){const e=Qm(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ga(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof pr&&A1(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function A1({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=_a(this.lastLoginAt),this.creationTime=_a(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Au(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Ga(t,VT(n,{idToken:r}));te(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?jT(s.providerUserInfo):[],a=N1(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new pp(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function R1(t){const e=Ze(t);await Au(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function N1(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function jT(t){return t.map(e=>{var{providerId:n}=e,r=qm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D1(t,e){const n=await OT(t,{},async()=>{const r=yl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=LT(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",MT.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function M1(t,e){return di(t,"POST","/v2/accounts:revokeToken",hi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Nv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){te(e.length!==0,"internal-error");const n=Nv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await D1(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Ds;return r&&(te(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(te(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(te(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ds,this.toJSON())}_performRefresh(){return Xn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Jn{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=qm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new P1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new pp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ga(this,this.stsTokenManager.getToken(this.auth,e));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return C1(this,e)}reload(){return R1(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Jn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Au(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Nn(this.auth.app))return Promise.reject(nr(this.auth));const e=await this.getIdToken();return await Ga(this,k1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,h;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,_=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,T=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,w=(c=n.createdAt)!==null&&c!==void 0?c:void 0,x=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:b,emailVerified:R,isAnonymous:N,providerData:M,stsTokenManager:S}=n;te(b&&S,e,"internal-error");const E=Ds.fromJSON(this.name,S);te(typeof b=="string",e,"internal-error"),wr(d,e.name),wr(f,e.name),te(typeof R=="boolean",e,"internal-error"),te(typeof N=="boolean",e,"internal-error"),wr(g,e.name),wr(_,e.name),wr(v,e.name),wr(T,e.name),wr(w,e.name),wr(x,e.name);const C=new Jn({uid:b,auth:e,email:f,emailVerified:R,displayName:d,isAnonymous:N,photoURL:_,phoneNumber:g,tenantId:v,stsTokenManager:E,createdAt:w,lastLoginAt:x});return M&&Array.isArray(M)&&(C.providerData=M.map(I=>Object.assign({},I))),T&&(C._redirectEventId=T),C}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ds;i.updateFromServerResponse(n);const s=new Jn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Au(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];te(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?jT(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Ds;a.updateFromIdToken(r);const l=new Jn({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new pp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv=new Map;function Zn(t){cr(t instanceof Function,"Expected a class definition");let e=Dv.get(t);return e?(cr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Dv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}FT.type="NONE";const Mv=FT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(t,e,n){return`firebase:${t}:${e}:${n}`}class Ms{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=zc(this.userKey,i.apiKey,s),this.fullPersistenceKey=zc("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Jn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ms(Zn(Mv),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Zn(Mv);const o=zc(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const d=Jn._fromJSON(e,h);c!==s&&(a=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ms(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Ms(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ov(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($T(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(UT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(HT(e))return"Blackberry";if(qT(e))return"Webos";if(zT(e))return"Safari";if((e.includes("chrome/")||BT(e))&&!e.includes("edge/"))return"Chrome";if(WT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function UT(t=St()){return/firefox\//i.test(t)}function zT(t=St()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function BT(t=St()){return/crios\//i.test(t)}function $T(t=St()){return/iemobile/i.test(t)}function WT(t=St()){return/android/i.test(t)}function HT(t=St()){return/blackberry/i.test(t)}function qT(t=St()){return/webos/i.test(t)}function Ym(t=St()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function O1(t=St()){var e;return Ym(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function L1(){return JP()&&document.documentMode===10}function KT(t=St()){return Ym(t)||WT(t)||qT(t)||HT(t)||/windows phone/i.test(t)||$T(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(t,e=[]){let n;switch(t){case"Browser":n=Ov(St());break;case"Worker":n=`${Ov(St())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${uo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j1(t,e={}){return di(t,"GET","/v2/passwordPolicy",hi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1=6;class U1{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:F1,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Lv(this),this.idTokenSubscription=new Lv(this),this.beforeStateQueue=new V1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=NT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Zn(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ms.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await VT(this,{idToken:e}),r=await Jn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Nn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Au(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=w1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Nn(this.app))return Promise.reject(nr(this));const n=e?Ze(e):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Nn(this.app)?Promise.reject(nr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Nn(this.app)?Promise.reject(nr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await j1(this),n=new U1(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new gl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await M1(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Zn(e)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await Ms.create(this,[Zn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=GT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&y1(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function es(t){return Ze(t)}class Lv{constructor(e){this.auth=e,this.observer=null,this.addObserver=oR(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function B1(t){yh=t}function QT(t){return yh.loadJS(t)}function $1(){return yh.recaptchaEnterpriseScript}function W1(){return yh.gapiScript}function H1(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const q1="recaptcha-enterprise",K1="NO_RECAPTCHA";class G1{constructor(e){this.type=q1,this.auth=es(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{b1(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new I1(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;Rv(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(K1)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&Rv(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=$1();l.length!==0&&(l+=a),QT(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Vv(t,e,n,r=!1){const i=new G1(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function mp(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Vv(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Vv(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(t,e){const n=Hm(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(bu(s,e??{}))return i;xn(i,"already-initialized")}return n.initialize({options:e})}function Y1(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Zn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function X1(t,e,n){const r=es(t);te(r._canInitEmulator,r,"emulator-config-failed"),te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=YT(e),{host:o,port:a}=J1(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),Z1()}function YT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function J1(t){const e=YT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:jv(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:jv(o)}}}function jv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Z1(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Xn("not implemented")}_getIdTokenResponse(e){return Xn("not implemented")}_linkToIdToken(e,n){return Xn("not implemented")}_getReauthenticationResolver(e){return Xn("not implemented")}}async function eN(t,e){return di(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tN(t,e){return vl(t,"POST","/v1/accounts:signInWithPassword",hi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nN(t,e){return vl(t,"POST","/v1/accounts:signInWithEmailLink",hi(t,e))}async function rN(t,e){return vl(t,"POST","/v1/accounts:signInWithEmailLink",hi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa extends Xm{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Qa(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Qa(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return mp(e,n,"signInWithPassword",tN);case"emailLink":return nN(e,{email:this._email,oobCode:this._password});default:xn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return mp(e,r,"signUpPassword",eN);case"emailLink":return rN(e,{idToken:n,email:this._email,oobCode:this._password});default:xn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Os(t,e){return vl(t,"POST","/v1/accounts:signInWithIdp",hi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN="http://localhost";class Wi extends Xm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Wi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):xn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=qm(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Wi(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Os(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Os(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Os(e,n)}buildRequest(){const e={requestUri:iN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=yl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function oN(t){const e=Xo(Jo(t)).link,n=e?Xo(Jo(e)).deep_link_id:null,r=Xo(Jo(t)).deep_link_id;return(r?Xo(Jo(r)).link:null)||r||n||e||t}class Jm{constructor(e){var n,r,i,s,o,a;const l=Xo(Jo(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,d=sN((i=l.mode)!==null&&i!==void 0?i:null);te(c&&h&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=oN(e);try{return new Jm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(){this.providerId=ho.PROVIDER_ID}static credential(e,n){return Qa._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Jm.parseLink(n);return te(r,"argument-error"),Qa._fromEmailAndCode(e,r.code,r.tenantId)}}ho.PROVIDER_ID="password";ho.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ho.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl extends XT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends wl{constructor(){super("facebook.com")}static credential(e){return Wi._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return br.credential(e.oauthAccessToken)}catch{return null}}}br.FACEBOOK_SIGN_IN_METHOD="facebook.com";br.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr extends wl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Wi._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return kr.credentialFromTaggedObject(e)}static credentialFromError(e){return kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return kr.credential(n,r)}catch{return null}}}kr.GOOGLE_SIGN_IN_METHOD="google.com";kr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr extends wl{constructor(){super("github.com")}static credential(e){return Wi._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cr.credentialFromTaggedObject(e)}static credentialFromError(e){return Cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cr.credential(e.oauthAccessToken)}catch{return null}}}Cr.GITHUB_SIGN_IN_METHOD="github.com";Cr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar extends wl{constructor(){super("twitter.com")}static credential(e,n){return Wi._fromParams({providerId:Ar.PROVIDER_ID,signInMethod:Ar.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ar.credentialFromTaggedObject(e)}static credentialFromError(e){return Ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ar.credential(n,r)}catch{return null}}}Ar.TWITTER_SIGN_IN_METHOD="twitter.com";Ar.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aN(t,e){return vl(t,"POST","/v1/accounts:signUp",hi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Jn._fromIdTokenResponse(e,r,i),o=Fv(r);return new Hi({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Fv(r);return new Hi({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Fv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu extends pr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Pu.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Pu(e,n,r,i)}}function JT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Pu._fromErrorAndOperation(t,s,e,r):s})}async function lN(t,e,n=!1){const r=await Ga(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Hi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cN(t,e,n=!1){const{auth:r}=t;if(Nn(r.app))return Promise.reject(nr(r));const i="reauthenticate";try{const s=await Ga(t,JT(r,i,e,t),n);te(s.idToken,r,"internal-error");const o=Qm(s.idToken);te(o,r,"internal-error");const{sub:a}=o;return te(t.uid===a,r,"user-mismatch"),Hi._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&xn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZT(t,e,n=!1){if(Nn(t.app))return Promise.reject(nr(t));const r="signIn",i=await JT(t,r,e),s=await Hi._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function uN(t,e){return ZT(es(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eS(t){const e=es(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function hN(t,e,n){if(Nn(t.app))return Promise.reject(nr(t));const r=es(t),o=await mp(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",aN).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&eS(t),l}),a=await Hi._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function dN(t,e,n){return Nn(t.app)?Promise.reject(nr(t)):uN(Ze(t),ho.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&eS(t),r})}function fN(t,e,n,r){return Ze(t).onIdTokenChanged(e,n,r)}function pN(t,e,n){return Ze(t).beforeAuthStateChanged(e,n)}function mN(t,e,n,r){return Ze(t).onAuthStateChanged(e,n,r)}function gN(t){return Ze(t).signOut()}const Ru="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ru,"1"),this.storage.removeItem(Ru),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN=1e3,_N=10;class nS extends tS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=KT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);L1()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,_N):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},yN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}nS.type="LOCAL";const vN=nS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS extends tS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}rS.type="SESSION";const iS=rS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new _h(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await wN(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_h.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Zm("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(){return window}function xN(t){Ln().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(){return typeof Ln().WorkerGlobalScope<"u"&&typeof Ln().importScripts=="function"}async function TN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function SN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function IN(){return sS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS="firebaseLocalStorageDb",bN=1,Nu="firebaseLocalStorage",aS="fbase_key";class El{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function vh(t,e){return t.transaction([Nu],e?"readwrite":"readonly").objectStore(Nu)}function kN(){const t=indexedDB.deleteDatabase(oS);return new El(t).toPromise()}function gp(){const t=indexedDB.open(oS,bN);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Nu,{keyPath:aS})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Nu)?e(r):(r.close(),await kN(),e(await gp()))})})}async function Uv(t,e,n){const r=vh(t,!0).put({[aS]:e,value:n});return new El(r).toPromise()}async function CN(t,e){const n=vh(t,!1).get(e),r=await new El(n).toPromise();return r===void 0?null:r.value}function zv(t,e){const n=vh(t,!0).delete(e);return new El(n).toPromise()}const AN=800,PN=3;class lS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>PN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_h._getInstance(IN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await TN(),!this.activeServiceWorker)return;this.sender=new EN(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||SN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await gp();return await Uv(e,Ru,"1"),await zv(e,Ru),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Uv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>CN(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>zv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=vh(i,!1).getAll();return new El(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),AN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}lS.type="LOCAL";const RN=lS;new _l(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(t,e){return e?Zn(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg extends Xm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Os(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Os(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Os(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function DN(t){return ZT(t.auth,new eg(t),t.bypassAuthState)}function MN(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),cN(n,new eg(t),t.bypassAuthState)}async function ON(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),lN(n,new eg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return DN;case"linkViaPopup":case"linkViaRedirect":return ON;case"reauthViaPopup":case"reauthViaRedirect":return MN;default:xn(this.auth,"internal-error")}}resolve(e){cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN=new _l(2e3,1e4);class bs extends cS{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,bs.currentPopupAction&&bs.currentPopupAction.cancel(),bs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){cr(this.filter.length===1,"Popup operations only handle one event");const e=Zm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(On(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(On(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(On(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,LN.get())};e()}}bs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN="pendingRedirect",Bc=new Map;class jN extends cS{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Bc.get(this.auth._key());if(!e){try{const r=await FN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Bc.set(this.auth._key(),e)}return this.bypassAuthState||Bc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function FN(t,e){const n=BN(e),r=zN(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function UN(t,e){Bc.set(t._key(),e)}function zN(t){return Zn(t._redirectPersistence)}function BN(t){return zc(VN,t.config.apiKey,t.name)}async function $N(t,e,n=!1){if(Nn(t.app))return Promise.reject(nr(t));const r=es(t),i=NN(r,e),o=await new jN(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=10*60*1e3;class HN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!uS(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(On(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=WN&&this.cachedEventUids.clear(),this.cachedEventUids.has(Bv(e))}saveEventToCache(e){this.cachedEventUids.add(Bv(e)),this.lastProcessedEventTime=Date.now()}}function Bv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function uS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function qN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return uS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KN(t,e={}){return di(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,QN=/^https?/;async function YN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await KN(t);for(const n of e)try{if(XN(n))return}catch{}xn(t,"unauthorized-domain")}function XN(t){const e=fp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!QN.test(n))return!1;if(GN.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN=new _l(3e4,6e4);function $v(){const t=Ln().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function ZN(t){return new Promise((e,n)=>{var r,i,s;function o(){$v(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{$v(),n(On(t,"network-request-failed"))},timeout:JN.get()})}if(!((i=(r=Ln().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Ln().gapi)===null||s===void 0)&&s.load)o();else{const a=H1("iframefcb");return Ln()[a]=()=>{gapi.load?o():n(On(t,"network-request-failed"))},QT(`${W1()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw $c=null,e})}let $c=null;function eD(t){return $c=$c||ZN(t),$c}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=new _l(5e3,15e3),nD="__/auth/iframe",rD="emulator/auth/iframe",iD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function oD(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Gm(e,rD):`https://${t.config.authDomain}/${nD}`,r={apiKey:e.apiKey,appName:t.name,v:uo},i=sD.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${yl(r).slice(1)}`}async function aD(t){const e=await eD(t),n=Ln().gapi;return te(n,t,"internal-error"),e.open({where:document.body,url:oD(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:iD,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=On(t,"network-request-failed"),a=Ln().setTimeout(()=>{s(o)},tD.get());function l(){Ln().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cD=500,uD=600,hD="_blank",dD="http://localhost";class Wv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function fD(t,e,n,r=cD,i=uD){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},lD),{width:r.toString(),height:i.toString(),top:s,left:o}),c=St().toLowerCase();n&&(a=BT(c)?hD:n),UT(c)&&(e=e||dD,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[g,_])=>`${f}${g}=${_},`,"");if(O1(c)&&a!=="_self")return pD(e||"",a),new Wv(null);const d=window.open(e||"",a,h);te(d,t,"popup-blocked");try{d.focus()}catch{}return new Wv(d)}function pD(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD="__/auth/handler",gD="emulator/auth/handler",yD=encodeURIComponent("fac");async function Hv(t,e,n,r,i,s){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:uo,eventId:i};if(e instanceof XT){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",sR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof wl){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${yD}=${encodeURIComponent(l)}`:"";return`${_D(t)}?${yl(a).slice(1)}${c}`}function _D({config:t}){return t.emulator?Gm(t,gD):`https://${t.authDomain}/${mD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd="webStorageSupport";class vD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=iS,this._completeRedirectFn=$N,this._overrideRedirectResult=UN}async _openPopup(e,n,r,i){var s;cr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Hv(e,n,r,fp(),i);return fD(e,o,Zm())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Hv(e,n,r,fp(),i);return xN(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(cr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await aD(e),r=new HN(e);return n.register("authEvent",i=>(te(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Gd,{type:Gd},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Gd];o!==void 0&&n(!!o),xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=YN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return KT()||zT()||Ym()}}const wD=vD;var qv="@firebase/auth",Kv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function TD(t){Ks(new $i("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;te(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:GT(t)},c=new z1(r,i,s,l);return Y1(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ks(new $i("auth-internal",e=>{const n=es(e.getProvider("auth").getImmediate());return(r=>new ED(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qr(qv,Kv,xD(t)),Qr(qv,Kv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SD=5*60,ID=ST("authIdTokenMaxAge")||SD;let Gv=null;const bD=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>ID)return;const i=n==null?void 0:n.token;Gv!==i&&(Gv=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function kD(t=CT()){const e=Hm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Q1(t,{popupRedirectResolver:wD,persistence:[RN,vN,iS]}),r=ST("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=bD(s.toString());pN(n,o,()=>o(n.currentUser)),fN(n,a=>o(a))}}const i=xT("auth");return i&&X1(n,`http://${i}`),n}function CD(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}B1({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=On("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",CD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});TD("Browser");var AD="firebase",PD="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qr(AD,PD,"app");var Qv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Li,hS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,E){function C(){}C.prototype=E.prototype,S.D=E.prototype,S.prototype=new C,S.prototype.constructor=S,S.C=function(I,P,D){for(var A=Array(arguments.length-2),Y=2;Y<arguments.length;Y++)A[Y-2]=arguments[Y];return E.prototype[P].apply(I,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,E,C){C||(C=0);var I=Array(16);if(typeof E=="string")for(var P=0;16>P;++P)I[P]=E.charCodeAt(C++)|E.charCodeAt(C++)<<8|E.charCodeAt(C++)<<16|E.charCodeAt(C++)<<24;else for(P=0;16>P;++P)I[P]=E[C++]|E[C++]<<8|E[C++]<<16|E[C++]<<24;E=S.g[0],C=S.g[1],P=S.g[2];var D=S.g[3],A=E+(D^C&(P^D))+I[0]+3614090360&4294967295;E=C+(A<<7&4294967295|A>>>25),A=D+(P^E&(C^P))+I[1]+3905402710&4294967295,D=E+(A<<12&4294967295|A>>>20),A=P+(C^D&(E^C))+I[2]+606105819&4294967295,P=D+(A<<17&4294967295|A>>>15),A=C+(E^P&(D^E))+I[3]+3250441966&4294967295,C=P+(A<<22&4294967295|A>>>10),A=E+(D^C&(P^D))+I[4]+4118548399&4294967295,E=C+(A<<7&4294967295|A>>>25),A=D+(P^E&(C^P))+I[5]+1200080426&4294967295,D=E+(A<<12&4294967295|A>>>20),A=P+(C^D&(E^C))+I[6]+2821735955&4294967295,P=D+(A<<17&4294967295|A>>>15),A=C+(E^P&(D^E))+I[7]+4249261313&4294967295,C=P+(A<<22&4294967295|A>>>10),A=E+(D^C&(P^D))+I[8]+1770035416&4294967295,E=C+(A<<7&4294967295|A>>>25),A=D+(P^E&(C^P))+I[9]+2336552879&4294967295,D=E+(A<<12&4294967295|A>>>20),A=P+(C^D&(E^C))+I[10]+4294925233&4294967295,P=D+(A<<17&4294967295|A>>>15),A=C+(E^P&(D^E))+I[11]+2304563134&4294967295,C=P+(A<<22&4294967295|A>>>10),A=E+(D^C&(P^D))+I[12]+1804603682&4294967295,E=C+(A<<7&4294967295|A>>>25),A=D+(P^E&(C^P))+I[13]+4254626195&4294967295,D=E+(A<<12&4294967295|A>>>20),A=P+(C^D&(E^C))+I[14]+2792965006&4294967295,P=D+(A<<17&4294967295|A>>>15),A=C+(E^P&(D^E))+I[15]+1236535329&4294967295,C=P+(A<<22&4294967295|A>>>10),A=E+(P^D&(C^P))+I[1]+4129170786&4294967295,E=C+(A<<5&4294967295|A>>>27),A=D+(C^P&(E^C))+I[6]+3225465664&4294967295,D=E+(A<<9&4294967295|A>>>23),A=P+(E^C&(D^E))+I[11]+643717713&4294967295,P=D+(A<<14&4294967295|A>>>18),A=C+(D^E&(P^D))+I[0]+3921069994&4294967295,C=P+(A<<20&4294967295|A>>>12),A=E+(P^D&(C^P))+I[5]+3593408605&4294967295,E=C+(A<<5&4294967295|A>>>27),A=D+(C^P&(E^C))+I[10]+38016083&4294967295,D=E+(A<<9&4294967295|A>>>23),A=P+(E^C&(D^E))+I[15]+3634488961&4294967295,P=D+(A<<14&4294967295|A>>>18),A=C+(D^E&(P^D))+I[4]+3889429448&4294967295,C=P+(A<<20&4294967295|A>>>12),A=E+(P^D&(C^P))+I[9]+568446438&4294967295,E=C+(A<<5&4294967295|A>>>27),A=D+(C^P&(E^C))+I[14]+3275163606&4294967295,D=E+(A<<9&4294967295|A>>>23),A=P+(E^C&(D^E))+I[3]+4107603335&4294967295,P=D+(A<<14&4294967295|A>>>18),A=C+(D^E&(P^D))+I[8]+1163531501&4294967295,C=P+(A<<20&4294967295|A>>>12),A=E+(P^D&(C^P))+I[13]+2850285829&4294967295,E=C+(A<<5&4294967295|A>>>27),A=D+(C^P&(E^C))+I[2]+4243563512&4294967295,D=E+(A<<9&4294967295|A>>>23),A=P+(E^C&(D^E))+I[7]+1735328473&4294967295,P=D+(A<<14&4294967295|A>>>18),A=C+(D^E&(P^D))+I[12]+2368359562&4294967295,C=P+(A<<20&4294967295|A>>>12),A=E+(C^P^D)+I[5]+4294588738&4294967295,E=C+(A<<4&4294967295|A>>>28),A=D+(E^C^P)+I[8]+2272392833&4294967295,D=E+(A<<11&4294967295|A>>>21),A=P+(D^E^C)+I[11]+1839030562&4294967295,P=D+(A<<16&4294967295|A>>>16),A=C+(P^D^E)+I[14]+4259657740&4294967295,C=P+(A<<23&4294967295|A>>>9),A=E+(C^P^D)+I[1]+2763975236&4294967295,E=C+(A<<4&4294967295|A>>>28),A=D+(E^C^P)+I[4]+1272893353&4294967295,D=E+(A<<11&4294967295|A>>>21),A=P+(D^E^C)+I[7]+4139469664&4294967295,P=D+(A<<16&4294967295|A>>>16),A=C+(P^D^E)+I[10]+3200236656&4294967295,C=P+(A<<23&4294967295|A>>>9),A=E+(C^P^D)+I[13]+681279174&4294967295,E=C+(A<<4&4294967295|A>>>28),A=D+(E^C^P)+I[0]+3936430074&4294967295,D=E+(A<<11&4294967295|A>>>21),A=P+(D^E^C)+I[3]+3572445317&4294967295,P=D+(A<<16&4294967295|A>>>16),A=C+(P^D^E)+I[6]+76029189&4294967295,C=P+(A<<23&4294967295|A>>>9),A=E+(C^P^D)+I[9]+3654602809&4294967295,E=C+(A<<4&4294967295|A>>>28),A=D+(E^C^P)+I[12]+3873151461&4294967295,D=E+(A<<11&4294967295|A>>>21),A=P+(D^E^C)+I[15]+530742520&4294967295,P=D+(A<<16&4294967295|A>>>16),A=C+(P^D^E)+I[2]+3299628645&4294967295,C=P+(A<<23&4294967295|A>>>9),A=E+(P^(C|~D))+I[0]+4096336452&4294967295,E=C+(A<<6&4294967295|A>>>26),A=D+(C^(E|~P))+I[7]+1126891415&4294967295,D=E+(A<<10&4294967295|A>>>22),A=P+(E^(D|~C))+I[14]+2878612391&4294967295,P=D+(A<<15&4294967295|A>>>17),A=C+(D^(P|~E))+I[5]+4237533241&4294967295,C=P+(A<<21&4294967295|A>>>11),A=E+(P^(C|~D))+I[12]+1700485571&4294967295,E=C+(A<<6&4294967295|A>>>26),A=D+(C^(E|~P))+I[3]+2399980690&4294967295,D=E+(A<<10&4294967295|A>>>22),A=P+(E^(D|~C))+I[10]+4293915773&4294967295,P=D+(A<<15&4294967295|A>>>17),A=C+(D^(P|~E))+I[1]+2240044497&4294967295,C=P+(A<<21&4294967295|A>>>11),A=E+(P^(C|~D))+I[8]+1873313359&4294967295,E=C+(A<<6&4294967295|A>>>26),A=D+(C^(E|~P))+I[15]+4264355552&4294967295,D=E+(A<<10&4294967295|A>>>22),A=P+(E^(D|~C))+I[6]+2734768916&4294967295,P=D+(A<<15&4294967295|A>>>17),A=C+(D^(P|~E))+I[13]+1309151649&4294967295,C=P+(A<<21&4294967295|A>>>11),A=E+(P^(C|~D))+I[4]+4149444226&4294967295,E=C+(A<<6&4294967295|A>>>26),A=D+(C^(E|~P))+I[11]+3174756917&4294967295,D=E+(A<<10&4294967295|A>>>22),A=P+(E^(D|~C))+I[2]+718787259&4294967295,P=D+(A<<15&4294967295|A>>>17),A=C+(D^(P|~E))+I[9]+3951481745&4294967295,S.g[0]=S.g[0]+E&4294967295,S.g[1]=S.g[1]+(P+(A<<21&4294967295|A>>>11))&4294967295,S.g[2]=S.g[2]+P&4294967295,S.g[3]=S.g[3]+D&4294967295}r.prototype.u=function(S,E){E===void 0&&(E=S.length);for(var C=E-this.blockSize,I=this.B,P=this.h,D=0;D<E;){if(P==0)for(;D<=C;)i(this,S,D),D+=this.blockSize;if(typeof S=="string"){for(;D<E;)if(I[P++]=S.charCodeAt(D++),P==this.blockSize){i(this,I),P=0;break}}else for(;D<E;)if(I[P++]=S[D++],P==this.blockSize){i(this,I),P=0;break}}this.h=P,this.o+=E},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var E=1;E<S.length-8;++E)S[E]=0;var C=8*this.o;for(E=S.length-8;E<S.length;++E)S[E]=C&255,C/=256;for(this.u(S),S=Array(16),E=C=0;4>E;++E)for(var I=0;32>I;I+=8)S[C++]=this.g[E]>>>I&255;return S};function s(S,E){var C=a;return Object.prototype.hasOwnProperty.call(C,S)?C[S]:C[S]=E(S)}function o(S,E){this.h=E;for(var C=[],I=!0,P=S.length-1;0<=P;P--){var D=S[P]|0;I&&D==E||(C[P]=D,I=!1)}this.g=C}var a={};function l(S){return-128<=S&&128>S?s(S,function(E){return new o([E|0],0>E?-1:0)}):new o([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return d;if(0>S)return T(c(-S));for(var E=[],C=1,I=0;S>=C;I++)E[I]=S/C|0,C*=4294967296;return new o(E,0)}function h(S,E){if(S.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(S.charAt(0)=="-")return T(h(S.substring(1),E));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=c(Math.pow(E,8)),I=d,P=0;P<S.length;P+=8){var D=Math.min(8,S.length-P),A=parseInt(S.substring(P,P+D),E);8>D?(D=c(Math.pow(E,D)),I=I.j(D).add(c(A))):(I=I.j(C),I=I.add(c(A)))}return I}var d=l(0),f=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(v(this))return-T(this).m();for(var S=0,E=1,C=0;C<this.g.length;C++){var I=this.i(C);S+=(0<=I?I:4294967296+I)*E,E*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(_(this))return"0";if(v(this))return"-"+T(this).toString(S);for(var E=c(Math.pow(S,6)),C=this,I="";;){var P=R(C,E).g;C=w(C,P.j(E));var D=((0<C.g.length?C.g[0]:C.h)>>>0).toString(S);if(C=P,_(C))return D+I;for(;6>D.length;)D="0"+D;I=D+I}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function _(S){if(S.h!=0)return!1;for(var E=0;E<S.g.length;E++)if(S.g[E]!=0)return!1;return!0}function v(S){return S.h==-1}t.l=function(S){return S=w(this,S),v(S)?-1:_(S)?0:1};function T(S){for(var E=S.g.length,C=[],I=0;I<E;I++)C[I]=~S.g[I];return new o(C,~S.h).add(f)}t.abs=function(){return v(this)?T(this):this},t.add=function(S){for(var E=Math.max(this.g.length,S.g.length),C=[],I=0,P=0;P<=E;P++){var D=I+(this.i(P)&65535)+(S.i(P)&65535),A=(D>>>16)+(this.i(P)>>>16)+(S.i(P)>>>16);I=A>>>16,D&=65535,A&=65535,C[P]=A<<16|D}return new o(C,C[C.length-1]&-2147483648?-1:0)};function w(S,E){return S.add(T(E))}t.j=function(S){if(_(this)||_(S))return d;if(v(this))return v(S)?T(this).j(T(S)):T(T(this).j(S));if(v(S))return T(this.j(T(S)));if(0>this.l(g)&&0>S.l(g))return c(this.m()*S.m());for(var E=this.g.length+S.g.length,C=[],I=0;I<2*E;I++)C[I]=0;for(I=0;I<this.g.length;I++)for(var P=0;P<S.g.length;P++){var D=this.i(I)>>>16,A=this.i(I)&65535,Y=S.i(P)>>>16,j=S.i(P)&65535;C[2*I+2*P]+=A*j,x(C,2*I+2*P),C[2*I+2*P+1]+=D*j,x(C,2*I+2*P+1),C[2*I+2*P+1]+=A*Y,x(C,2*I+2*P+1),C[2*I+2*P+2]+=D*Y,x(C,2*I+2*P+2)}for(I=0;I<E;I++)C[I]=C[2*I+1]<<16|C[2*I];for(I=E;I<2*E;I++)C[I]=0;return new o(C,0)};function x(S,E){for(;(S[E]&65535)!=S[E];)S[E+1]+=S[E]>>>16,S[E]&=65535,E++}function b(S,E){this.g=S,this.h=E}function R(S,E){if(_(E))throw Error("division by zero");if(_(S))return new b(d,d);if(v(S))return E=R(T(S),E),new b(T(E.g),T(E.h));if(v(E))return E=R(S,T(E)),new b(T(E.g),E.h);if(30<S.g.length){if(v(S)||v(E))throw Error("slowDivide_ only works with positive integers.");for(var C=f,I=E;0>=I.l(S);)C=N(C),I=N(I);var P=M(C,1),D=M(I,1);for(I=M(I,2),C=M(C,2);!_(I);){var A=D.add(I);0>=A.l(S)&&(P=P.add(C),D=A),I=M(I,1),C=M(C,1)}return E=w(S,P.j(E)),new b(P,E)}for(P=d;0<=S.l(E);){for(C=Math.max(1,Math.floor(S.m()/E.m())),I=Math.ceil(Math.log(C)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),D=c(C),A=D.j(E);v(A)||0<A.l(S);)C-=I,D=c(C),A=D.j(E);_(D)&&(D=f),P=P.add(D),S=w(S,A)}return new b(P,S)}t.A=function(S){return R(this,S).h},t.and=function(S){for(var E=Math.max(this.g.length,S.g.length),C=[],I=0;I<E;I++)C[I]=this.i(I)&S.i(I);return new o(C,this.h&S.h)},t.or=function(S){for(var E=Math.max(this.g.length,S.g.length),C=[],I=0;I<E;I++)C[I]=this.i(I)|S.i(I);return new o(C,this.h|S.h)},t.xor=function(S){for(var E=Math.max(this.g.length,S.g.length),C=[],I=0;I<E;I++)C[I]=this.i(I)^S.i(I);return new o(C,this.h^S.h)};function N(S){for(var E=S.g.length+1,C=[],I=0;I<E;I++)C[I]=S.i(I)<<1|S.i(I-1)>>>31;return new o(C,S.h)}function M(S,E){var C=E>>5;E%=32;for(var I=S.g.length-C,P=[],D=0;D<I;D++)P[D]=0<E?S.i(D+C)>>>E|S.i(D+C+1)<<32-E:S.i(D+C);return new o(P,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,hS=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Li=o}).apply(typeof Qv<"u"?Qv:typeof self<"u"?self:typeof window<"u"?window:{});var uc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var dS,Zo,fS,Wc,yp,pS,mS,gS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,y){return u==Array.prototype||u==Object.prototype||(u[m]=y.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof uc=="object"&&uc];for(var m=0;m<u.length;++m){var y=u[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=n(this);function i(u,m){if(m)e:{var y=r;u=u.split(".");for(var k=0;k<u.length-1;k++){var L=u[k];if(!(L in y))break e;y=y[L]}u=u[u.length-1],k=y[u],m=m(k),m!=k&&m!=null&&e(y,u,{configurable:!0,writable:!0,value:m})}}function s(u,m){u instanceof String&&(u+="");var y=0,k=!1,L={next:function(){if(!k&&y<u.length){var V=y++;return{value:m(V,u[V]),done:!1}}return k=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(u){return u||function(){return s(this,function(m,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function c(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function h(u,m,y){return u.call.apply(u.bind,arguments)}function d(u,m,y){if(!u)throw Error();if(2<arguments.length){var k=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,k),u.apply(m,L)}}return function(){return u.apply(m,arguments)}}function f(u,m,y){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,f.apply(null,arguments)}function g(u,m){var y=Array.prototype.slice.call(arguments,1);return function(){var k=y.slice();return k.push.apply(k,arguments),u.apply(this,k)}}function _(u,m){function y(){}y.prototype=m.prototype,u.aa=m.prototype,u.prototype=new y,u.prototype.constructor=u,u.Qb=function(k,L,V){for(var W=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)W[Te-2]=arguments[Te];return m.prototype[L].apply(k,W)}}function v(u){const m=u.length;if(0<m){const y=Array(m);for(let k=0;k<m;k++)y[k]=u[k];return y}return[]}function T(u,m){for(let y=1;y<arguments.length;y++){const k=arguments[y];if(l(k)){const L=u.length||0,V=k.length||0;u.length=L+V;for(let W=0;W<V;W++)u[L+W]=k[W]}else u.push(k)}}class w{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function x(u){return/^[\s\xa0]*$/.test(u)}function b(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function R(u){return R[" "](u),u}R[" "]=function(){};var N=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function M(u,m,y){for(const k in u)m.call(y,u[k],k,u)}function S(u,m){for(const y in u)m.call(void 0,u[y],y,u)}function E(u){const m={};for(const y in u)m[y]=u[y];return m}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(u,m){let y,k;for(let L=1;L<arguments.length;L++){k=arguments[L];for(y in k)u[y]=k[y];for(let V=0;V<C.length;V++)y=C[V],Object.prototype.hasOwnProperty.call(k,y)&&(u[y]=k[y])}}function P(u){var m=1;u=u.split(":");const y=[];for(;0<m&&u.length;)y.push(u.shift()),m--;return u.length&&y.push(u.join(":")),y}function D(u){a.setTimeout(()=>{throw u},0)}function A(){var u=H;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Y{constructor(){this.h=this.g=null}add(m,y){const k=j.get();k.set(m,y),this.h?this.h.next=k:this.g=k,this.h=k}}var j=new w(()=>new Q,u=>u.reset());class Q{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let X,z=!1,H=new Y,Z=()=>{const u=a.Promise.resolve(void 0);X=()=>{u.then(ce)}};var ce=()=>{for(var u;u=A();){try{u.h.call(u.g)}catch(y){D(y)}var m=j;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}z=!1};function ie(){this.s=this.s,this.C=this.C}ie.prototype.s=!1,ie.prototype.ma=function(){this.s||(this.s=!0,this.N())},ie.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function B(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}B.prototype.h=function(){this.defaultPrevented=!0};var se=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};a.addEventListener("test",y,m),a.removeEventListener("test",y,m)}catch{}return u}();function oe(u,m){if(B.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var y=this.type=u.type,k=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(N){e:{try{R(m.nodeName);var L=!0;break e}catch{}L=!1}L||(m=null)}}else y=="mouseover"?m=u.fromElement:y=="mouseout"&&(m=u.toElement);this.relatedTarget=m,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ne[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&oe.aa.h.call(this)}}_(oe,B);var ne={2:"touch",3:"pen",4:"mouse"};oe.prototype.h=function(){oe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var De="closure_listenable_"+(1e6*Math.random()|0),In=0;function pi(u,m,y,k,L){this.listener=u,this.proxy=null,this.src=m,this.type=y,this.capture=!!k,this.ha=L,this.key=++In,this.da=this.fa=!1}function mi(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function gi(u){this.src=u,this.g={},this.h=0}gi.prototype.add=function(u,m,y,k,L){var V=u.toString();u=this.g[V],u||(u=this.g[V]=[],this.h++);var W=Kh(u,m,k,L);return-1<W?(m=u[W],y||(m.fa=!1)):(m=new pi(m,this.src,V,!!k,L),m.fa=y,u.push(m)),m};function qh(u,m){var y=m.type;if(y in u.g){var k=u.g[y],L=Array.prototype.indexOf.call(k,m,void 0),V;(V=0<=L)&&Array.prototype.splice.call(k,L,1),V&&(mi(m),u.g[y].length==0&&(delete u.g[y],u.h--))}}function Kh(u,m,y,k){for(var L=0;L<u.length;++L){var V=u[L];if(!V.da&&V.listener==m&&V.capture==!!y&&V.ha==k)return L}return-1}var Gh="closure_lm_"+(1e6*Math.random()|0),Qh={};function ry(u,m,y,k,L){if(Array.isArray(m)){for(var V=0;V<m.length;V++)ry(u,m[V],y,k,L);return null}return y=oy(y),u&&u[De]?u.K(m,y,c(k)?!!k.capture:!1,L):Ab(u,m,y,!1,k,L)}function Ab(u,m,y,k,L,V){if(!m)throw Error("Invalid event type");var W=c(L)?!!L.capture:!!L,Te=Xh(u);if(Te||(u[Gh]=Te=new gi(u)),y=Te.add(m,y,k,W,V),y.proxy)return y;if(k=Pb(),y.proxy=k,k.src=u,k.listener=y,u.addEventListener)se||(L=W),L===void 0&&(L=!1),u.addEventListener(m.toString(),k,L);else if(u.attachEvent)u.attachEvent(sy(m.toString()),k);else if(u.addListener&&u.removeListener)u.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Pb(){function u(y){return m.call(u.src,u.listener,y)}const m=Rb;return u}function iy(u,m,y,k,L){if(Array.isArray(m))for(var V=0;V<m.length;V++)iy(u,m[V],y,k,L);else k=c(k)?!!k.capture:!!k,y=oy(y),u&&u[De]?(u=u.i,m=String(m).toString(),m in u.g&&(V=u.g[m],y=Kh(V,y,k,L),-1<y&&(mi(V[y]),Array.prototype.splice.call(V,y,1),V.length==0&&(delete u.g[m],u.h--)))):u&&(u=Xh(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Kh(m,y,k,L)),(y=-1<u?m[u]:null)&&Yh(y))}function Yh(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[De])qh(m.i,u);else{var y=u.type,k=u.proxy;m.removeEventListener?m.removeEventListener(y,k,u.capture):m.detachEvent?m.detachEvent(sy(y),k):m.addListener&&m.removeListener&&m.removeListener(k),(y=Xh(m))?(qh(y,u),y.h==0&&(y.src=null,m[Gh]=null)):mi(u)}}}function sy(u){return u in Qh?Qh[u]:Qh[u]="on"+u}function Rb(u,m){if(u.da)u=!0;else{m=new oe(m,this);var y=u.listener,k=u.ha||u.src;u.fa&&Yh(u),u=y.call(k,m)}return u}function Xh(u){return u=u[Gh],u instanceof gi?u:null}var Jh="__closure_events_fn_"+(1e9*Math.random()>>>0);function oy(u){return typeof u=="function"?u:(u[Jh]||(u[Jh]=function(m){return u.handleEvent(m)}),u[Jh])}function ht(){ie.call(this),this.i=new gi(this),this.M=this,this.F=null}_(ht,ie),ht.prototype[De]=!0,ht.prototype.removeEventListener=function(u,m,y,k){iy(this,u,m,y,k)};function bt(u,m){var y,k=u.F;if(k)for(y=[];k;k=k.F)y.push(k);if(u=u.M,k=m.type||m,typeof m=="string")m=new B(m,u);else if(m instanceof B)m.target=m.target||u;else{var L=m;m=new B(k,u),I(m,L)}if(L=!0,y)for(var V=y.length-1;0<=V;V--){var W=m.g=y[V];L=Pl(W,k,!0,m)&&L}if(W=m.g=u,L=Pl(W,k,!0,m)&&L,L=Pl(W,k,!1,m)&&L,y)for(V=0;V<y.length;V++)W=m.g=y[V],L=Pl(W,k,!1,m)&&L}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var y=u.g[m],k=0;k<y.length;k++)mi(y[k]);delete u.g[m],u.h--}}this.F=null},ht.prototype.K=function(u,m,y,k){return this.i.add(String(u),m,!1,y,k)},ht.prototype.L=function(u,m,y,k){return this.i.add(String(u),m,!0,y,k)};function Pl(u,m,y,k){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var L=!0,V=0;V<m.length;++V){var W=m[V];if(W&&!W.da&&W.capture==y){var Te=W.listener,rt=W.ha||W.src;W.fa&&qh(u.i,W),L=Te.call(rt,k)!==!1&&L}}return L&&!k.defaultPrevented}function ay(u,m,y){if(typeof u=="function")y&&(u=f(u,y));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:a.setTimeout(u,m||0)}function ly(u){u.g=ay(()=>{u.g=null,u.i&&(u.i=!1,ly(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Nb extends ie{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:ly(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _o(u){ie.call(this),this.h=u,this.g={}}_(_o,ie);var cy=[];function uy(u){M(u.g,function(m,y){this.g.hasOwnProperty(y)&&Yh(m)},u),u.g={}}_o.prototype.N=function(){_o.aa.N.call(this),uy(this)},_o.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zh=a.JSON.stringify,Db=a.JSON.parse,Mb=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function ed(){}ed.prototype.h=null;function hy(u){return u.h||(u.h=u.i())}function dy(){}var vo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function td(){B.call(this,"d")}_(td,B);function nd(){B.call(this,"c")}_(nd,B);var yi={},fy=null;function Rl(){return fy=fy||new ht}yi.La="serverreachability";function py(u){B.call(this,yi.La,u)}_(py,B);function wo(u){const m=Rl();bt(m,new py(m))}yi.STAT_EVENT="statevent";function my(u,m){B.call(this,yi.STAT_EVENT,u),this.stat=m}_(my,B);function kt(u){const m=Rl();bt(m,new my(m,u))}yi.Ma="timingevent";function gy(u,m){B.call(this,yi.Ma,u),this.size=m}_(gy,B);function Eo(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},m)}function xo(){this.g=!0}xo.prototype.xa=function(){this.g=!1};function Ob(u,m,y,k,L,V){u.info(function(){if(u.g)if(V)for(var W="",Te=V.split("&"),rt=0;rt<Te.length;rt++){var ye=Te[rt].split("=");if(1<ye.length){var dt=ye[0];ye=ye[1];var ft=dt.split("_");W=2<=ft.length&&ft[1]=="type"?W+(dt+"="+ye+"&"):W+(dt+"=redacted&")}}else W=null;else W=V;return"XMLHTTP REQ ("+k+") [attempt "+L+"]: "+m+`
`+y+`
`+W})}function Lb(u,m,y,k,L,V,W){u.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+L+"]: "+m+`
`+y+`
`+V+" "+W})}function is(u,m,y,k){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+jb(u,y)+(k?" "+k:"")})}function Vb(u,m){u.info(function(){return"TIMEOUT: "+m})}xo.prototype.info=function(){};function jb(u,m){if(!u.g)return m;if(!m)return null;try{var y=JSON.parse(m);if(y){for(u=0;u<y.length;u++)if(Array.isArray(y[u])){var k=y[u];if(!(2>k.length)){var L=k[1];if(Array.isArray(L)&&!(1>L.length)){var V=L[0];if(V!="noop"&&V!="stop"&&V!="close")for(var W=1;W<L.length;W++)L[W]=""}}}}return Zh(y)}catch{return m}}var Nl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},yy={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},rd;function Dl(){}_(Dl,ed),Dl.prototype.g=function(){return new XMLHttpRequest},Dl.prototype.i=function(){return{}},rd=new Dl;function gr(u,m,y,k){this.j=u,this.i=m,this.l=y,this.R=k||1,this.U=new _o(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _y}function _y(){this.i=null,this.g="",this.h=!1}var vy={},id={};function sd(u,m,y){u.L=1,u.v=Vl(zn(m)),u.m=y,u.P=!0,wy(u,null)}function wy(u,m){u.F=Date.now(),Ml(u),u.A=zn(u.v);var y=u.A,k=u.R;Array.isArray(k)||(k=[String(k)]),My(y.i,"t",k),u.C=0,y=u.j.J,u.h=new _y,u.g=Jy(u.j,y?m:null,!u.m),0<u.O&&(u.M=new Nb(f(u.Y,u,u.g),u.O)),m=u.U,y=u.g,k=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(cy[0]=L.toString()),L=cy);for(var V=0;V<L.length;V++){var W=ry(y,L[V],k||m.handleEvent,!1,m.h||m);if(!W)break;m.g[W.key]=W}m=u.H?E(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),wo(),Ob(u.i,u.u,u.A,u.l,u.R,u.m)}gr.prototype.ca=function(u){u=u.target;const m=this.M;m&&Bn(u)==3?m.j():this.Y(u)},gr.prototype.Y=function(u){try{if(u==this.g)e:{const ft=Bn(this.g);var m=this.g.Ba();const as=this.g.Z();if(!(3>ft)&&(ft!=3||this.g&&(this.h.h||this.g.oa()||zy(this.g)))){this.J||ft!=4||m==7||(m==8||0>=as?wo(3):wo(2)),od(this);var y=this.g.Z();this.X=y;t:if(Ey(this)){var k=zy(this.g);u="";var L=k.length,V=Bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_i(this),To(this);var W="";break t}this.h.i=new a.TextDecoder}for(m=0;m<L;m++)this.h.h=!0,u+=this.h.i.decode(k[m],{stream:!(V&&m==L-1)});k.length=0,this.h.g+=u,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=y==200,Lb(this.i,this.u,this.A,this.l,this.R,ft,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Te,rt=this.g;if((Te=rt.g?rt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(Te)){var ye=Te;break t}}ye=null}if(y=ye)is(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ad(this,y);else{this.o=!1,this.s=3,kt(12),_i(this),To(this);break e}}if(this.P){y=!0;let dn;for(;!this.J&&this.C<W.length;)if(dn=Fb(this,W),dn==id){ft==4&&(this.s=4,kt(14),y=!1),is(this.i,this.l,null,"[Incomplete Response]");break}else if(dn==vy){this.s=4,kt(15),is(this.i,this.l,W,"[Invalid Chunk]"),y=!1;break}else is(this.i,this.l,dn,null),ad(this,dn);if(Ey(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ft!=4||W.length!=0||this.h.h||(this.s=1,kt(16),y=!1),this.o=this.o&&y,!y)is(this.i,this.l,W,"[Invalid Chunked Response]"),_i(this),To(this);else if(0<W.length&&!this.W){this.W=!0;var dt=this.j;dt.g==this&&dt.ba&&!dt.M&&(dt.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),fd(dt),dt.M=!0,kt(11))}}else is(this.i,this.l,W,null),ad(this,W);ft==4&&_i(this),this.o&&!this.J&&(ft==4?Gy(this.j,this):(this.o=!1,Ml(this)))}else nk(this.g),y==400&&0<W.indexOf("Unknown SID")?(this.s=3,kt(12)):(this.s=0,kt(13)),_i(this),To(this)}}}catch{}finally{}};function Ey(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Fb(u,m){var y=u.C,k=m.indexOf(`
`,y);return k==-1?id:(y=Number(m.substring(y,k)),isNaN(y)?vy:(k+=1,k+y>m.length?id:(m=m.slice(k,k+y),u.C=k+y,m)))}gr.prototype.cancel=function(){this.J=!0,_i(this)};function Ml(u){u.S=Date.now()+u.I,xy(u,u.I)}function xy(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Eo(f(u.ba,u),m)}function od(u){u.B&&(a.clearTimeout(u.B),u.B=null)}gr.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Vb(this.i,this.A),this.L!=2&&(wo(),kt(17)),_i(this),this.s=2,To(this)):xy(this,this.S-u)};function To(u){u.j.G==0||u.J||Gy(u.j,u)}function _i(u){od(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,uy(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function ad(u,m){try{var y=u.j;if(y.G!=0&&(y.g==u||ld(y.h,u))){if(!u.K&&ld(y.h,u)&&y.G==3){try{var k=y.Da.g.parse(m)}catch{k=null}if(Array.isArray(k)&&k.length==3){var L=k;if(L[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<u.F)$l(y),zl(y);else break e;dd(y),kt(18)}}else y.za=L[1],0<y.za-y.T&&37500>L[2]&&y.F&&y.v==0&&!y.C&&(y.C=Eo(f(y.Za,y),6e3));if(1>=Iy(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else wi(y,11)}else if((u.K||y.g==u)&&$l(y),!x(m))for(L=y.Da.g.parse(m),m=0;m<L.length;m++){let ye=L[m];if(y.T=ye[0],ye=ye[1],y.G==2)if(ye[0]=="c"){y.K=ye[1],y.ia=ye[2];const dt=ye[3];dt!=null&&(y.la=dt,y.j.info("VER="+y.la));const ft=ye[4];ft!=null&&(y.Aa=ft,y.j.info("SVER="+y.Aa));const as=ye[5];as!=null&&typeof as=="number"&&0<as&&(k=1.5*as,y.L=k,y.j.info("backChannelRequestTimeoutMs_="+k)),k=y;const dn=u.g;if(dn){const Hl=dn.g?dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hl){var V=k.h;V.g||Hl.indexOf("spdy")==-1&&Hl.indexOf("quic")==-1&&Hl.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(cd(V,V.h),V.h=null))}if(k.D){const pd=dn.g?dn.g.getResponseHeader("X-HTTP-Session-Id"):null;pd&&(k.ya=pd,ke(k.I,k.D,pd))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-u.F,y.j.info("Handshake RTT: "+y.R+"ms")),k=y;var W=u;if(k.qa=Xy(k,k.J?k.ia:null,k.W),W.K){by(k.h,W);var Te=W,rt=k.L;rt&&(Te.I=rt),Te.B&&(od(Te),Ml(Te)),k.g=W}else qy(k);0<y.i.length&&Bl(y)}else ye[0]!="stop"&&ye[0]!="close"||wi(y,7);else y.G==3&&(ye[0]=="stop"||ye[0]=="close"?ye[0]=="stop"?wi(y,7):hd(y):ye[0]!="noop"&&y.l&&y.l.ta(ye),y.v=0)}}wo(4)}catch{}}var Ub=class{constructor(u,m){this.g=u,this.map=m}};function Ty(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Sy(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Iy(u){return u.h?1:u.g?u.g.size:0}function ld(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function cd(u,m){u.g?u.g.add(m):u.h=m}function by(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Ty.prototype.cancel=function(){if(this.i=ky(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function ky(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const y of u.g.values())m=m.concat(y.D);return m}return v(u.i)}function zb(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var m=[],y=u.length,k=0;k<y;k++)m.push(u[k]);return m}m=[],y=0;for(k in u)m[y++]=u[k];return m}function Bb(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var m=[];u=u.length;for(var y=0;y<u;y++)m.push(y);return m}m=[],y=0;for(const k in u)m[y++]=k;return m}}}function Cy(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var y=Bb(u),k=zb(u),L=k.length,V=0;V<L;V++)m.call(void 0,k[V],y&&y[V],u)}var Ay=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $b(u,m){if(u){u=u.split("&");for(var y=0;y<u.length;y++){var k=u[y].indexOf("="),L=null;if(0<=k){var V=u[y].substring(0,k);L=u[y].substring(k+1)}else V=u[y];m(V,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function vi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof vi){this.h=u.h,Ol(this,u.j),this.o=u.o,this.g=u.g,Ll(this,u.s),this.l=u.l;var m=u.i,y=new bo;y.i=m.i,m.g&&(y.g=new Map(m.g),y.h=m.h),Py(this,y),this.m=u.m}else u&&(m=String(u).match(Ay))?(this.h=!1,Ol(this,m[1]||"",!0),this.o=So(m[2]||""),this.g=So(m[3]||"",!0),Ll(this,m[4]),this.l=So(m[5]||"",!0),Py(this,m[6]||"",!0),this.m=So(m[7]||"")):(this.h=!1,this.i=new bo(null,this.h))}vi.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Io(m,Ry,!0),":");var y=this.g;return(y||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Io(m,Ry,!0),"@"),u.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&u.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(Io(y,y.charAt(0)=="/"?qb:Hb,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",Io(y,Gb)),u.join("")};function zn(u){return new vi(u)}function Ol(u,m,y){u.j=y?So(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Ll(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Py(u,m,y){m instanceof bo?(u.i=m,Qb(u.i,u.h)):(y||(m=Io(m,Kb)),u.i=new bo(m,u.h))}function ke(u,m,y){u.i.set(m,y)}function Vl(u){return ke(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function So(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Io(u,m,y){return typeof u=="string"?(u=encodeURI(u).replace(m,Wb),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Wb(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ry=/[#\/\?@]/g,Hb=/[#\?:]/g,qb=/[#\?]/g,Kb=/[#\?@]/g,Gb=/#/g;function bo(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function yr(u){u.g||(u.g=new Map,u.h=0,u.i&&$b(u.i,function(m,y){u.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}t=bo.prototype,t.add=function(u,m){yr(this),this.i=null,u=ss(this,u);var y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(m),this.h+=1,this};function Ny(u,m){yr(u),m=ss(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Dy(u,m){return yr(u),m=ss(u,m),u.g.has(m)}t.forEach=function(u,m){yr(this),this.g.forEach(function(y,k){y.forEach(function(L){u.call(m,L,k,this)},this)},this)},t.na=function(){yr(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),y=[];for(let k=0;k<m.length;k++){const L=u[k];for(let V=0;V<L.length;V++)y.push(m[k])}return y},t.V=function(u){yr(this);let m=[];if(typeof u=="string")Dy(this,u)&&(m=m.concat(this.g.get(ss(this,u))));else{u=Array.from(this.g.values());for(let y=0;y<u.length;y++)m=m.concat(u[y])}return m},t.set=function(u,m){return yr(this),this.i=null,u=ss(this,u),Dy(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function My(u,m,y){Ny(u,m),0<y.length&&(u.i=null,u.g.set(ss(u,m),v(y)),u.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var y=0;y<m.length;y++){var k=m[y];const V=encodeURIComponent(String(k)),W=this.V(k);for(k=0;k<W.length;k++){var L=V;W[k]!==""&&(L+="="+encodeURIComponent(String(W[k]))),u.push(L)}}return this.i=u.join("&")};function ss(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Qb(u,m){m&&!u.j&&(yr(u),u.i=null,u.g.forEach(function(y,k){var L=k.toLowerCase();k!=L&&(Ny(this,k),My(this,L,y))},u)),u.j=m}function Yb(u,m){const y=new xo;if(a.Image){const k=new Image;k.onload=g(_r,y,"TestLoadImage: loaded",!0,m,k),k.onerror=g(_r,y,"TestLoadImage: error",!1,m,k),k.onabort=g(_r,y,"TestLoadImage: abort",!1,m,k),k.ontimeout=g(_r,y,"TestLoadImage: timeout",!1,m,k),a.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=u}else m(!1)}function Xb(u,m){const y=new xo,k=new AbortController,L=setTimeout(()=>{k.abort(),_r(y,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:k.signal}).then(V=>{clearTimeout(L),V.ok?_r(y,"TestPingServer: ok",!0,m):_r(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(L),_r(y,"TestPingServer: error",!1,m)})}function _r(u,m,y,k,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),k(y)}catch{}}function Jb(){this.g=new Mb}function Zb(u,m,y){const k=y||"";try{Cy(u,function(L,V){let W=L;c(L)&&(W=Zh(L)),m.push(k+V+"="+encodeURIComponent(W))})}catch(L){throw m.push(k+"type="+encodeURIComponent("_badmap")),L}}function jl(u){this.l=u.Ub||null,this.j=u.eb||!1}_(jl,ed),jl.prototype.g=function(){return new Fl(this.l,this.j)},jl.prototype.i=function(u){return function(){return u}}({});function Fl(u,m){ht.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(Fl,ht),t=Fl.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Co(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||a).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ko(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Co(this)),this.g&&(this.readyState=3,Co(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Oy(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Oy(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?ko(this):Co(this),this.readyState==3&&Oy(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,ko(this))},t.Qa=function(u){this.g&&(this.response=u,ko(this))},t.ga=function(){this.g&&ko(this)};function ko(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Co(u)}t.setRequestHeader=function(u,m){this.u.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=m.next();return u.join(`\r
`)};function Co(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Fl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Ly(u){let m="";return M(u,function(y,k){m+=k,m+=":",m+=y,m+=`\r
`}),m}function ud(u,m,y){e:{for(k in y){var k=!1;break e}k=!0}k||(y=Ly(y),typeof u=="string"?y!=null&&encodeURIComponent(String(y)):ke(u,m,y))}function je(u){ht.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(je,ht);var ek=/^https?$/i,tk=["POST","PUT"];t=je.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,m,y,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():rd.g(),this.v=this.o?hy(this.o):hy(rd),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(V){Vy(this,V);return}if(u=y||"",y=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var L in k)y.set(L,k[L]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const V of k.keys())y.set(V,k.get(V));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(y.keys()).find(V=>V.toLowerCase()=="content-type"),L=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(tk,m,void 0))||k||L||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,W]of y)this.g.setRequestHeader(V,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Uy(this),this.u=!0,this.g.send(u),this.u=!1}catch(V){Vy(this,V)}};function Vy(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,jy(u),Ul(u)}function jy(u){u.A||(u.A=!0,bt(u,"complete"),bt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,bt(this,"complete"),bt(this,"abort"),Ul(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ul(this,!0)),je.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Fy(this):this.bb())},t.bb=function(){Fy(this)};function Fy(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Bn(u)!=4||u.Z()!=2)){if(u.u&&Bn(u)==4)ay(u.Ea,0,u);else if(bt(u,"readystatechange"),Bn(u)==4){u.h=!1;try{const W=u.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var y;if(!(y=m)){var k;if(k=W===0){var L=String(u.D).match(Ay)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),k=!ek.test(L?L.toLowerCase():"")}y=k}if(y)bt(u,"complete"),bt(u,"success");else{u.m=6;try{var V=2<Bn(u)?u.g.statusText:""}catch{V=""}u.l=V+" ["+u.Z()+"]",jy(u)}}finally{Ul(u)}}}}function Ul(u,m){if(u.g){Uy(u);const y=u.g,k=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||bt(u,"ready");try{y.onreadystatechange=k}catch{}}}function Uy(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Bn(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Bn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Db(m)}};function zy(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function nk(u){const m={};u=(u.g&&2<=Bn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<u.length;k++){if(x(u[k]))continue;var y=P(u[k]);const L=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const V=m[L]||[];m[L]=V,V.push(y)}S(m,function(k){return k.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ao(u,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||m}function By(u){this.Aa=0,this.i=[],this.j=new xo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ao("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ao("baseRetryDelayMs",5e3,u),this.cb=Ao("retryDelaySeedMs",1e4,u),this.Wa=Ao("forwardChannelMaxRetries",2,u),this.wa=Ao("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ty(u&&u.concurrentRequestLimit),this.Da=new Jb,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=By.prototype,t.la=8,t.G=1,t.connect=function(u,m,y,k){kt(0),this.W=u,this.H=m||{},y&&k!==void 0&&(this.H.OSID=y,this.H.OAID=k),this.F=this.X,this.I=Xy(this,null,this.W),Bl(this)};function hd(u){if($y(u),u.G==3){var m=u.U++,y=zn(u.I);if(ke(y,"SID",u.K),ke(y,"RID",m),ke(y,"TYPE","terminate"),Po(u,y),m=new gr(u,u.j,m),m.L=2,m.v=Vl(zn(y)),y=!1,a.navigator&&a.navigator.sendBeacon)try{y=a.navigator.sendBeacon(m.v.toString(),"")}catch{}!y&&a.Image&&(new Image().src=m.v,y=!0),y||(m.g=Jy(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Ml(m)}Yy(u)}function zl(u){u.g&&(fd(u),u.g.cancel(),u.g=null)}function $y(u){zl(u),u.u&&(a.clearTimeout(u.u),u.u=null),$l(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Bl(u){if(!Sy(u.h)&&!u.s){u.s=!0;var m=u.Ga;X||Z(),z||(X(),z=!0),H.add(m,u),u.B=0}}function rk(u,m){return Iy(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Eo(f(u.Ga,u,m),Qy(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const L=new gr(this,this.j,u);let V=this.o;if(this.S&&(V?(V=E(V),I(V,this.S)):V=this.S),this.m!==null||this.O||(L.H=V,V=null),this.P)e:{for(var m=0,y=0;y<this.i.length;y++){t:{var k=this.i[y];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(m+=k,4096<m){m=y;break e}if(m===4096||y===this.i.length-1){m=y+1;break e}}m=1e3}else m=1e3;m=Hy(this,L,m),y=zn(this.I),ke(y,"RID",u),ke(y,"CVER",22),this.D&&ke(y,"X-HTTP-Session-Id",this.D),Po(this,y),V&&(this.O?m="headers="+encodeURIComponent(String(Ly(V)))+"&"+m:this.m&&ud(y,this.m,V)),cd(this.h,L),this.Ua&&ke(y,"TYPE","init"),this.P?(ke(y,"$req",m),ke(y,"SID","null"),L.T=!0,sd(L,y,null)):sd(L,y,m),this.G=2}}else this.G==3&&(u?Wy(this,u):this.i.length==0||Sy(this.h)||Wy(this))};function Wy(u,m){var y;m?y=m.l:y=u.U++;const k=zn(u.I);ke(k,"SID",u.K),ke(k,"RID",y),ke(k,"AID",u.T),Po(u,k),u.m&&u.o&&ud(k,u.m,u.o),y=new gr(u,u.j,y,u.B+1),u.m===null&&(y.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Hy(u,y,1e3),y.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),cd(u.h,y),sd(y,k,m)}function Po(u,m){u.H&&M(u.H,function(y,k){ke(m,k,y)}),u.l&&Cy({},function(y,k){ke(m,k,y)})}function Hy(u,m,y){y=Math.min(u.i.length,y);var k=u.l?f(u.l.Na,u.l,u):null;e:{var L=u.i;let V=-1;for(;;){const W=["count="+y];V==-1?0<y?(V=L[0].g,W.push("ofs="+V)):V=0:W.push("ofs="+V);let Te=!0;for(let rt=0;rt<y;rt++){let ye=L[rt].g;const dt=L[rt].map;if(ye-=V,0>ye)V=Math.max(0,L[rt].g-100),Te=!1;else try{Zb(dt,W,"req"+ye+"_")}catch{k&&k(dt)}}if(Te){k=W.join("&");break e}}}return u=u.i.splice(0,y),m.D=u,k}function qy(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;X||Z(),z||(X(),z=!0),H.add(m,u),u.v=0}}function dd(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Eo(f(u.Fa,u),Qy(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Ky(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Eo(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kt(10),zl(this),Ky(this))};function fd(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Ky(u){u.g=new gr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=zn(u.qa);ke(m,"RID","rpc"),ke(m,"SID",u.K),ke(m,"AID",u.T),ke(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&ke(m,"TO",u.ja),ke(m,"TYPE","xmlhttp"),Po(u,m),u.m&&u.o&&ud(m,u.m,u.o),u.L&&(u.g.I=u.L);var y=u.g;u=u.ia,y.L=1,y.v=Vl(zn(m)),y.m=null,y.P=!0,wy(y,u)}t.Za=function(){this.C!=null&&(this.C=null,zl(this),dd(this),kt(19))};function $l(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Gy(u,m){var y=null;if(u.g==m){$l(u),fd(u),u.g=null;var k=2}else if(ld(u.h,m))y=m.D,by(u.h,m),k=1;else return;if(u.G!=0){if(m.o)if(k==1){y=m.m?m.m.length:0,m=Date.now()-m.F;var L=u.B;k=Rl(),bt(k,new gy(k,y)),Bl(u)}else qy(u);else if(L=m.s,L==3||L==0&&0<m.X||!(k==1&&rk(u,m)||k==2&&dd(u)))switch(y&&0<y.length&&(m=u.h,m.i=m.i.concat(y)),L){case 1:wi(u,5);break;case 4:wi(u,10);break;case 3:wi(u,6);break;default:wi(u,2)}}}function Qy(u,m){let y=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(y*=2),y*m}function wi(u,m){if(u.j.info("Error code "+m),m==2){var y=f(u.fb,u),k=u.Xa;const L=!k;k=new vi(k||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ol(k,"https"),Vl(k),L?Yb(k.toString(),y):Xb(k.toString(),y)}else kt(2);u.G=0,u.l&&u.l.sa(m),Yy(u),$y(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function Yy(u){if(u.G=0,u.ka=[],u.l){const m=ky(u.h);(m.length!=0||u.i.length!=0)&&(T(u.ka,m),T(u.ka,u.i),u.h.i.length=0,v(u.i),u.i.length=0),u.l.ra()}}function Xy(u,m,y){var k=y instanceof vi?zn(y):new vi(y);if(k.g!="")m&&(k.g=m+"."+k.g),Ll(k,k.s);else{var L=a.location;k=L.protocol,m=m?m+"."+L.hostname:L.hostname,L=+L.port;var V=new vi(null);k&&Ol(V,k),m&&(V.g=m),L&&Ll(V,L),y&&(V.l=y),k=V}return y=u.D,m=u.ya,y&&m&&ke(k,y,m),ke(k,"VER",u.la),Po(u,k),k}function Jy(u,m,y){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new je(new jl({eb:y})):new je(u.pa),m.Ha(u.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zy(){}t=Zy.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Wl(){}Wl.prototype.g=function(u,m){return new Ht(u,m)};function Ht(u,m){ht.call(this),this.g=new By(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!x(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!x(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new os(this)}_(Ht,ht),Ht.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ht.prototype.close=function(){hd(this.g)},Ht.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.u&&(y={},y.__data__=Zh(u),u=y);m.i.push(new Ub(m.Ya++,u)),m.G==3&&Bl(m)},Ht.prototype.N=function(){this.g.l=null,delete this.j,hd(this.g),delete this.g,Ht.aa.N.call(this)};function e_(u){td.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const y in m){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}_(e_,td);function t_(){nd.call(this),this.status=1}_(t_,nd);function os(u){this.g=u}_(os,Zy),os.prototype.ua=function(){bt(this.g,"a")},os.prototype.ta=function(u){bt(this.g,new e_(u))},os.prototype.sa=function(u){bt(this.g,new t_)},os.prototype.ra=function(){bt(this.g,"b")},Wl.prototype.createWebChannel=Wl.prototype.g,Ht.prototype.send=Ht.prototype.o,Ht.prototype.open=Ht.prototype.m,Ht.prototype.close=Ht.prototype.close,gS=function(){return new Wl},mS=function(){return Rl()},pS=yi,yp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Nl.NO_ERROR=0,Nl.TIMEOUT=8,Nl.HTTP_ERROR=6,Wc=Nl,yy.COMPLETE="complete",fS=yy,dy.EventType=vo,vo.OPEN="a",vo.CLOSE="b",vo.ERROR="c",vo.MESSAGE="d",ht.prototype.listen=ht.prototype.K,Zo=dy,je.prototype.listenOnce=je.prototype.L,je.prototype.getLastError=je.prototype.Ka,je.prototype.getLastErrorCode=je.prototype.Ba,je.prototype.getStatus=je.prototype.Z,je.prototype.getResponseJson=je.prototype.Oa,je.prototype.getResponseText=je.prototype.oa,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Ha,dS=je}).apply(typeof uc<"u"?uc:typeof self<"u"?self:typeof window<"u"?window:{});const Yv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_t.UNAUTHENTICATED=new _t(null),_t.GOOGLE_CREDENTIALS=new _t("google-credentials-uid"),_t.FIRST_PARTY=new _t("first-party-uid"),_t.MOCK_USER=new _t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi=new $m("@firebase/firestore");function Uo(){return qi.logLevel}function G(t,...e){if(qi.logLevel<=fe.DEBUG){const n=e.map(tg);qi.debug(`Firestore (${fo}): ${t}`,...n)}}function ur(t,...e){if(qi.logLevel<=fe.ERROR){const n=e.map(tg);qi.error(`Firestore (${fo}): ${t}`,...n)}}function Gs(t,...e){if(qi.logLevel<=fe.WARN){const n=e.map(tg);qi.warn(`Firestore (${fo}): ${t}`,...n)}}function tg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(t="Unexpected state"){const e=`FIRESTORE (${fo}) INTERNAL ASSERTION FAILED: `+t;throw ur(e),new Error(e)}function xe(t,e){t||re()}function le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends pr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class RD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(_t.UNAUTHENTICATED))}shutdown(){}}class ND{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class DD{constructor(e){this.t=e,this.currentUser=_t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){xe(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new rr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new rr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new rr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xe(typeof r.accessToken=="string"),new yS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xe(e===null||typeof e=="string"),new _t(e)}}class MD{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=_t.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class OD{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new MD(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(_t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class LD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class VD{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){xe(this.o===void 0);const r=s=>{s.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(xe(typeof n.token=="string"),this.R=n.token,new LD(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=jD(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function _e(t,e){return t<e?-1:t>e?1:0}function Qs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Je.fromMillis(Date.now())}static fromDate(e){return Je.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Je(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?_e(this.nanoseconds,e.nanoseconds):_e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ae(e)}static min(){return new ae(new Je(0,0))}static max(){return new ae(new Je(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,n,r){n===void 0?n=0:n>e.length&&re(),r===void 0?r=e.length-n:r>e.length-n&&re(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ya.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ya?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Pe extends Ya{construct(e,n,r){return new Pe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Pe(n)}static emptyPath(){return new Pe([])}}const FD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ot extends Ya{construct(e,n,r){return new ot(e,n,r)}static isValidIdentifier(e){return FD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ot(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new q(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new q(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new q(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new q(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ot(n)}static emptyPath(){return new ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.path=e}static fromPath(e){return new ee(Pe.fromString(e))}static fromName(e){return new ee(Pe.fromString(e).popFirst(5))}static empty(){return new ee(Pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ee(new Pe(e.slice()))}}function UD(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ae.fromTimestamp(r===1e9?new Je(n+1,0):new Je(n,r));return new ni(i,ee.empty(),e)}function zD(t){return new ni(t.readTime,t.key,-1)}class ni{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ni(ae.min(),ee.empty(),-1)}static max(){return new ni(ae.max(),ee.empty(),-1)}}function BD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ee.comparator(t.documentKey,e.documentKey),n!==0?n:_e(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xl(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==$D)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(i=>i?U.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new U((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new U((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function HD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Tl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ng.oe=-1;function wh(t){return t==null}function Du(t){return t===0&&1/t==-1/0}function qD(t){return typeof t=="number"&&Number.isInteger(t)&&!Du(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ts(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function vS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e,n){this.comparator=e,this.root=n||st.EMPTY}insert(e,n){return new Ve(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,st.BLACK,null,null))}remove(e){return new Ve(this.comparator,this.root.remove(e,this.comparator).copy(null,null,st.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hc(this.root,e,this.comparator,!1)}getReverseIterator(){return new hc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hc(this.root,e,this.comparator,!0)}}class hc{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class st{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??st.RED,this.left=i??st.EMPTY,this.right=s??st.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new st(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return st.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return st.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,st.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,st.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw re();const e=this.left.check();if(e!==this.right.check())throw re();return e+(this.isRed()?0:1)}}st.EMPTY=null,st.RED=!0,st.BLACK=!1;st.EMPTY=new class{constructor(){this.size=0}get key(){throw re()}get value(){throw re()}get color(){throw re()}get left(){throw re()}get right(){throw re()}copy(e,n,r,i,s){return this}insert(e,n,r){return new st(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.comparator=e,this.data=new Ve(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Jv(this.data.getIterator())}getIteratorFrom(e){return new Jv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof lt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new lt(this.comparator);return n.data=e,n}}class Jv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.fields=e,e.sort(ot.comparator)}static empty(){return new Gt([])}unionWith(e){let n=new lt(ot.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Gt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Qs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new wS("Invalid base64 string: "+s):s}}(e);return new ut(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new ut(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ut.EMPTY_BYTE_STRING=new ut("");const KD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ri(t){if(xe(!!t),typeof t=="string"){let e=0;const n=KD.exec(t);if(xe(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ze(t.seconds),nanos:ze(t.nanos)}}function ze(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ki(t){return typeof t=="string"?ut.fromBase64String(t):ut.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function ig(t){const e=t.mapValue.fields.__previous_value__;return rg(e)?ig(e):e}function Xa(t){const e=ri(t.mapValue.fields.__local_write_time__.timestampValue);return new Je(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Ja{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ja("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ja&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc={mapValue:{}};function Gi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?rg(t)?4:YD(t)?9007199254740991:QD(t)?10:11:re()}function Un(t,e){if(t===e)return!0;const n=Gi(t);if(n!==Gi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Xa(t).isEqual(Xa(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ri(i.timestampValue),a=ri(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ki(i.bytesValue).isEqual(Ki(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return ze(i.geoPointValue.latitude)===ze(s.geoPointValue.latitude)&&ze(i.geoPointValue.longitude)===ze(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ze(i.integerValue)===ze(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=ze(i.doubleValue),a=ze(s.doubleValue);return o===a?Du(o)===Du(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Qs(t.arrayValue.values||[],e.arrayValue.values||[],Un);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Xv(o)!==Xv(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Un(o[l],a[l])))return!1;return!0}(t,e);default:return re()}}function Za(t,e){return(t.values||[]).find(n=>Un(n,e))!==void 0}function Ys(t,e){if(t===e)return 0;const n=Gi(t),r=Gi(e);if(n!==r)return _e(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return _e(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=ze(s.integerValue||s.doubleValue),l=ze(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Zv(t.timestampValue,e.timestampValue);case 4:return Zv(Xa(t),Xa(e));case 5:return _e(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Ki(s),l=Ki(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=_e(a[c],l[c]);if(h!==0)return h}return _e(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=_e(ze(s.latitude),ze(o.latitude));return a!==0?a:_e(ze(s.longitude),ze(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return e0(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,h;const d=s.fields||{},f=o.fields||{},g=(a=d.value)===null||a===void 0?void 0:a.arrayValue,_=(l=f.value)===null||l===void 0?void 0:l.arrayValue,v=_e(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((h=_==null?void 0:_.values)===null||h===void 0?void 0:h.length)||0);return v!==0?v:e0(g,_)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===dc.mapValue&&o===dc.mapValue)return 0;if(s===dc.mapValue)return 1;if(o===dc.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=_e(l[d],h[d]);if(f!==0)return f;const g=Ys(a[l[d]],c[h[d]]);if(g!==0)return g}return _e(l.length,h.length)}(t.mapValue,e.mapValue);default:throw re()}}function Zv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return _e(t,e);const n=ri(t),r=ri(e),i=_e(n.seconds,r.seconds);return i!==0?i:_e(n.nanos,r.nanos)}function e0(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ys(n[i],r[i]);if(s)return s}return _e(n.length,r.length)}function Xs(t){return _p(t)}function _p(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ri(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ki(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ee.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=_p(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${_p(n.fields[o])}`;return i+"}"}(t.mapValue):re()}function t0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function vp(t){return!!t&&"integerValue"in t}function sg(t){return!!t&&"arrayValue"in t}function n0(t){return!!t&&"nullValue"in t}function r0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Hc(t){return!!t&&"mapValue"in t}function QD(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function va(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ts(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=va(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=va(t.arrayValue.values[n]);return e}return Object.assign({},t)}function YD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.value=e}static empty(){return new Lt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Hc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=va(n)}setAll(e){let n=ot.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=va(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Hc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Un(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Hc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ts(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Lt(va(this.value))}}function ES(t){const e=[];return ts(t.fields,(n,r)=>{const i=new ot([n]);if(Hc(r)){const s=ES(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Gt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new wt(e,0,ae.min(),ae.min(),ae.min(),Lt.empty(),0)}static newFoundDocument(e,n,r,i){return new wt(e,1,n,ae.min(),r,i,0)}static newNoDocument(e,n){return new wt(e,2,n,ae.min(),ae.min(),Lt.empty(),0)}static newUnknownDocument(e,n){return new wt(e,3,n,ae.min(),ae.min(),Lt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Lt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Lt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,n){this.position=e,this.inclusive=n}}function i0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ee.comparator(ee.fromName(o.referenceValue),n.key):r=Ys(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function s0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Un(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,n="asc"){this.field=e,this.dir=n}}function XD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{}class Ke extends xS{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new ZD(e,n,r):n==="array-contains"?new nM(e,r):n==="in"?new rM(e,r):n==="not-in"?new iM(e,r):n==="array-contains-any"?new sM(e,r):new Ke(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new eM(e,r):new tM(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ys(n,this.value)):n!==null&&Gi(this.value)===Gi(n)&&this.matchesComparison(Ys(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Tn extends xS{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Tn(e,n)}matches(e){return TS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function TS(t){return t.op==="and"}function SS(t){return JD(t)&&TS(t)}function JD(t){for(const e of t.filters)if(e instanceof Tn)return!1;return!0}function wp(t){if(t instanceof Ke)return t.field.canonicalString()+t.op.toString()+Xs(t.value);if(SS(t))return t.filters.map(e=>wp(e)).join(",");{const e=t.filters.map(n=>wp(n)).join(",");return`${t.op}(${e})`}}function IS(t,e){return t instanceof Ke?function(r,i){return i instanceof Ke&&r.op===i.op&&r.field.isEqual(i.field)&&Un(r.value,i.value)}(t,e):t instanceof Tn?function(r,i){return i instanceof Tn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&IS(o,i.filters[a]),!0):!1}(t,e):void re()}function bS(t){return t instanceof Ke?function(n){return`${n.field.canonicalString()} ${n.op} ${Xs(n.value)}`}(t):t instanceof Tn?function(n){return n.op.toString()+" {"+n.getFilters().map(bS).join(" ,")+"}"}(t):"Filter"}class ZD extends Ke{constructor(e,n,r){super(e,n,r),this.key=ee.fromName(r.referenceValue)}matches(e){const n=ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class eM extends Ke{constructor(e,n){super(e,"in",n),this.keys=kS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class tM extends Ke{constructor(e,n){super(e,"not-in",n),this.keys=kS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function kS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ee.fromName(r.referenceValue))}class nM extends Ke{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return sg(n)&&Za(n.arrayValue,this.value)}}class rM extends Ke{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Za(this.value.arrayValue,n)}}class iM extends Ke{constructor(e,n){super(e,"not-in",n)}matches(e){if(Za(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Za(this.value.arrayValue,n)}}class sM extends Ke{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!sg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Za(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function o0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new oM(t,e,n,r,i,s,o)}function og(t){const e=le(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>wp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),wh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Xs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Xs(r)).join(",")),e.ue=n}return e.ue}function ag(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!XD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!IS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!s0(t.startAt,e.startAt)&&s0(t.endAt,e.endAt)}function Ep(t){return ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function aM(t,e,n,r,i,s,o,a){return new po(t,e,n,r,i,s,o,a)}function Eh(t){return new po(t)}function a0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function CS(t){return t.collectionGroup!==null}function wa(t){const e=le(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new lt(ot.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new el(s,r))}),n.has(ot.keyField().canonicalString())||e.ce.push(new el(ot.keyField(),r))}return e.ce}function Vn(t){const e=le(t);return e.le||(e.le=lM(e,wa(t))),e.le}function lM(t,e){if(t.limitType==="F")return o0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new el(i.field,s)});const n=t.endAt?new Mu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Mu(t.startAt.position,t.startAt.inclusive):null;return o0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function xp(t,e){const n=t.filters.concat([e]);return new po(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ou(t,e,n){return new po(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function xh(t,e){return ag(Vn(t),Vn(e))&&t.limitType===e.limitType}function AS(t){return`${og(Vn(t))}|lt:${t.limitType}`}function hs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>bS(i)).join(", ")}]`),wh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Xs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Xs(i)).join(",")),`Target(${r})`}(Vn(t))}; limitType=${t.limitType})`}function Th(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ee.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of wa(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=i0(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,wa(r),i)||r.endAt&&!function(o,a,l){const c=i0(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,wa(r),i))}(t,e)}function cM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function PS(t){return(e,n)=>{let r=!1;for(const i of wa(t)){const s=uM(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function uM(t,e,n){const r=t.field.isKeyField()?ee.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Ys(l,c):re()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return re()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ts(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return vS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM=new Ve(ee.comparator);function hr(){return hM}const RS=new Ve(ee.comparator);function ea(...t){let e=RS;for(const n of t)e=e.insert(n.key,n);return e}function NS(t){let e=RS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Di(){return Ea()}function DS(){return Ea()}function Ea(){return new mo(t=>t.toString(),(t,e)=>t.isEqual(e))}const dM=new Ve(ee.comparator),fM=new lt(ee.comparator);function de(...t){let e=fM;for(const n of t)e=e.add(n);return e}const pM=new lt(_e);function mM(){return pM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Du(e)?"-0":e}}function MS(t){return{integerValue:""+t}}function gM(t,e){return qD(e)?MS(e):lg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(){this._=void 0}}function yM(t,e,n){return t instanceof tl?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&rg(s)&&(s=ig(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof nl?LS(t,e):t instanceof rl?VS(t,e):function(i,s){const o=OS(i,s),a=l0(o)+l0(i.Pe);return vp(o)&&vp(i.Pe)?MS(a):lg(i.serializer,a)}(t,e)}function _M(t,e,n){return t instanceof nl?LS(t,e):t instanceof rl?VS(t,e):n}function OS(t,e){return t instanceof Lu?function(r){return vp(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class tl extends Sh{}class nl extends Sh{constructor(e){super(),this.elements=e}}function LS(t,e){const n=jS(e);for(const r of t.elements)n.some(i=>Un(i,r))||n.push(r);return{arrayValue:{values:n}}}class rl extends Sh{constructor(e){super(),this.elements=e}}function VS(t,e){let n=jS(e);for(const r of t.elements)n=n.filter(i=>!Un(i,r));return{arrayValue:{values:n}}}class Lu extends Sh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function l0(t){return ze(t.integerValue||t.doubleValue)}function jS(t){return sg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e,n){this.field=e,this.transform=n}}function wM(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof nl&&i instanceof nl||r instanceof rl&&i instanceof rl?Qs(r.elements,i.elements,Un):r instanceof Lu&&i instanceof Lu?Un(r.Pe,i.Pe):r instanceof tl&&i instanceof tl}(t.transform,e.transform)}class EM{constructor(e,n){this.version=e,this.transformResults=n}}class on{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new on}static exists(e){return new on(void 0,e)}static updateTime(e){return new on(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ih{}function FS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new cg(t.key,on.none()):new Sl(t.key,t.data,on.none());{const n=t.data,r=Lt.empty();let i=new lt(ot.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new fi(t.key,r,new Gt(i.toArray()),on.none())}}function xM(t,e,n){t instanceof Sl?function(i,s,o){const a=i.value.clone(),l=u0(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof fi?function(i,s,o){if(!qc(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=u0(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(US(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function xa(t,e,n,r){return t instanceof Sl?function(s,o,a,l){if(!qc(s.precondition,o))return a;const c=s.value.clone(),h=h0(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof fi?function(s,o,a,l){if(!qc(s.precondition,o))return a;const c=h0(s.fieldTransforms,l,o),h=o.data;return h.setAll(US(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return qc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function TM(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=OS(r.transform,i||null);s!=null&&(n===null&&(n=Lt.empty()),n.set(r.field,s))}return n||null}function c0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Qs(r,i,(s,o)=>wM(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Sl extends Ih{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class fi extends Ih{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function US(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function u0(t,e,n){const r=new Map;xe(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,_M(o,a,n[i]))}return r}function h0(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,yM(s,o,e))}return r}class cg extends Ih{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class SM extends Ih{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&xM(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=xa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=xa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=DS();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=FS(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),de())}isEqual(e){return this.batchId===e.batchId&&Qs(this.mutations,e.mutations,(n,r)=>c0(n,r))&&Qs(this.baseMutations,e.baseMutations,(n,r)=>c0(n,r))}}class ug{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){xe(e.mutations.length===r.length);let i=function(){return dM}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new ug(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He,pe;function CM(t){switch(t){default:return re();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function zS(t){if(t===void 0)return ur("GRPC error has no .code"),F.UNKNOWN;switch(t){case He.OK:return F.OK;case He.CANCELLED:return F.CANCELLED;case He.UNKNOWN:return F.UNKNOWN;case He.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case He.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case He.INTERNAL:return F.INTERNAL;case He.UNAVAILABLE:return F.UNAVAILABLE;case He.UNAUTHENTICATED:return F.UNAUTHENTICATED;case He.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case He.NOT_FOUND:return F.NOT_FOUND;case He.ALREADY_EXISTS:return F.ALREADY_EXISTS;case He.PERMISSION_DENIED:return F.PERMISSION_DENIED;case He.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case He.ABORTED:return F.ABORTED;case He.OUT_OF_RANGE:return F.OUT_OF_RANGE;case He.UNIMPLEMENTED:return F.UNIMPLEMENTED;case He.DATA_LOSS:return F.DATA_LOSS;default:return re()}}(pe=He||(He={}))[pe.OK=0]="OK",pe[pe.CANCELLED=1]="CANCELLED",pe[pe.UNKNOWN=2]="UNKNOWN",pe[pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pe[pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pe[pe.NOT_FOUND=5]="NOT_FOUND",pe[pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",pe[pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",pe[pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",pe[pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pe[pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pe[pe.ABORTED=10]="ABORTED",pe[pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",pe[pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",pe[pe.INTERNAL=13]="INTERNAL",pe[pe.UNAVAILABLE=14]="UNAVAILABLE",pe[pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM=new Li([4294967295,4294967295],0);function d0(t){const e=AM().encode(t),n=new hS;return n.update(e),new Uint8Array(n.digest())}function f0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Li([n,r],0),new Li([i,s],0)]}class hg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ta(`Invalid padding: ${n}`);if(r<0)throw new ta(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ta(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ta(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Li.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Li.fromNumber(r)));return i.compare(PM)===1&&(i=new Li([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=d0(e),[r,i]=f0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new hg(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=d0(e),[r,i]=f0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ta extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Il.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new bh(ae.min(),i,new Ve(_e),hr(),de())}}class Il{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Il(r,n,de(),de(),de())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class BS{constructor(e,n){this.targetId=e,this.me=n}}class $S{constructor(e,n,r=ut.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class p0{constructor(){this.fe=0,this.ge=g0(),this.pe=ut.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=de(),n=de(),r=de();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:re()}}),new Il(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=g0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,xe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class RM{constructor(e){this.Le=e,this.Be=new Map,this.ke=hr(),this.qe=m0(),this.Qe=new Ve(_e)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:re()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Ep(s))if(r===0){const o=new ee(s.path);this.Ue(n,o,wt.newNoDocument(o,ae.min()))}else xe(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Ki(r).toUint8Array()}catch(l){if(l instanceof wS)return Gs("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new hg(o,i,s)}catch(l){return Gs(l instanceof ta?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Ep(a.target)){const l=new ee(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,wt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=de();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new bh(e,n,this.Qe,this.ke,r);return this.ke=hr(),this.qe=m0(),this.Qe=new Ve(_e),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new p0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new lt(_e),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new p0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function m0(){return new Ve(ee.comparator)}function g0(){return new Ve(ee.comparator)}const NM={asc:"ASCENDING",desc:"DESCENDING"},DM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MM={and:"AND",or:"OR"};class OM{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Tp(t,e){return t.useProto3Json||wh(e)?e:{value:e}}function Vu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function LM(t,e){return Vu(t,e.toTimestamp())}function jn(t){return xe(!!t),ae.fromTimestamp(function(n){const r=ri(n);return new Je(r.seconds,r.nanos)}(t))}function dg(t,e){return Sp(t,e).canonicalString()}function Sp(t,e){const n=function(i){return new Pe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function HS(t){const e=Pe.fromString(t);return xe(YS(e)),e}function Ip(t,e){return dg(t.databaseId,e.path)}function Qd(t,e){const n=HS(e);if(n.get(1)!==t.databaseId.projectId)throw new q(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ee(KS(n))}function qS(t,e){return dg(t.databaseId,e)}function VM(t){const e=HS(t);return e.length===4?Pe.emptyPath():KS(e)}function bp(t){return new Pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function KS(t){return xe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function y0(t,e,n){return{name:Ip(t,e),fields:n.value.mapValue.fields}}function jM(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:re()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(xe(h===void 0||typeof h=="string"),ut.fromBase64String(h||"")):(xe(h===void 0||h instanceof Buffer||h instanceof Uint8Array),ut.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?F.UNKNOWN:zS(c.code);return new q(h,c.message||"")}(o);n=new $S(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Qd(t,r.document.name),s=jn(r.document.updateTime),o=r.document.createTime?jn(r.document.createTime):ae.min(),a=new Lt({mapValue:{fields:r.document.fields}}),l=wt.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Kc(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Qd(t,r.document),s=r.readTime?jn(r.readTime):ae.min(),o=wt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Kc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Qd(t,r.document),s=r.removedTargetIds||[];n=new Kc([],s,i,null)}else{if(!("filter"in e))return re();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new kM(i,s),a=r.targetId;n=new BS(a,o)}}return n}function FM(t,e){let n;if(e instanceof Sl)n={update:y0(t,e.key,e.value)};else if(e instanceof cg)n={delete:Ip(t,e.key)};else if(e instanceof fi)n={update:y0(t,e.key,e.data),updateMask:GM(e.fieldMask)};else{if(!(e instanceof SM))return re();n={verify:Ip(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof tl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof nl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof rl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Lu)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw re()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:LM(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:re()}(t,e.precondition)),n}function UM(t,e){return t&&t.length>0?(xe(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?jn(i.updateTime):jn(s);return o.isEqual(ae.min())&&(o=jn(s)),new EM(o,i.transformResults||[])}(n,e))):[]}function zM(t,e){return{documents:[qS(t,e.path)]}}function BM(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=qS(t,i);const s=function(c){if(c.length!==0)return QS(Tn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(f){return{field:ds(f.field),direction:HM(f.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Tp(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function $M(t){let e=VM(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){xe(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const f=GS(d);return f instanceof Tn&&SS(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(_){return new el(fs(_.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,wh(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,g=d.values||[];return new Mu(g,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,g=d.values||[];return new Mu(g,f)}(n.endAt)),aM(e,i,o,s,a,"F",l,c)}function WM(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function GS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=fs(n.unaryFilter.field);return Ke.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=fs(n.unaryFilter.field);return Ke.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=fs(n.unaryFilter.field);return Ke.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=fs(n.unaryFilter.field);return Ke.create(o,"!=",{nullValue:"NULL_VALUE"});default:return re()}}(t):t.fieldFilter!==void 0?function(n){return Ke.create(fs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return re()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Tn.create(n.compositeFilter.filters.map(r=>GS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return re()}}(n.compositeFilter.op))}(t):re()}function HM(t){return NM[t]}function qM(t){return DM[t]}function KM(t){return MM[t]}function ds(t){return{fieldPath:t.canonicalString()}}function fs(t){return ot.fromServerFormat(t.fieldPath)}function QS(t){return t instanceof Ke?function(n){if(n.op==="=="){if(r0(n.value))return{unaryFilter:{field:ds(n.field),op:"IS_NAN"}};if(n0(n.value))return{unaryFilter:{field:ds(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(r0(n.value))return{unaryFilter:{field:ds(n.field),op:"IS_NOT_NAN"}};if(n0(n.value))return{unaryFilter:{field:ds(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ds(n.field),op:qM(n.op),value:n.value}}}(t):t instanceof Tn?function(n){const r=n.getFilters().map(i=>QS(i));return r.length===1?r[0]:{compositeFilter:{op:KM(n.op),filters:r}}}(t):re()}function GM(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function YS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e,n,r,i,s=ae.min(),o=ae.min(),a=ut.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Dr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Dr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(e){this.ct=e}}function YM(t){const e=$M({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ou(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(){this.un=new JM}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(ni.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(ni.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class JM{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new lt(Pe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new lt(Pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Js(0)}static kn(){return new Js(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(){this.changes=new mo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,wt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&xa(r.mutation,i,Gt.empty(),Je.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,de()).next(()=>r))}getLocalViewOfDocuments(e,n,r=de()){const i=Di();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=ea();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Di();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,de()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=hr();const o=Ea(),a=function(){return Ea()}();return n.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof fi)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),xa(h.mutation,c,h.mutation.getFieldMask(),Je.now())):o.set(c.key,Gt.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new eO(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ea();let i=new Ve((o,a)=>o-a),s=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||Gt.empty();h=a.applyToLocalView(c,h),r.set(l,h);const d=(i.get(a.batchId)||de()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=DS();h.forEach(f=>{if(!s.has(f)){const g=FS(n.get(f),r.get(f));g!==null&&d.set(f,g),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ee.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):CS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):U.resolve(Di());let a=-1,l=s;return o.next(c=>U.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?U.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{l=l.insert(h,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,de())).next(h=>({batchId:a,changes:NS(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ee(n)).next(r=>{let i=ea();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=ea();return this.indexManager.getCollectionParents(e,s).next(a=>U.forEach(a,l=>{const c=function(d,f){return new po(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,wt.newInvalidDocument(h)))});let a=ea();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&xa(h.mutation,c,Gt.empty(),Je.now()),Th(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:jn(i.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:YM(i.bundledQuery),readTime:jn(i.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(){this.overlays=new Ve(ee.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Di();return U.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const i=Di(),s=n.length+1,o=new ee(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return U.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ve((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=Di(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Di(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return U.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new bM(n,r));let s=this.Ir.get(n);s===void 0&&(s=de(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(){this.sessionToken=ut.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(){this.Tr=new lt(et.Er),this.dr=new lt(et.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new et(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new et(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ee(new Pe([])),r=new et(n,e),i=new et(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ee(new Pe([])),r=new et(n,e),i=new et(n,e+1);let s=de();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new et(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class et{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ee.comparator(e.key,n.key)||_e(e.wr,n.wr)}static Ar(e,n){return _e(e.wr,n.wr)||ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new lt(et.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new IM(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new et(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return U.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new et(n,0),i=new et(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),U.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new lt(_e);return n.forEach(i=>{const s=new et(i,0),o=new et(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ee.isDocumentKey(s)||(s=s.child(""));const o=new et(new ee(s),0);let a=new lt(_e);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),U.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){xe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,i=>{const s=new et(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new et(n,0),i=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(e){this.Mr=e,this.docs=function(){return new Ve(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():wt.newInvalidDocument(n))}getEntries(e,n){let r=hr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():wt.newInvalidDocument(i))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=hr();const o=n.path,a=new ee(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||BD(zD(h),r)<=0||(i.has(h.key)||Th(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return U.resolve(s)}getAllFromCollectionGroup(e,n,r,i){re()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new aO(this)}getSize(e){return U.resolve(this.size)}}class aO extends ZM{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e){this.persistence=e,this.Nr=new mo(n=>og(n),ag),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.Lr=0,this.Br=new fg,this.targetCount=0,this.kr=Js.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Js(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),U.waitFor(s).next(()=>i)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),U.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e,n){this.qr={},this.overlays={},this.Qr=new ng(0),this.Kr=!1,this.Kr=!0,this.$r=new iO,this.referenceDelegate=e(this),this.Ur=new lO(this),this.indexManager=new XM,this.remoteDocumentCache=function(i){return new oO(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new QM(n),this.Gr=new nO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new rO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new sO(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const i=new uO(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class uO extends WD{constructor(e){super(),this.currentSequenceNumber=e}}class pg{constructor(e){this.persistence=e,this.Jr=new fg,this.Yr=null}static Zr(e){return new pg(e)}get Xr(){if(this.Yr)return this.Yr;throw re()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const i=ee.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ae.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=de(),i=de();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new mg(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return ZP()?8:HD(St())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new hO;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Uo()<=fe.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",hs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(Uo()<=fe.DEBUG&&G("QueryEngine","Query:",hs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Uo()<=fe.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",hs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vn(n))):U.resolve())}Yi(e,n){if(a0(n))return U.resolve(null);let r=Vn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Ou(n,null,"F"),r=Vn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=de(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,Ou(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return a0(n)||i.isEqual(ae.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?U.resolve(null):(Uo()<=fe.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),hs(n)),this.rs(e,o,n,UD(i,-1)).next(a=>a))})}ts(e,n){let r=new lt(PS(e));return n.forEach((i,s)=>{Th(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Uo()<=fe.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",hs(n)),this.Ji.getDocumentsMatchingQuery(e,n,ni.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ve(_e),this._s=new mo(s=>og(s),ag),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tO(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function pO(t,e,n,r){return new fO(t,e,n,r)}async function XS(t,e){const n=le(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=de();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function mO(t,e){const n=le(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,f=d.keys();let g=U.resolve();return f.forEach(_=>{g=g.next(()=>h.getEntry(l,_)).next(v=>{const T=c.docVersions.get(_);xe(T!==null),v.version.compareTo(T)<0&&(d.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),h.addEntry(v)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=de();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function JS(t){const e=le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function gO(t,e){const n=le(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((h,d)=>{const f=i.get(d);if(!f)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,d)));let g=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(ut.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),i=i.insert(d,g),function(v,T,w){return v.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(f,g,h)&&a.push(n.Ur.updateTargetData(s,g))});let l=hr(),c=de();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(yO(s,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!r.isEqual(ae.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return U.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=i,s))}function yO(t,e,n){let r=de(),i=de();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=hr();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ae.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):G("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function _O(t,e){const n=le(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function vO(t,e){const n=le(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,U.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Dr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function kp(t,e,n){const r=le(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Tl(o))throw o;G("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function _0(t,e,n){const r=le(t);let i=ae.min(),s=de();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=le(l),f=d._s.get(h);return f!==void 0?U.resolve(d.os.get(f)):d.Ur.getTargetData(c,h)}(r,o,Vn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:ae.min(),n?s:de())).next(a=>(wO(r,cM(e),a),{documents:a,Ts:s})))}function wO(t,e,n){let r=t.us.get(e)||ae.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class v0{constructor(){this.activeTargetIds=mM()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class EO{constructor(){this.so=new v0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new v0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){G("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){G("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fc=null;function Yd(){return fc===null?fc=function(){return 268435456+Math.round(2147483648*Math.random())}():fc++,"0x"+fc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gt="WebChannelConnection";class IO extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=Yd(),l=this.xo(n,r.toUriEncodedString());G("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,i).then(h=>(G("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Gs("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=TO[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Yd();return new Promise((o,a)=>{const l=new dS;l.setWithCredentials(!0),l.listenOnce(fS.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Wc.NO_ERROR:const h=l.getResponseJson();G(gt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Wc.TIMEOUT:G(gt,`RPC '${e}' ${s} timed out`),a(new q(F.DEADLINE_EXCEEDED,"Request time out"));break;case Wc.HTTP_ERROR:const d=l.getStatus();if(G(gt,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const g=f==null?void 0:f.error;if(g&&g.status&&g.message){const _=function(T){const w=T.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(w)>=0?w:F.UNKNOWN}(g.status);a(new q(_,g.message))}else a(new q(F.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new q(F.UNAVAILABLE,"Connection failed."));break;default:re()}}finally{G(gt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);G(gt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=Yd(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=gS(),a=mS(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");G(gt,`Creating RPC '${e}' stream ${i}: ${h}`,l);const d=o.createWebChannel(h,l);let f=!1,g=!1;const _=new SO({Io:T=>{g?G(gt,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(f||(G(gt,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),G(gt,`RPC '${e}' stream ${i} sending:`,T),d.send(T))},To:()=>d.close()}),v=(T,w,x)=>{T.listen(w,b=>{try{x(b)}catch(R){setTimeout(()=>{throw R},0)}})};return v(d,Zo.EventType.OPEN,()=>{g||(G(gt,`RPC '${e}' stream ${i} transport opened.`),_.yo())}),v(d,Zo.EventType.CLOSE,()=>{g||(g=!0,G(gt,`RPC '${e}' stream ${i} transport closed`),_.So())}),v(d,Zo.EventType.ERROR,T=>{g||(g=!0,Gs(gt,`RPC '${e}' stream ${i} transport errored:`,T),_.So(new q(F.UNAVAILABLE,"The operation could not be completed")))}),v(d,Zo.EventType.MESSAGE,T=>{var w;if(!g){const x=T.data[0];xe(!!x);const b=x,R=b.error||((w=b[0])===null||w===void 0?void 0:w.error);if(R){G(gt,`RPC '${e}' stream ${i} received error:`,R);const N=R.status;let M=function(C){const I=He[C];if(I!==void 0)return zS(I)}(N),S=R.message;M===void 0&&(M=F.INTERNAL,S="Unknown error status: "+N+" with message "+R.message),g=!0,_.So(new q(M,S)),d.close()}else G(gt,`RPC '${e}' stream ${i} received:`,x),_.bo(x)}}),v(a,pS.STAT_EVENT,T=>{T.stat===yp.PROXY?G(gt,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===yp.NOPROXY&&G(gt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.wo()},0),_}}function Xd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kh(t){return new OM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&G("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ZS(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(ur(n.toString()),ur("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new q(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return G("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(G("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class bO extends eI{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=jM(this.serializer,e),r=function(s){if(!("targetChange"in s))return ae.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?jn(o.readTime):ae.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=bp(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Ep(l)?{documents:zM(s,l)}:{query:BM(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=WS(s,o.resumeToken);const c=Tp(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ae.min())>0){a.readTime=Vu(s,o.snapshotVersion.toTimestamp());const c=Tp(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=WM(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=bp(this.serializer),n.removeTarget=e,this.a_(n)}}class kO extends eI{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return xe(!!e.streamToken),this.lastStreamToken=e.streamToken,xe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){xe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=UM(e.writeResults,e.commitTime),r=jn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=bp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>FM(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new q(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Sp(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new q(F.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Sp(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class AO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ur(n),this.D_=!1):G("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{ns(this)&&(G("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=le(l);c.L_.add(4),await bl(c),c.q_.set("Unknown"),c.L_.delete(4),await Ch(c)}(this))})}),this.q_=new AO(r,i)}}async function Ch(t){if(ns(t))for(const e of t.B_)await e(!0)}async function bl(t){for(const e of t.B_)await e(!1)}function tI(t,e){const n=le(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),vg(n)?_g(n):go(n).r_()&&yg(n,e))}function gg(t,e){const n=le(t),r=go(n);n.N_.delete(e),r.r_()&&nI(n,e),n.N_.size===0&&(r.r_()?r.o_():ns(n)&&n.q_.set("Unknown"))}function yg(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}go(t).A_(e)}function nI(t,e){t.Q_.xe(e),go(t).R_(e)}function _g(t){t.Q_=new RM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),go(t).start(),t.q_.v_()}function vg(t){return ns(t)&&!go(t).n_()&&t.N_.size>0}function ns(t){return le(t).L_.size===0}function rI(t){t.Q_=void 0}async function RO(t){t.q_.set("Online")}async function NO(t){t.N_.forEach((e,n)=>{yg(t,e)})}async function DO(t,e){rI(t),vg(t)?(t.q_.M_(e),_g(t)):t.q_.set("Unknown")}async function MO(t,e,n){if(t.q_.set("Online"),e instanceof $S&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){G("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ju(t,r)}else if(e instanceof Kc?t.Q_.Ke(e):e instanceof BS?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ae.min()))try{const r=await JS(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(ut.EMPTY_BYTE_STRING,h.snapshotVersion)),nI(s,l);const d=new Dr(h.target,l,c,h.sequenceNumber);yg(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){G("RemoteStore","Failed to raise snapshot:",r),await ju(t,r)}}async function ju(t,e,n){if(!Tl(e))throw e;t.L_.add(1),await bl(t),t.q_.set("Offline"),n||(n=()=>JS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Ch(t)})}function iI(t,e){return e().catch(n=>ju(t,n,e))}async function Ah(t){const e=le(t),n=ii(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;OO(e);)try{const i=await _O(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,LO(e,i)}catch(i){await ju(e,i)}sI(e)&&oI(e)}function OO(t){return ns(t)&&t.O_.length<10}function LO(t,e){t.O_.push(e);const n=ii(t);n.r_()&&n.V_&&n.m_(e.mutations)}function sI(t){return ns(t)&&!ii(t).n_()&&t.O_.length>0}function oI(t){ii(t).start()}async function VO(t){ii(t).p_()}async function jO(t){const e=ii(t);for(const n of t.O_)e.m_(n.mutations)}async function FO(t,e,n){const r=t.O_.shift(),i=ug.from(r,e,n);await iI(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Ah(t)}async function UO(t,e){e&&ii(t).V_&&await async function(r,i){if(function(o){return CM(o)&&o!==F.ABORTED}(i.code)){const s=r.O_.shift();ii(r).s_(),await iI(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Ah(r)}}(t,e),sI(t)&&oI(t)}async function E0(t,e){const n=le(t);n.asyncQueue.verifyOperationInProgress(),G("RemoteStore","RemoteStore received new credentials");const r=ns(n);n.L_.add(3),await bl(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Ch(n)}async function zO(t,e){const n=le(t);e?(n.L_.delete(2),await Ch(n)):e||(n.L_.add(2),await bl(n),n.q_.set("Unknown"))}function go(t){return t.K_||(t.K_=function(n,r,i){const s=le(n);return s.w_(),new bO(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:RO.bind(null,t),Ro:NO.bind(null,t),mo:DO.bind(null,t),d_:MO.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),vg(t)?_g(t):t.q_.set("Unknown")):(await t.K_.stop(),rI(t))})),t.K_}function ii(t){return t.U_||(t.U_=function(n,r,i){const s=le(n);return s.w_(),new kO(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:VO.bind(null,t),mo:UO.bind(null,t),f_:jO.bind(null,t),g_:FO.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Ah(t)):(await t.U_.stop(),t.O_.length>0&&(G("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new wg(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Eg(t,e){if(ur("AsyncQueue",`${e}: ${t}`),Tl(t))return new q(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ee.comparator(n.key,r.key):(n,r)=>ee.comparator(n.key,r.key),this.keyedMap=ea(),this.sortedSet=new Ve(this.comparator)}static emptySet(e){return new Ls(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ls)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ls;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(){this.W_=new Ve(ee.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):re():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Zs{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Zs(e,n,Ls.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class $O{constructor(){this.queries=T0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=le(n),s=i.queries;i.queries=T0(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new q(F.ABORTED,"Firestore shutting down"))}}function T0(){return new mo(t=>AS(t),xh)}async function xg(t,e){const n=le(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new BO,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Eg(o,`Initialization of query '${hs(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Sg(n)}async function Tg(t,e){const n=le(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function WO(t,e){const n=le(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&Sg(n)}function HO(t,e,n){const r=le(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function Sg(t){t.Y_.forEach(e=>{e.next()})}var Cp,S0;(S0=Cp||(Cp={})).ea="default",S0.Cache="cache";class Ig{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Zs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Zs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Cp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e){this.key=e}}class lI{constructor(e){this.key=e}}class qO{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=de(),this.mutatedKeys=de(),this.Aa=PS(e),this.Ra=new Ls(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new x0,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,d)=>{const f=i.get(h),g=Th(this.query,d)?d:null,_=!!f&&this.mutatedKeys.has(f.key),v=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let T=!1;f&&g?f.data.isEqual(g.data)?_!==v&&(r.track({type:3,doc:g}),T=!0):this.ga(f,g)||(r.track({type:2,doc:g}),T=!0,(l&&this.Aa(g,l)>0||c&&this.Aa(g,c)<0)&&(a=!0)):!f&&g?(r.track({type:0,doc:g}),T=!0):f&&!g&&(r.track({type:1,doc:f}),T=!0,(l||c)&&(a=!0)),T&&(g?(o=o.add(g),s=v?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(g,_){const v=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re()}};return v(g)-v(_)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Zs(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new x0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=de(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new lI(r))}),this.da.forEach(r=>{e.has(r)||n.push(new aI(r))}),n}ba(e){this.Ta=e.Ts,this.da=de();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Zs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class KO{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class GO{constructor(e){this.key=e,this.va=!1}}class QO{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new mo(a=>AS(a),xh),this.Ma=new Map,this.xa=new Set,this.Oa=new Ve(ee.comparator),this.Na=new Map,this.La=new fg,this.Ba={},this.ka=new Map,this.qa=Js.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function YO(t,e,n=!0){const r=pI(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await cI(r,e,n,!0),i}async function XO(t,e){const n=pI(t);await cI(n,e,!0,!1)}async function cI(t,e,n,r){const i=await vO(t.localStore,Vn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await JO(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&tI(t.remoteStore,i),a}async function JO(t,e,n,r,i){t.Ka=(d,f,g)=>async function(v,T,w,x){let b=T.view.ma(w);b.ns&&(b=await _0(v.localStore,T.query,!1).then(({documents:S})=>T.view.ma(S,b)));const R=x&&x.targetChanges.get(T.targetId),N=x&&x.targetMismatches.get(T.targetId)!=null,M=T.view.applyChanges(b,v.isPrimaryClient,R,N);return b0(v,T.targetId,M.wa),M.snapshot}(t,d,f,g);const s=await _0(t.localStore,e,!0),o=new qO(e,s.Ts),a=o.ma(s.documents),l=Il.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);b0(t,n,c.wa);const h=new KO(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function ZO(t,e,n){const r=le(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!xh(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await kp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&gg(r.remoteStore,i.targetId),Ap(r,i.targetId)}).catch(xl)):(Ap(r,i.targetId),await kp(r.localStore,i.targetId,!0))}async function e2(t,e){const n=le(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),gg(n.remoteStore,r.targetId))}async function t2(t,e,n){const r=l2(t);try{const i=await function(o,a){const l=le(o),c=Je.now(),h=a.reduce((g,_)=>g.add(_.key),de());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let _=hr(),v=de();return l.cs.getEntries(g,h).next(T=>{_=T,_.forEach((w,x)=>{x.isValidDocument()||(v=v.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,_)).next(T=>{d=T;const w=[];for(const x of a){const b=TM(x,d.get(x.key).overlayedDocument);b!=null&&w.push(new fi(x.key,b,ES(b.value.mapValue),on.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,w,a)}).next(T=>{f=T;const w=T.applyToLocalDocumentSet(d,v);return l.documentOverlayCache.saveOverlays(g,T.batchId,w)})}).then(()=>({batchId:f.batchId,changes:NS(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Ve(_e)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await kl(r,i.changes),await Ah(r.remoteStore)}catch(i){const s=Eg(i,"Failed to persist write");n.reject(s)}}async function uI(t,e){const n=le(t);try{const r=await gO(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(xe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?xe(o.va):i.removedDocuments.size>0&&(xe(o.va),o.va=!1))}),await kl(n,r,e)}catch(r){await xl(r)}}function I0(t,e,n){const r=le(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=le(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const f of d.j_)f.Z_(a)&&(c=!0)}),c&&Sg(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function n2(t,e,n){const r=le(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ve(ee.comparator);o=o.insert(s,wt.newNoDocument(s,ae.min()));const a=de().add(s),l=new bh(ae.min(),new Map,new Ve(_e),o,a);await uI(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),bg(r)}else await kp(r.localStore,e,!1).then(()=>Ap(r,e,n)).catch(xl)}async function r2(t,e){const n=le(t),r=e.batch.batchId;try{const i=await mO(n.localStore,e);dI(n,r,null),hI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await kl(n,i)}catch(i){await xl(i)}}async function i2(t,e,n){const r=le(t);try{const i=await function(o,a){const l=le(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(xe(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);dI(r,e,n),hI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await kl(r,i)}catch(i){await xl(i)}}function hI(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function dI(t,e,n){const r=le(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Ap(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||fI(t,r)})}function fI(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(gg(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),bg(t))}function b0(t,e,n){for(const r of n)r instanceof aI?(t.La.addReference(r.key,e),s2(t,r)):r instanceof lI?(G("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||fI(t,r.key)):re()}function s2(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(G("SyncEngine","New document in limbo: "+n),t.xa.add(r),bg(t))}function bg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ee(Pe.fromString(e)),r=t.qa.next();t.Na.set(r,new GO(n)),t.Oa=t.Oa.insert(n,r),tI(t.remoteStore,new Dr(Vn(Eh(n.path)),r,"TargetPurposeLimboResolution",ng.oe))}}async function kl(t,e,n){const r=le(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=mg.Wi(l.targetId,c);s.push(d)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const h=le(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>U.forEach(c,f=>U.forEach(f.$i,g=>h.persistence.referenceDelegate.addReference(d,f.targetId,g)).next(()=>U.forEach(f.Ui,g=>h.persistence.referenceDelegate.removeReference(d,f.targetId,g)))))}catch(d){if(!Tl(d))throw d;G("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const g=h.os.get(f),_=g.snapshotVersion,v=g.withLastLimboFreeSnapshotVersion(_);h.os=h.os.insert(f,v)}}}(r.localStore,s))}async function o2(t,e){const n=le(t);if(!n.currentUser.isEqual(e)){G("SyncEngine","User change. New user:",e.toKey());const r=await XS(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new q(F.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await kl(n,r.hs)}}function a2(t,e){const n=le(t),r=n.Na.get(e);if(r&&r.va)return de().add(r.key);{let i=de();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function pI(t){const e=le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=uI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=a2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=n2.bind(null,e),e.Ca.d_=WO.bind(null,e.eventManager),e.Ca.$a=HO.bind(null,e.eventManager),e}function l2(t){const e=le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=r2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=i2.bind(null,e),e}class Fu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return pO(this.persistence,new dO,e.initialUser,this.serializer)}Ga(e){return new cO(pg.Zr,this.serializer)}Wa(e){return new EO}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fu.provider={build:()=>new Fu};class Pp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>I0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=o2.bind(null,this.syncEngine),await zO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new $O}()}createDatastore(e){const n=kh(e.databaseInfo.databaseId),r=function(s){return new IO(s)}(e.databaseInfo);return function(s,o,a,l){return new CO(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new PO(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>I0(this.syncEngine,n,0),function(){return w0.D()?new w0:new xO}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,h){const d=new QO(i,s,o,a,l,c);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=le(i);G("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await bl(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Pp.provider={build:()=>new Pp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ur("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=_t.UNAUTHENTICATED,this.clientId=_S.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{G("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(G("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Eg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Jd(t,e){t.asyncQueue.verifyOperationInProgress(),G("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await XS(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function k0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await u2(t);G("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>E0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>E0(e.remoteStore,i)),t._onlineComponents=e}async function u2(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G("FirestoreClient","Using user provided OfflineComponentProvider");try{await Jd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Gs("Error using user provided cache. Falling back to memory cache: "+n),await Jd(t,new Fu)}}else G("FirestoreClient","Using default OfflineComponentProvider"),await Jd(t,new Fu);return t._offlineComponents}async function mI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G("FirestoreClient","Using user provided OnlineComponentProvider"),await k0(t,t._uninitializedComponentsProvider._online)):(G("FirestoreClient","Using default OnlineComponentProvider"),await k0(t,new Pp))),t._onlineComponents}function h2(t){return mI(t).then(e=>e.syncEngine)}async function Uu(t){const e=await mI(t),n=e.eventManager;return n.onListen=YO.bind(null,e.syncEngine),n.onUnlisten=ZO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=XO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=e2.bind(null,e.syncEngine),n}function d2(t,e,n={}){const r=new rr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new kg({next:f=>{h.Za(),o.enqueueAndForget(()=>Tg(s,d));const g=f.docs.has(a);!g&&f.fromCache?c.reject(new q(F.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&l&&l.source==="server"?c.reject(new q(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new Ig(Eh(a.path),h,{includeMetadataChanges:!0,_a:!0});return xg(s,d)}(await Uu(t),t.asyncQueue,e,n,r)),r.promise}function f2(t,e,n={}){const r=new rr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new kg({next:f=>{h.Za(),o.enqueueAndForget(()=>Tg(s,d)),f.fromCache&&l.source==="server"?c.reject(new q(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new Ig(a,h,{includeMetadataChanges:!0,_a:!0});return xg(s,d)}(await Uu(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(t,e,n){if(!n)throw new q(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function p2(t,e,n,r){if(e===!0&&r===!0)throw new q(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function A0(t){if(!ee.isDocumentKey(t))throw new q(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function P0(t){if(ee.isDocumentKey(t))throw new q(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ph(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":re()}function $t(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ph(t);throw new q(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new q(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new q(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}p2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new R0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new R0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new RD;switch(r.type){case"firstParty":return new OD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=C0.get(n);r&&(G("ComponentProvider","Removing Datastore"),C0.delete(n),r.terminate())}(this),Promise.resolve()}}function m2(t,e,n,r={}){var i;const s=(t=$t(t,Rh))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Gs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=_t.MOCK_USER;else{a=qP(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new q(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new _t(c)}t._authCredentials=new ND(new yS(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new mr(this.firestore,e,this._query)}}class xt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xt(this.firestore,e,this._key)}}class Yr extends mr{constructor(e,n,r){super(e,n,Eh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new ee(e))}withConverter(e){return new Yr(this.firestore,e,this._path)}}function At(t,e,...n){if(t=Ze(t),yI("collection","path",e),t instanceof Rh){const r=Pe.fromString(e,...n);return P0(r),new Yr(t,null,r)}{if(!(t instanceof xt||t instanceof Yr))throw new q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Pe.fromString(e,...n));return P0(r),new Yr(t.firestore,null,r)}}function an(t,e,...n){if(t=Ze(t),arguments.length===1&&(e=_S.newId()),yI("doc","path",e),t instanceof Rh){const r=Pe.fromString(e,...n);return A0(r),new xt(t,null,new ee(r))}{if(!(t instanceof xt||t instanceof Yr))throw new q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Pe.fromString(e,...n));return A0(r),new xt(t.firestore,t instanceof Yr?t.converter:null,new ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ZS(this,"async_queue_retry"),this.Vu=()=>{const r=Xd();r&&G("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Xd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Xd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new rr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Tl(e))throw e;G("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw ur("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=wg.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&re()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function D0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class dr extends Rh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new N0,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new N0(e),this._firestoreClient=void 0,await e}}}function g2(t,e){const n=typeof t=="object"?t:CT(),r=typeof t=="string"?t:"(default)",i=Hm(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=WP("firestore");s&&m2(i,...s)}return i}function Nh(t){if(t._terminated)throw new q(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||y2(t),t._firestoreClient}function y2(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,h){return new GD(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,gI(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new c2(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new eo(ut.fromBase64String(e))}catch(n){throw new q(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new eo(ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return _e(this._lat,e._lat)||_e(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2=/^__.*__$/;class v2{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new fi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Sl(e,this.data,n,this.fieldTransforms)}}class _I{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new fi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function vI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re()}}class Pg{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Pg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return zu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(vI(this.Cu)&&_2.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class w2{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||kh(e)}Qu(e,n,r,i=!1){return new Pg({Cu:e,methodName:n,qu:r,path:ot.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Oh(t){const e=t._freezeSettings(),n=kh(t._databaseId);return new w2(t._databaseId,!!e.ignoreUndefinedProperties,n)}function wI(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Ng("Data must be an object, but it was:",o,r);const a=EI(r,o);let l,c;if(s.merge)l=new Gt(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const f=Rp(e,d,n);if(!o.contains(f))throw new q(F.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);TI(h,f)||h.push(f)}l=new Gt(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new v2(new Lt(a),l,c)}class Lh extends Mh{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Lh}}class Rg extends Mh{_toFieldTransform(e){return new vM(e.path,new tl)}isEqual(e){return e instanceof Rg}}function E2(t,e,n,r){const i=t.Qu(1,e,n);Ng("Data must be an object, but it was:",i,r);const s=[],o=Lt.empty();ts(r,(l,c)=>{const h=Dg(e,l,n);c=Ze(c);const d=i.Nu(h);if(c instanceof Lh)s.push(h);else{const f=Cl(c,d);f!=null&&(s.push(h),o.set(h,f))}});const a=new Gt(s);return new _I(o,a,i.fieldTransforms)}function x2(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[Rp(e,r,n)],l=[i];if(s.length%2!=0)throw new q(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(Rp(e,s[f])),l.push(s[f+1]);const c=[],h=Lt.empty();for(let f=a.length-1;f>=0;--f)if(!TI(c,a[f])){const g=a[f];let _=l[f];_=Ze(_);const v=o.Nu(g);if(_ instanceof Lh)c.push(g);else{const T=Cl(_,v);T!=null&&(c.push(g),h.set(g,T))}}const d=new Gt(c);return new _I(h,d,o.fieldTransforms)}function T2(t,e,n,r=!1){return Cl(n,t.Qu(r?4:3,e))}function Cl(t,e){if(xI(t=Ze(t)))return Ng("Unsupported field value:",e,t),EI(t,e);if(t instanceof Mh)return function(r,i){if(!vI(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Cl(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ze(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return gM(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Je.fromDate(r);return{timestampValue:Vu(i.serializer,s)}}if(r instanceof Je){const s=new Je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Vu(i.serializer,s)}}if(r instanceof Cg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof eo)return{bytesValue:WS(i.serializer,r._byteString)};if(r instanceof xt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:dg(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ag)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return lg(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Ph(r)}`)}(t,e)}function EI(t,e){const n={};return vS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ts(t,(r,i)=>{const s=Cl(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function xI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Je||t instanceof Cg||t instanceof eo||t instanceof xt||t instanceof Mh||t instanceof Ag)}function Ng(t,e,n){if(!xI(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Ph(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Rp(t,e,n){if((e=Ze(e))instanceof Dh)return e._internalPath;if(typeof e=="string")return Dg(t,e);throw zu("Field path arguments must be of type string or ",t,!1,void 0,n)}const S2=new RegExp("[~\\*/\\[\\]]");function Dg(t,e,n){if(e.search(S2)>=0)throw zu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Dh(...e.split("."))._internalPath}catch{throw zu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function zu(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new q(F.INVALID_ARGUMENT,a+t+l)}function TI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new I2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Vh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class I2 extends SI{data(){return super.data()}}function Vh(t,e){return typeof e=="string"?Dg(t,e):e instanceof Dh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Mg{}class Og extends Mg{}function wn(t,e,...n){let r=[];e instanceof Mg&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Lg).length,a=s.filter(l=>l instanceof jh).length;if(o>1||o>0&&a>0)throw new q(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class jh extends Og{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new jh(e,n,r)}_apply(e){const n=this._parse(e);return bI(e._query,n),new mr(e.firestore,e.converter,xp(e._query,n))}_parse(e){const n=Oh(e.firestore);return function(s,o,a,l,c,h,d){let f;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new q(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){O0(d,h);const g=[];for(const _ of d)g.push(M0(l,s,_));f={arrayValue:{values:g}}}else f=M0(l,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||O0(d,h),f=T2(a,o,d,h==="in"||h==="not-in");return Ke.create(c,h,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Xr(t,e,n){const r=e,i=Vh("where",t);return jh._create(i,r,n)}class Lg extends Mg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Lg(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Tn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)bI(o,l),o=xp(o,l)}(e._query,n),new mr(e.firestore,e.converter,xp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Vg extends Og{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Vg(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new q(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new q(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new el(s,o)}(e._query,this._field,this._direction);return new mr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new po(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function to(t,e="asc"){const n=e,r=Vh("orderBy",t);return Vg._create(r,n)}class jg extends Og{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new jg(e,n,r)}_apply(e){return new mr(e.firestore,e.converter,Ou(e._query,this._limit,this._limitType))}}function b2(t){return jg._create("limit",t,"F")}function M0(t,e,n){if(typeof(n=Ze(n))=="string"){if(n==="")throw new q(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!CS(e)&&n.indexOf("/")!==-1)throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Pe.fromString(n));if(!ee.isDocumentKey(r))throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return t0(t,new ee(r))}if(n instanceof xt)return t0(t,n._key);throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ph(n)}.`)}function O0(t,e){if(!Array.isArray(t)||t.length===0)throw new q(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bI(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new q(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class k2{convertValue(e,n="none"){switch(Gi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ki(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw re()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ts(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>ze(o.doubleValue));return new Ag(s)}convertGeoPoint(e){return new Cg(ze(e.latitude),ze(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ig(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Xa(e));default:return null}}convertTimestamp(e){const n=ri(e);return new Je(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Pe.fromString(e);xe(YS(r));const i=new Ja(r.get(1),r.get(3)),s=new ee(r.popFirst(5));return i.isEqual(n)||ur(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class CI extends SI{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Gc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Vh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Gc extends CI{data(e={}){return super.data(e)}}class AI{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new na(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Gc(this._firestore,this._userDataWriter,r.key,r,new na(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Gc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new na(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Gc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new na(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:C2(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function C2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bu(t){t=$t(t,xt);const e=$t(t.firestore,dr);return d2(Nh(e),t._key).then(n=>PI(e,t,n))}class Fg extends k2{constructor(e){super(),this.firestore=e}convertBytes(e){return new eo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,n)}}function Jr(t){t=$t(t,mr);const e=$t(t.firestore,dr),n=Nh(e),r=new Fg(e);return II(t._query),f2(n,t._query).then(i=>new AI(e,r,t,i))}function A2(t,e,n){t=$t(t,xt);const r=$t(t.firestore,dr),i=kI(t.converter,e);return Uh(r,[wI(Oh(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,on.none())])}function Ta(t,e,n,...r){t=$t(t,xt);const i=$t(t.firestore,dr),s=Oh(i);let o;return o=typeof(e=Ze(e))=="string"||e instanceof Dh?x2(s,"updateDoc",t._key,e,n,r):E2(s,"updateDoc",t._key,e),Uh(i,[o.toMutation(t._key,on.exists(!0))])}function P2(t){return Uh($t(t.firestore,dr),[new cg(t._key,on.none())])}function Fh(t,e){const n=$t(t.firestore,dr),r=an(t),i=kI(t.converter,e);return Uh(n,[wI(Oh(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,on.exists(!1))]).then(()=>r)}function L0(t,...e){var n,r,i;t=Ze(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||D0(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(D0(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,c,h;if(t instanceof xt)c=$t(t.firestore,dr),h=Eh(t._key.path),l={next:d=>{e[o]&&e[o](PI(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=$t(t,mr);c=$t(d.firestore,dr),h=d._query;const f=new Fg(c);l={next:g=>{e[o]&&e[o](new AI(c,f,d,g))},error:e[o+1],complete:e[o+2]},II(t._query)}return function(f,g,_,v){const T=new kg(v),w=new Ig(g,T,_);return f.asyncQueue.enqueueAndForget(async()=>xg(await Uu(f),w)),()=>{T.Za(),f.asyncQueue.enqueueAndForget(async()=>Tg(await Uu(f),w))}}(Nh(c),h,a,l)}function Uh(t,e){return function(r,i){const s=new rr;return r.asyncQueue.enqueueAndForget(async()=>t2(await h2(r),i,s)),s.promise}(Nh(t),e)}function PI(t,e,n){const r=n.docs.get(e._key),i=new Fg(t);return new CI(t,i,e._key,r,new na(n.hasPendingWrites,n.fromCache),e.converter)}function no(){return new Rg("serverTimestamp")}(function(e,n=!0){(function(i){fo=i})(uo),Ks(new $i("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new dr(new DD(r.getProvider("auth-internal")),new VD(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new q(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ja(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Qr(Yv,"4.7.3",e),Qr(Yv,"4.7.3","esm2017")})();const R2={apiKey:"AIzaSyB-FspOJriVdJjIHVADtrPgQO4IjUirLPM",authDomain:"greennest-eco.firebaseapp.com",projectId:"greennest-eco",storageBucket:"greennest-eco.firebasestorage.app",messagingSenderId:"793338899659",appId:"1:793338899659:web:a0bb658ca6fcfc7a02bf4e"},RI=kT(R2),pc=kD(RI),be=g2(RI),NI=O.createContext();function N2({children:t}){const[e,n]=O.useState(null),[r,i]=O.useState(null),[s,o]=O.useState(!0);O.useEffect(()=>mN(pc,async f=>{try{if(f){n(f);const g=an(be,"users",f.uid),_=await Bu(g);_.exists()&&i(_.data().role)}else n(null),i(null)}catch(g){console.error("Error fetching user data:",g)}finally{o(!1)}}),[]);const h={user:e,userRole:r,loading:s,authLoading:s,register:async(d,f,g,_="student")=>{try{const T=(await hN(pc,d,f)).user;try{await A2(an(be,"users",T.uid),{uid:T.uid,email:d,displayName:g,role:_,createdAt:new Date,orders:[]}),console.log("User document created successfully:",T.uid)}catch(w){throw console.error("Firestore error:",w),new Error(`Failed to save user data: ${w.message}`)}return n(T),i(_),T}catch(v){console.error("Registration error:",v);const T=new Error(v.message);throw T.code=v.code,T}},login:async(d,f)=>{try{const _=(await dN(pc,d,f)).user,v=an(be,"users",_.uid),T=await Bu(v);return T.exists()&&i(T.data().role),n(_),_}catch(g){const _=new Error(g.message);throw _.code=g.code,_}},logout:async()=>{try{await gN(pc),n(null),i(null)}catch(d){throw new Error(d.message)}},isAuthenticated:!!e};return p.jsx(NI.Provider,{value:h,children:t})}function It(){const t=O.useContext(NI);if(!t)throw new Error("useAuth must be used within AuthProvider");return t}const DI=O.createContext();function D2({children:t}){const[e,n]=O.useState([]);O.useEffect(()=>{const f=localStorage.getItem("greennest_cart");if(f)try{n(JSON.parse(f))}catch(g){console.error("Error loading cart from localStorage:",g)}},[]),O.useEffect(()=>{localStorage.setItem("greennest_cart",JSON.stringify(e))},[e]);const r=f=>{n(g=>g.find(v=>v.id===f.id)?g.map(v=>v.id===f.id?{...v,quantity:v.quantity+1}:v):[...g,{...f,quantity:1}])},i=f=>{n(g=>g.filter(_=>_.id!==f))},d={cart:e,addToCart:r,removeFromCart:i,updateQuantity:(f,g)=>{g<=0?i(f):n(_=>_.map(v=>v.id===f?{...v,quantity:g}:v))},updateItemPrice:(f,g)=>{n(_=>_.map(v=>v.id===f?{...v,price:g}:v))},clearCart:()=>{n([])},getTotalPrice:()=>e.reduce((f,g)=>f+g.price*g.quantity,0),getTotalItems:()=>e.reduce((f,g)=>f+g.quantity,0),getCartItemCount:()=>e.length};return p.jsx(DI.Provider,{value:d,children:t})}function zh(){const t=O.useContext(DI);if(!t)throw new Error("useCart must be used within CartProvider");return t}function MI(t){let e=t.code||"";if(!e&&t.message){const r=t.message.match(/\(auth\/([^)]+)\)/);r&&(e=`auth/${r[1]}`)}return{"auth/weak-password":"Password must be at least 6 characters long.","auth/email-already-in-use":"This email is already registered. Please log in or use a different email.","auth/invalid-email":"Please enter a valid email address.","auth/user-not-found":"No account found with this email address.","auth/wrong-password":"Incorrect password. Please try again.","auth/invalid-credential":"Invalid email or password. Please try again.","auth/too-many-requests":"Too many login attempts. Please try again later.","auth/user-disabled":"This account has been disabled.","auth/operation-not-allowed":"This operation is not allowed. Please contact support.","auth/invalid-password":"Password is invalid. Please try another password.","auth/account-exists-with-different-credential":"An account already exists with a different login method.","auth/credential-already-in-use":"This credential is already linked to another account.","auth/requires-recent-login":"Please log out and log back in to perform this action.","auth/network-request-failed":"Network error. Please check your internet connection.","auth/internal-error":"An internal error occurred. Please try again later."}[e]||t.message||"An error occurred. Please try again."}function OI({isOpen:t,onClose:e,onSwitchToSignup:n}){const[r,i]=O.useState(""),[s,o]=O.useState(""),[a,l]=O.useState(""),[c,h]=O.useState(!1),{login:d}=It(),f=Wt();Zu.useEffect(()=>(t?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open"),()=>document.body.classList.remove("modal-open")),[t]);const g=async v=>{v.preventDefault(),l(""),h(!0);try{await d(r,s),i(""),o(""),e(),f("/shop")}catch(T){l(MI(T)),h(!1)}},_=()=>{i(""),o(""),l(""),e()};return t?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"modal-overlay2",onClick:_}),p.jsx("div",{className:"login-modal2",children:p.jsxs("div",{className:"modal-content2",children:[p.jsx("button",{className:"modal-close",onClick:_,children:""}),a&&p.jsx("div",{className:"error-message",children:a}),p.jsxs("form",{onSubmit:g,children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"email",children:"Email Address"}),p.jsx("input",{type:"email",id:"email",value:r,onChange:v=>i(v.target.value),required:!0,placeholder:"Enter your email"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"password",children:"Password"}),p.jsx("input",{type:"password",id:"password",value:s,onChange:v=>o(v.target.value),required:!0,placeholder:"Enter your password"})]}),p.jsx("button",{type:"submit",disabled:c,className:"btn btn-primary btn-full",children:c?"Logging in...":"Login"})]}),p.jsxs("p",{className:"modal-footer",children:["Don't have an account? ",p.jsx("a",{href:"#",onClick:v=>{v.preventDefault(),_(),n==null||n()},children:"Sign up here"})]})]})})]}):null}function LI({isOpen:t,onClose:e,onSwitchToLogin:n}){const[r,i]=O.useState(""),[s,o]=O.useState(""),[a,l]=O.useState(""),[c,h]=O.useState(""),[d,f]=O.useState(!1),{register:g}=It(),_=Wt();Zu.useEffect(()=>(t?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open"),()=>document.body.classList.remove("modal-open")),[t]);const v=async w=>{w.preventDefault(),h(""),f(!0);try{await g(s,a,r,"user"),i(""),o(""),l(""),e(),_("/shop")}catch(x){h(MI(x)),f(!1)}},T=()=>{i(""),o(""),l(""),h(""),e()};return t?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"modal-overlay2",onClick:T}),p.jsx("div",{className:"login-modal2",children:p.jsxs("div",{className:"modal-content2",children:[p.jsx("button",{className:"modal-close",onClick:T,children:""}),c&&p.jsx("div",{className:"error-message",children:c}),p.jsxs("form",{onSubmit:v,children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"displayName",children:"Full Name"}),p.jsx("input",{type:"text",id:"displayName",value:r,onChange:w=>i(w.target.value),required:!0,placeholder:"Enter your name"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"email",children:"Email Address"}),p.jsx("input",{type:"email",id:"email",value:s,onChange:w=>o(w.target.value),required:!0,placeholder:"Enter your email"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"password",children:"Password"}),p.jsx("input",{type:"password",id:"password",value:a,onChange:w=>l(w.target.value),required:!0,placeholder:"Enter your password (min 6 characters)"})]}),p.jsx("button",{type:"submit",disabled:d,className:"btn btn-primary btn-full",children:d?"Creating account...":"Sign Up"})]}),p.jsxs("p",{className:"modal-footer",children:["Already have an account? ",p.jsx("a",{href:"#",onClick:w=>{w.preventDefault(),T(),n()},children:"Login here"})]})]})})]}):null}const M2={chair:"Chair",table:"Table",sofa:"Sofa"};function VI({isOpen:t,category:e,editingProduct:n,onClose:r,onProductAdded:i}){const[s,o]=O.useState(""),[a,l]=O.useState(""),[c,h]=O.useState(""),[d,f]=O.useState(null),[g,_]=O.useState(""),[v,T]=O.useState("10"),[w,x]=O.useState(!1),[b,R]=O.useState(""),[N,M]=O.useState(!1),[S,E]=O.useState(""),{user:C}=It();O.useEffect(()=>{e&&E(e),n?(o(n.name||""),l(n.price||""),h(n.imageUrl||""),_(n.description||""),T(n.stock||"10"),f(null)):I()},[n,t,e]);const I=()=>{o(""),l(""),_(""),T("10"),f(null),h(""),R("")},P=Y=>{const j=Y.target.files[0];j&&f(j)},D=async()=>{if(!d)return c;M(!0);const Y=new FormData;Y.append("file",d),Y.append("upload_preset","GreenNest");try{const j=await fetch("https://api.cloudinary.com/v1_1/db3trhp0a/image/upload",{method:"POST",body:Y});if(!j.ok)throw new Error("Failed to upload image");const Q=await j.json();return M(!1),Q.secure_url}catch(j){return R("Error uploading image: "+j.message),M(!1),null}},A=async Y=>{Y.preventDefault(),R(""),x(!0);try{if(!s||!a){R("Please fill in all required fields"),x(!1);return}if(!n&&!d){R("Please select an image for new products"),x(!1);return}if(!S){R("Category is required"),x(!1);return}let j=c;if(d&&(j=await D(),!j)){x(!1);return}const Q={name:s,price:parseFloat(a),imageUrl:j,description:g||"",stock:parseInt(v)||10,category:S,sellerId:C.uid};n?await Ta(an(be,"products",n.id),{...Q,updatedAt:no()}):await Fh(At(be,"products"),{...Q,createdAt:no()}),I(),i(),r()}catch(j){R("Error saving product: "+j.message),console.error("Error:",j)}finally{x(!1)}};return t?p.jsx("div",{className:"modal-overlay1",onClick:r,children:p.jsxs("div",{className:"modal-content1",onClick:Y=>Y.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsx("h2",{children:n?"Edit Product":`Add Product to ${M2[S]||"Category"}`}),p.jsx("button",{className:"modal-close",onClick:r,children:""})]}),b&&p.jsx("div",{className:"error-message",children:b}),p.jsxs("form",{onSubmit:A,className:"product-form",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"productName",children:"Product Name *"}),p.jsx("input",{type:"text",id:"productName",value:s,onChange:Y=>o(Y.target.value),placeholder:"Enter product name",required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"price",children:"Price *"}),p.jsx("input",{type:"number",id:"price",value:a,onChange:Y=>l(Y.target.value),placeholder:"Enter price",step:"0.01",min:"0",required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"category",children:"Category *"}),p.jsxs("select",{id:"category",value:S,onChange:Y=>E(Y.target.value),required:!0,children:[p.jsx("option",{value:"",children:"Select a category"}),p.jsx("option",{value:"chair",children:"Chair"}),p.jsx("option",{value:"table",children:"Table"}),p.jsx("option",{value:"sofa",children:"Sofa"})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"description",children:"Description"}),p.jsx("textarea",{id:"description",value:g,onChange:Y=>_(Y.target.value),placeholder:"Enter product description (optional)",rows:"3"})]}),p.jsxs("div",{className:"form-group",children:[p.jsxs("label",{htmlFor:"image",children:["Product Image ",!n&&"*"]}),p.jsx("input",{type:"file",id:"image",accept:"image/*",onChange:P,required:!n}),d&&p.jsxs("p",{className:"image-selected",children:[" Image selected: ",d.name]}),n&&c&&!d&&p.jsx("p",{className:"image-current",children:" Current image: Using existing"})]}),p.jsxs("div",{className:"form-actions",children:[p.jsx("button",{type:"submit",disabled:w||N,className:"btn btn-primary btn-full",children:w?"Saving...":N?"Uploading Image...":n?"Update Product":"Add Product"}),p.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary btn-full",children:"Cancel"})]})]})]})}):null}const O2="/assets/greennestlogo1-Photoroom-iWw439mU.png";function L2(){const{user:t,userRole:e}=It(),{getCartItemCount:n}=zh();Wt();const[r,i]=O.useState(!1),[s,o]=O.useState(!1),[a,l]=O.useState(!1),[c,h]=O.useState("chair");return p.jsx("header",{className:"header",children:p.jsxs("div",{className:"header-container",children:[p.jsx(Fo,{to:e==="admin"?"/dashboard":"/home",className:"header-logo",children:p.jsx("img",{src:O2,alt:"GreenNest Logo",className:"header-logo-img"})}),p.jsxs("nav",{className:"header-nav",children:[p.jsx(Fo,{to:"/shop",title:"View Shop",className:"nav-link",children:"Shop"}),t&&e==="admin"&&p.jsx("button",{onClick:()=>{h("chair"),l(!0)},className:"nav-link add-product-btn",title:"Add Product",children:"+ Add Product"}),t&&e!=="admin"&&p.jsxs(p.Fragment,{children:[p.jsxs(Fo,{to:"/cart",title:"View Cart",className:"nav-link",children:["Cart ",p.jsx("span",{className:"cart-count-header",children:n()})]}),p.jsx(Fo,{to:"/orders",title:"View Orders",className:"nav-link",children:"Orders"})]}),t&&p.jsx(Fo,{to:"/profile",title:"View Profile",className:"nav-link",children:"Profile"}),!t&&p.jsx("button",{onClick:()=>i(!0),className:"nav-link login-btn",title:"Login",children:"Login"})]}),!t&&p.jsxs(p.Fragment,{children:[p.jsx(OI,{isOpen:r,onClose:()=>i(!1),onSwitchToSignup:()=>{i(!1),o(!0)}}),p.jsx(LI,{isOpen:s,onClose:()=>o(!1),onSwitchToLogin:()=>{o(!1),i(!0)}})]}),t&&e==="admin"&&p.jsx(VI,{isOpen:a,category:c,editingProduct:null,onClose:()=>{l(!1),h("chair")},onProductAdded:()=>{l(!1),h("chair")}})]})})}function zo({children:t,requiredRole:e=null}){const{user:n,userRole:r,loading:i}=It();return i?p.jsx("div",{className:"loading",children:"Loading..."}):n?e&&r!==e?p.jsx(Ai,{to:"/"}):t:p.jsx(Ai,{to:"/login"})}function V0(){const t=Wt(),{user:e}=It(),[n,r]=O.useState(!1),[i,s]=O.useState(!1),o=()=>{e?t("/shop"):r(!0)};return p.jsxs("div",{className:"landing-page",children:[p.jsx("section",{className:"landing-hero",children:p.jsx("div",{className:"landing-hero-content",children:p.jsxs("div",{className:"hero-text",children:[p.jsx("h1",{children:"GreenNest"}),p.jsx("p",{className:"hero-subtitle",children:"Rooted in Strenth, Designed for Growth"}),p.jsx("button",{className:"hero-btn",onClick:o,children:e?"Shop Now":"Get Started"})]})})}),p.jsxs("section",{className:"cta-section",children:[p.jsx("h2",{children:"Why Choose GreenNest?"}),p.jsxs("div",{className:"cta-grid",children:[p.jsxs("div",{className:"cta-card",children:[p.jsx("div",{className:"cta-icon",children:""}),p.jsx("h3",{children:"Eco-Friendly"}),p.jsx("p",{children:"Renewable bamboo materials that reduce environmental impact."})]}),p.jsxs("div",{className:"cta-card",children:[p.jsx("div",{className:"cta-icon",children:""}),p.jsx("h3",{children:"Local Craftsmanship"}),p.jsx("p",{children:"Handcrafted by skilled Filipino artisans."})]}),p.jsxs("div",{className:"cta-card",children:[p.jsx("div",{className:"cta-icon",children:""}),p.jsx("h3",{children:"Durable Quality"}),p.jsx("p",{children:"Stronger than many hardwoods and built to last."})]})]})]}),p.jsxs("section",{className:"landing-features",children:[p.jsx("h2",{children:"How It Works"}),p.jsxs("div",{className:"features-container",children:[p.jsxs("div",{className:"feature-card",children:[p.jsxs("div",{className:"feature-image",children:[p.jsx("img",{src:"https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=500",alt:"Sustainable sourcing"}),p.jsx("span",{className:"feature-badge",children:"1"})]}),p.jsx("h3",{children:"Sustainable Sourcing"}),p.jsx("p",{children:"Responsibly harvested bamboo from trusted local farms."})]}),p.jsxs("div",{className:"feature-card",children:[p.jsxs("div",{className:"feature-image",children:[p.jsx("img",{src:"https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=500",alt:"Craftsmanship"}),p.jsx("span",{className:"feature-badge",children:"2"})]}),p.jsx("h3",{children:"Expert Crafting"}),p.jsx("p",{children:"Traditional and modern techniques combined."})]}),p.jsxs("div",{className:"feature-card",children:[p.jsxs("div",{className:"feature-image",children:[p.jsx("img",{src:"https://images.unsplash.com/photo-1555041469-a586c61ea9bc?w=500",alt:"Delivery"}),p.jsx("span",{className:"feature-badge",children:"3"})]}),p.jsx("h3",{children:"Delivered to You"}),p.jsx("p",{children:"Eco-friendly furniture straight to your home."})]})]})]}),p.jsx(OI,{isOpen:n,onClose:()=>r(!1),onSwitchToSignup:()=>{r(!1),s(!0)}}),p.jsx(LI,{isOpen:i,onClose:()=>s(!1),onSwitchToLogin:()=>{s(!1),r(!0)}})]})}function V2({isOpen:t,product:e,onClose:n}){const{user:r}=It(),{addToCart:i}=zh(),s=Wt(),[o,a]=O.useState(!1);if(!t||!e)return null;const l=()=>{if(!r){s("/login"),n();return}o||(a(!0),i(e),setTimeout(()=>{a(!1),n()},800))};return p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"product-details-blur",onClick:n}),p.jsxs("div",{className:"product-details-modal",children:[p.jsx("button",{className:"modal-close-btn",onClick:n,title:"Close",children:""}),p.jsxs("div",{className:"product-details-container",children:[p.jsx("div",{className:"product-details-image-section",children:e.imageUrl&&p.jsx("img",{src:e.imageUrl,alt:e.name,className:"product-details-image"})}),p.jsxs("div",{className:"product-details-info",children:[p.jsx("h2",{className:"product-details-name",children:e.name}),e.description&&p.jsx("p",{className:"product-details-description",children:e.description}),p.jsxs("div",{className:"product-details-price-section",children:[p.jsxs("p",{className:"product-details-price",children:["",e.price.toFixed(2)]}),e.stock!==void 0&&p.jsx("p",{className:"product-details-stock",children:e.stock>0?`In Stock: ${e.stock}`:"Out of Stock"})]}),p.jsx("div",{className:"product-details-actions",children:e.stock>0?p.jsx("button",{onClick:l,className:"btn-add-to-cart-modal",disabled:o,children:o?"Adding to Cart...":"Add to Cart"}):p.jsx("button",{className:"btn-add-to-cart-modal btn-disabled",disabled:!0,children:"Out of Stock"})})]})]})]})]})}function j2({product:t,onProductUpdated:e,onEditProduct:n}){const{user:r,userRole:i}=It();Wt();const[s,o]=O.useState(!1),[a,l]=O.useState(!1),c=async()=>{if(window.confirm("Are you sure you want to delete this product?"))try{o(!0),await P2(an(be,"products",t.id)),e&&e()}catch(h){console.error("Error deleting product:",h)}finally{o(!1)}};return p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"product-card",onClick:()=>i!=="admin"&&l(!0),children:[t.imageUrl&&p.jsx("img",{src:t.imageUrl,alt:t.name,className:"product-image"}),p.jsx("div",{className:"product-info",children:p.jsx("h3",{className:"product-name",children:t.name})}),i==="admin"&&p.jsxs("div",{className:"admin-actions",children:[p.jsx("button",{className:"btn btn-primary",onClick:h=>{h.stopPropagation(),n&&n(t)},title:"Edit product",children:"Edit"}),p.jsx("button",{className:"btn btn-danger",onClick:h=>{h.stopPropagation(),c()},disabled:s,title:"Delete product",children:s?"Deleting...":"Delete"})]})]}),p.jsx(V2,{isOpen:a,product:t,onClose:()=>l(!1)})]})}const F2=[{id:"all",name:"All"},{id:"chair",name:"Chair"},{id:"table",name:"Table"},{id:"sofa",name:"Sofa"}];function U2(){const[t,e]=O.useState([]),[n,r]=O.useState(!0),[i,s]=O.useState(""),[o,a]=O.useState(null),[l,c]=O.useState(""),[h,d]=O.useState(!1),[f,g]=O.useState(null),[_,v]=O.useState(null),{user:T,userRole:w}=It(),x=Wt();O.useEffect(()=>{b()},[o]);const b=async()=>{try{r(!0);let N;o&&o!=="all"?N=wn(At(be,"products"),Xr("category","==",o)):N=wn(At(be,"products"),to("createdAt","desc"));const M=await Jr(N),S=[];M.forEach(E=>{S.push({id:E.id,...E.data()})}),e(S),s("")}catch(N){console.error("Error fetching products:",N),s(""),e([])}finally{r(!1)}},R=t.filter(N=>N.name.toLowerCase().includes(l.toLowerCase()));return p.jsxs("div",{className:"product-page",children:[p.jsx("section",{className:"product-header",children:p.jsxs("div",{className:"product-header-content",children:[p.jsx("h1",{children:"Our Collection"}),p.jsx("p",{children:"Discover our premium bamboo furniture collection"})]})}),p.jsx("section",{className:"product-filter-section",children:p.jsxs("div",{className:"filter-container",children:[p.jsx("div",{className:"categories-wrapper",children:F2.map(N=>p.jsx("button",{className:`category-btn ${o===N.id?"active":""}`,onClick:()=>a(N.id),children:N.name},N.id))}),p.jsx("div",{className:"search-wrapper",children:p.jsx("input",{type:"text",placeholder:"Search products...",value:l,onChange:N=>c(N.target.value),className:"search-input-modern"})})]})}),p.jsxs("section",{className:"products-section-modern",children:[n&&p.jsx("div",{className:"loading",children:"Loading products..."}),i&&p.jsx("div",{className:"error-message",children:i}),!n&&R.length===0&&p.jsx("div",{className:"empty-state",children:p.jsx("p",{children:"No products available."})}),!n&&R.length>0&&p.jsx("div",{className:"products-grid-modern",children:R.map(N=>p.jsx(j2,{product:N,onViewDetails:M=>x(`/product/${M}`),onProductUpdated:()=>b(),onEditProduct:M=>{v(M),g(M.category),d(!0)}},N.id))})]}),p.jsx(VI,{isOpen:h,category:f,editingProduct:_,onClose:()=>{d(!1),v(null),g(null)},onProductAdded:()=>b()})]})}function z2(){const{cart:t,removeFromCart:e,updateQuantity:n,clearCart:r,getTotalPrice:i}=zh(),{user:s,userRole:o}=It(),a=Wt();return O.useEffect(()=>{s&&o==="admin"&&a("/admin",{replace:!0})},[s,o,a]),s?t.length===0?p.jsx("div",{className:"cart-container",children:p.jsx("div",{className:"cart-wrapper",children:p.jsxs("div",{className:"empty-cart",children:[p.jsx("h2",{children:"Your cart is waiting for its first item"}),p.jsx("button",{onClick:()=>a("/"),className:"btn btn-primary",children:"Go to Shop"})]})})}):p.jsx("div",{className:"cart-container",children:p.jsx("div",{className:"cart-wrapper",children:p.jsxs("div",{className:"cart-content",children:[p.jsx("div",{className:"cart-items",children:t.map(l=>p.jsxs("div",{className:"cart-item",children:[p.jsx("button",{className:"btn-remove-item",onClick:()=>e(l.id),title:"Remove from cart",children:""}),p.jsx("div",{className:"item-image",children:l.imageUrl&&p.jsx("img",{src:l.imageUrl,alt:l.name})}),p.jsxs("div",{className:"item-details",children:[p.jsx("h3",{className:"item-name",children:l.name}),p.jsxs("p",{className:"item-price",children:["",l.price.toFixed(2)]})]}),p.jsx("div",{className:"item-quantity",children:p.jsxs("div",{className:"quantity-control",children:[p.jsx("button",{className:"qty-btn",onClick:()=>n(l.id,l.quantity-1),disabled:l.quantity<=1,children:""}),p.jsx("input",{type:"number",value:l.quantity,className:"qty-input"}),p.jsx("button",{className:"qty-btn",onClick:()=>n(l.id,l.quantity+1),children:"+"})]})}),p.jsx("div",{className:"item-subtotal"})]},l.id))}),p.jsxs("div",{className:"cart-summary",children:[p.jsxs("div",{className:"summary-row total",children:[p.jsx("span",{children:"Total:"}),p.jsxs("span",{children:["",i().toFixed(2)]})]}),p.jsx("button",{className:"btn btn-primary btn-checkout",onClick:()=>a("/checkout"),children:"Proceed to Checkout"})]})]})})}):p.jsx("div",{className:"cart-container",children:p.jsx("div",{className:"cart-wrapper",children:p.jsxs("div",{className:"login-prompt",children:[p.jsx("h2",{children:"Please log in to view your cart"}),p.jsx("button",{onClick:()=>a("/login"),className:"btn btn-primary",children:"Go to Login"})]})})})}function jI({message:t,type:e="success",duration:n=3e3,onClose:r}){const[i,s]=O.useState(!0);return O.useEffect(()=>{const o=setTimeout(()=>{s(!1),r&&r()},n);return()=>clearTimeout(o)},[n,r]),i?p.jsx("div",{className:`toast toast-${e}`,children:p.jsxs("div",{className:"toast-content",children:[p.jsxs("span",{className:"toast-icon",children:[e==="success"&&"",e==="error"&&"",e==="info"&&""]}),p.jsx("p",{className:"toast-message",children:t})]})}):null}function B2(){const t=Wt(),{cart:e,getTotalPrice:n,clearCart:r,updateQuantity:i,updateItemPrice:s}=zh(),{user:o,userRole:a}=It(),[l,c]=O.useState(!1),[h,d]=O.useState([]),[f,g]=O.useState(!1),[_,v]=O.useState(!0),[T,w]=O.useState(""),[x,b]=O.useState("success");O.useEffect(()=>{o&&a==="admin"&&t("/",{replace:!0})},[o,a,t]),O.useEffect(()=>{const j=async()=>{if(e.length===0){v(!1);return}try{const Q=[];for(const X of e){const z=At(be,"products"),H=wn(z,Xr("__name__","==",X.id)),Z=await Jr(z);let ce=null;for(const ie of Z.docs)if(ie.id===X.id){ce={id:ie.id,...ie.data()};break}ce&&ce.price!==X.price&&Q.push({productId:X.id,productName:X.name,oldPrice:X.price,newPrice:ce.price,quantity:X.quantity,oldSubtotal:X.price*X.quantity,newSubtotal:ce.price*X.quantity})}Q.length>0&&(d(Q),g(!0))}catch(Q){console.error("Error checking price changes:",Q)}finally{v(!1)}};e.length>0&&j()},[e]);const[R,N]=O.useState(""),[M,S]=O.useState({address:"Campus Pickup",pickupLocation:"main-campus",notes:""}),E=h.reduce((j,Q)=>j+Q.oldSubtotal,0),I=h.reduce((j,Q)=>j+Q.newSubtotal,0)-E,P=()=>{h.forEach(j=>{s(j.productId,j.newPrice)}),d([]),g(!1)},D=()=>{t("/cart")};if(!o)return p.jsx("div",{className:"checkout-page",children:p.jsx("div",{className:"checkout-container",children:p.jsxs("div",{className:"empty-state",children:[p.jsx("p",{children:"Please log in to proceed with checkout"}),p.jsx("button",{onClick:()=>t("/login"),className:"login-btn",children:"Go to Login"})]})})});if(e.length===0)return p.jsx("div",{className:"checkout-page",children:p.jsx("div",{className:"checkout-container",children:p.jsxs("div",{className:"empty-state",children:[p.jsx("p",{children:"Your cart is empty. Add items to checkout"}),p.jsx("button",{onClick:()=>t("/"),className:"continue-shopping-btn",children:"Continue Shopping"})]})})});const A=async j=>{if(j.preventDefault(),N(""),e.length===0){N("Cart is empty");return}c(!0);try{const Q=e.map(H=>({productId:H.id,name:H.name,price:H.price,quantity:H.quantity,image:H.imageUrl||H.image})),X={userId:o.uid,userEmail:o.email,deliveryAddress:M.address,pickupLocation:M.pickupLocation,notes:M.notes,items:Q,totalAmount:n(),paymentMethod:"cash-on-pickup",status:"pending",createdAt:no()},z=await Fh(At(be,"orders"),X);r(),w(" Order placed successfully!"),b("success"),t("/orders")}catch(Q){console.error("Error placing order:",Q),N("Failed to place order. Please try again.")}finally{c(!1)}},Y=n();return p.jsxs(p.Fragment,{children:[T&&p.jsx(jI,{message:T,type:x,duration:3e3,onClose:()=>w("")}),l&&p.jsx("div",{className:"loading-overlay",children:p.jsxs("div",{className:"loading-content",children:[p.jsx("div",{className:"loading-spinner-large"}),p.jsx("h2",{children:"Processing Your Order"}),p.jsx("p",{children:"Please wait while we secure your order..."})]})}),f&&h.length>0&&p.jsx("div",{className:"modal-overlay",onClick:D,children:p.jsxs("div",{className:"modal-content price-warning-modal",onClick:j=>j.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsx("h3",{children:" Price Change Alert"}),p.jsx("button",{className:"modal-close",onClick:D,children:""})]}),p.jsxs("div",{className:"price-warning-content",children:[p.jsx("p",{children:"We've detected price changes in your cart since you added these items. Here's what changed:"}),p.jsx("div",{className:"price-changes-list",children:h.map(j=>p.jsxs("div",{className:"price-change-item",children:[p.jsxs("div",{className:"price-change-info",children:[p.jsx("p",{className:"product-name",children:j.productName}),p.jsxs("p",{className:"price-change-details",children:["Qty: ",j.quantity," | Old: ",j.oldPrice.toFixed(2),"  New: ",j.newPrice.toFixed(2)]})]}),p.jsxs("div",{className:"price-change-amount",children:[p.jsxs("p",{className:"old-subtotal",children:["",j.oldSubtotal.toFixed(2)]}),p.jsxs("p",{className:`new-subtotal ${j.newPrice>j.oldPrice?"price-increase":"price-decrease"}`,children:["",j.newSubtotal.toFixed(2)]})]})]},j.productId))}),p.jsxs("div",{className:"price-warning-summary",children:[p.jsxs("div",{className:"summary-row",children:[p.jsx("span",{children:"Original Total:"}),p.jsxs("span",{className:"old-price",children:["",(n()-I).toFixed(2)]})]}),p.jsxs("div",{className:"summary-row",children:[p.jsx("span",{children:"New Total:"}),p.jsxs("span",{className:`new-price ${I>0?"price-increase":"price-decrease"}`,children:["",n().toFixed(2)]})]}),I!==0&&p.jsxs("div",{className:"summary-row difference",children:[p.jsx("span",{children:"Difference:"}),p.jsxs("span",{className:I>0?"price-increase":"price-decrease",children:[I>0?"+":"","",I.toFixed(2)]})]})]}),p.jsxs("p",{className:"warning-message",children:["You will be charged based on the ",p.jsx("strong",{children:"current prices"})," shown above. Would you like to proceed or go back to review your cart?"]}),p.jsxs("div",{className:"modal-actions",children:[p.jsx("button",{className:"btn btn-secondary",onClick:D,children:"Back to Cart"}),p.jsx("button",{className:"btn btn-primary",onClick:P,children:"Proceed with Checkout"})]})]})]})}),p.jsx("div",{className:"checkout-page",children:p.jsxs("div",{className:"checkout-container",children:[_&&e.length>0&&p.jsx("div",{className:"loading-message",children:p.jsx("p",{children:"Verifying product prices..."})}),!_&&f&&h.length>0?null:p.jsxs("div",{className:"checkout-wrapper",children:[p.jsxs("div",{className:"order-summary-section",children:[p.jsx("button",{type:"button",className:"back-to-cart-btn",onClick:()=>t("/cart"),disabled:l,children:" Back to Cart"}),p.jsx("h2",{children:"Order Summary"}),p.jsx("div",{className:"summary-items",children:e.map(j=>p.jsxs("div",{className:"summary-item",children:[p.jsx("div",{className:"item-image",children:p.jsx("img",{src:j.imageUrl||j.image,alt:j.name})}),p.jsxs("div",{className:"item-details",children:[p.jsx("p",{className:"item-name",children:j.name}),p.jsxs("p",{className:"item-qty",children:["Qty: ",j.quantity]}),p.jsxs("p",{className:"item-price",children:["",(j.price*j.quantity).toFixed(2)]})]})]},j.id))}),p.jsx("div",{className:"summary-divider"}),p.jsxs("div",{className:"summary-totals",children:[p.jsxs("div",{className:"total-row",children:[p.jsx("span",{children:"Subtotal:"}),p.jsxs("span",{children:["",Y.toFixed(2)]})]}),p.jsxs("div",{className:"total-row",children:[p.jsx("span",{children:"Shipping:"}),p.jsx("span",{children:"Free"})]}),p.jsxs("div",{className:"total-row final",children:[p.jsx("span",{children:"Total:"}),p.jsxs("span",{children:["",Y.toFixed(2)]})]})]})]}),p.jsxs("div",{className:"checkout-form-section",children:[p.jsx("h1",{children:"Complete Your Order"}),R&&p.jsx("div",{className:"error-message",children:R}),p.jsxs("form",{onSubmit:A,children:[p.jsxs("div",{className:"form-section1",children:[p.jsx("h3",{children:"Payment Method"}),p.jsxs("div",{className:"payment-option selected",children:[p.jsx("input",{type:"radio",name:"payment",value:"cash",checked:!0,readOnly:!0}),p.jsxs("div",{className:"payment-info",children:[p.jsx("p",{className:"payment-name",children:" Cash on Pickup"}),p.jsx("p",{className:"payment-description",children:"Pay when you pick up your order at campus"})]})]})]}),p.jsx("button",{type:"submit",className:"place-order-btn",disabled:l,children:l?p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"spinner"}),p.jsx("span",{children:"Processing..."})]}):p.jsxs(p.Fragment,{children:[p.jsx("span",{children:"Place Order"}),p.jsxs("span",{className:"btn-amount",children:["",Y.toFixed(2)]})]})})]})]})]})]})})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Al(t){return t+.5|0}const Mr=(t,e,n)=>Math.max(Math.min(t,n),e);function ra(t){return Mr(Al(t*2.55),0,255)}function Zr(t){return Mr(Al(t*255),0,255)}function Gn(t){return Mr(Al(t/2.55)/100,0,1)}function j0(t){return Mr(Al(t*100),0,100)}const Zt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Np=[..."0123456789ABCDEF"],$2=t=>Np[t&15],W2=t=>Np[(t&240)>>4]+Np[t&15],mc=t=>(t&240)>>4===(t&15),H2=t=>mc(t.r)&&mc(t.g)&&mc(t.b)&&mc(t.a);function q2(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Zt[t[1]]*17,g:255&Zt[t[2]]*17,b:255&Zt[t[3]]*17,a:e===5?Zt[t[4]]*17:255}:(e===7||e===9)&&(n={r:Zt[t[1]]<<4|Zt[t[2]],g:Zt[t[3]]<<4|Zt[t[4]],b:Zt[t[5]]<<4|Zt[t[6]],a:e===9?Zt[t[7]]<<4|Zt[t[8]]:255})),n}const K2=(t,e)=>t<255?e(t):"";function G2(t){var e=H2(t)?$2:W2;return t?"#"+e(t.r)+e(t.g)+e(t.b)+K2(t.a,e):void 0}const Q2=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function FI(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function Y2(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function X2(t,e,n){const r=FI(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function J2(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function Ug(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,c,h;return s!==o&&(h=s-o,c=a>.5?h/(2-s-o):h/(s+o),l=J2(n,r,i,h,s),l=l*60+.5),[l|0,c||0,a]}function zg(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Zr)}function Bg(t,e,n){return zg(FI,t,e,n)}function Z2(t,e,n){return zg(X2,t,e,n)}function eL(t,e,n){return zg(Y2,t,e,n)}function UI(t){return(t%360+360)%360}function tL(t){const e=Q2.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?ra(+e[5]):Zr(+e[5]));const i=UI(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=Z2(i,s,o):e[1]==="hsv"?r=eL(i,s,o):r=Bg(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function nL(t,e){var n=Ug(t);n[0]=UI(n[0]+e),n=Bg(n),t.r=n[0],t.g=n[1],t.b=n[2]}function rL(t){if(!t)return;const e=Ug(t),n=e[0],r=j0(e[1]),i=j0(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${Gn(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const F0={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},U0={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function iL(){const t={},e=Object.keys(U0),n=Object.keys(F0);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,F0[s]);s=parseInt(U0[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let gc;function sL(t){gc||(gc=iL(),gc.transparent=[0,0,0,0]);const e=gc[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const oL=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function aL(t){const e=oL.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?ra(o):Mr(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?ra(r):Mr(r,0,255)),i=255&(e[4]?ra(i):Mr(i,0,255)),s=255&(e[6]?ra(s):Mr(s,0,255)),{r,g:i,b:s,a:n}}}function lL(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Gn(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Zd=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,cs=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function cL(t,e,n){const r=cs(Gn(t.r)),i=cs(Gn(t.g)),s=cs(Gn(t.b));return{r:Zr(Zd(r+n*(cs(Gn(e.r))-r))),g:Zr(Zd(i+n*(cs(Gn(e.g))-i))),b:Zr(Zd(s+n*(cs(Gn(e.b))-s))),a:t.a+n*(e.a-t.a)}}function yc(t,e,n){if(t){let r=Ug(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=Bg(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function zI(t,e){return t&&Object.assign(e||{},t)}function z0(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Zr(t[3]))):(e=zI(t,{r:0,g:0,b:0,a:1}),e.a=Zr(e.a)),e}function uL(t){return t.charAt(0)==="r"?aL(t):tL(t)}class il{constructor(e){if(e instanceof il)return e;const n=typeof e;let r;n==="object"?r=z0(e):n==="string"&&(r=q2(e)||sL(e)||uL(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=zI(this._rgb);return e&&(e.a=Gn(e.a)),e}set rgb(e){this._rgb=z0(e)}rgbString(){return this._valid?lL(this._rgb):void 0}hexString(){return this._valid?G2(this._rgb):void 0}hslString(){return this._valid?rL(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=cL(this._rgb,e._rgb,n)),this}clone(){return new il(this.rgb)}alpha(e){return this._rgb.a=Zr(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Al(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return yc(this._rgb,2,e),this}darken(e){return yc(this._rgb,2,-e),this}saturate(e){return yc(this._rgb,1,e),this}desaturate(e){return yc(this._rgb,1,-e),this}rotate(e){return nL(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function $n(){}const hL=(()=>{let t=0;return()=>t++})();function Se(t){return t==null}function Qe(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ge(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function un(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function kn(t,e){return un(t)?t:e}function ue(t,e){return typeof t>"u"?e:t}const dL=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,BI=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Ae(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function ve(t,e,n,r){let i,s,o;if(Qe(t))for(s=t.length,i=0;i<s;i++)e.call(n,t[i],i);else if(ge(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function $u(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function Wu(t){if(Qe(t))return t.map(Wu);if(ge(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=Wu(t[n[i]]);return e}return t}function $I(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function fL(t,e,n,r){if(!$I(t))return;const i=e[t],s=n[t];ge(i)&&ge(s)?sl(i,s,r):e[t]=Wu(s)}function sl(t,e,n){const r=Qe(e)?e:[e],i=r.length;if(!ge(t))return t;n=n||{};const s=n.merger||fL;let o;for(let a=0;a<i;++a){if(o=r[a],!ge(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)s(l[c],t,o,n)}return t}function Sa(t,e){return sl(t,e,{merger:pL})}function pL(t,e,n){if(!$I(t))return;const r=e[t],i=n[t];ge(r)&&ge(i)?Sa(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Wu(i))}const B0={"":t=>t,x:t=>t.x,y:t=>t.y};function mL(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function gL(t){const e=mL(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Qi(t,e){return(B0[e]||(B0[e]=gL(e)))(t)}function $g(t){return t.charAt(0).toUpperCase()+t.slice(1)}const ol=t=>typeof t<"u",si=t=>typeof t=="function",$0=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function yL(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const we=Math.PI,Ue=2*we,_L=Ue+we,Hu=Number.POSITIVE_INFINITY,vL=we/180,Xe=we/2,Ei=we/4,W0=we*2/3,WI=Math.log10,Fn=Math.sign;function Ia(t,e,n){return Math.abs(t-e)<n}function H0(t){const e=Math.round(t);t=Ia(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(WI(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function wL(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function EL(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function qu(t){return!EL(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function xL(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function TL(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function er(t){return t*(we/180)}function SL(t){return t*(180/we)}function q0(t){if(!un(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function HI(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*we&&(s+=Ue),{angle:s,distance:i}}function Dp(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function IL(t,e){return(t-e+_L)%Ue-we}function gn(t){return(t%Ue+Ue)%Ue}function al(t,e,n,r){const i=gn(t),s=gn(e),o=gn(n),a=gn(s-i),l=gn(o-i),c=gn(i-s),h=gn(i-o);return i===s||i===o||r&&s===o||a>l&&c<h}function Ft(t,e,n){return Math.max(e,Math.min(n,t))}function bL(t){return Ft(t,-32768,32767)}function Or(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function Wg(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const Mp=(t,e,n,r)=>Wg(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),kL=(t,e,n)=>Wg(t,n,r=>t[r][e]>=n);function CL(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const qI=["push","pop","shift","splice","unshift"];function AL(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),qI.forEach(n=>{const r="_onData"+$g(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function K0(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(qI.forEach(s=>{delete t[s]}),delete t._chartjs)}function KI(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const GI=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function QI(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,GI.call(window,()=>{r=!1,t.apply(e,n)}))}}function PL(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const Hg=t=>t==="start"?"left":t==="end"?"right":"center",yt=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,RL=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e,_c=t=>t===0||t===1,G0=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Ue/n)),Q0=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Ue/n)+1,ba={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Xe)+1,easeOutSine:t=>Math.sin(t*Xe),easeInOutSine:t=>-.5*(Math.cos(we*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>_c(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>_c(t)?t:G0(t,.075,.3),easeOutElastic:t=>_c(t)?t:Q0(t,.075,.3),easeInOutElastic(t){return _c(t)?t:t<.5?.5*G0(t*2,.1125,.45):.5+.5*Q0(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-ba.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?ba.easeInBounce(t*2)*.5:ba.easeOutBounce(t*2-1)*.5+.5};function qg(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Y0(t){return qg(t)?t:new il(t)}function ef(t){return qg(t)?t:new il(t).saturate(.5).darken(.1).hexString()}const NL=["x","y","borderWidth","radius","tension"],DL=["color","borderColor","backgroundColor"];function ML(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:DL},numbers:{type:"number",properties:NL}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function OL(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const X0=new Map;function LL(t,e){e=e||{};const n=t+JSON.stringify(e);let r=X0.get(n);return r||(r=new Intl.NumberFormat(t,e),X0.set(n,r)),r}function Kg(t,e,n){return LL(e,n).format(t)}const VL={values(t){return Qe(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=jL(t,n)}const o=WI(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Kg(t,r,l)}};function jL(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var YI={formatters:VL};function FL(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:YI.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Yi=Object.create(null),Op=Object.create(null);function ka(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function tf(t,e,n){return typeof e=="string"?sl(ka(t,e),n):sl(ka(t,""),e)}class UL{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>ef(i.backgroundColor),this.hoverBorderColor=(r,i)=>ef(i.borderColor),this.hoverColor=(r,i)=>ef(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return tf(this,e,n)}get(e){return ka(this,e)}describe(e,n){return tf(Op,e,n)}override(e,n){return tf(Yi,e,n)}route(e,n,r,i){const s=ka(this,e),o=ka(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return ge(l)?Object.assign({},c,l):ue(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var $e=new UL({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[ML,OL,FL]);function zL(t){return!t||Se(t.size)||Se(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function J0(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function xi(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function Z0(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Lp(t,e,n,r){XI(t,e,n,r,null)}function XI(t,e,n,r,i){let s,o,a,l,c,h,d,f;const g=e.pointStyle,_=e.rotation,v=e.radius;let T=(_||0)*vL;if(g&&typeof g=="object"&&(s=g.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(T),t.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),t.restore();return}if(!(isNaN(v)||v<=0)){switch(t.beginPath(),g){default:i?t.ellipse(n,r,i/2,v,0,0,Ue):t.arc(n,r,v,0,Ue),t.closePath();break;case"triangle":h=i?i/2:v,t.moveTo(n+Math.sin(T)*h,r-Math.cos(T)*v),T+=W0,t.lineTo(n+Math.sin(T)*h,r-Math.cos(T)*v),T+=W0,t.lineTo(n+Math.sin(T)*h,r-Math.cos(T)*v),t.closePath();break;case"rectRounded":c=v*.516,l=v-c,o=Math.cos(T+Ei)*l,d=Math.cos(T+Ei)*(i?i/2-c:l),a=Math.sin(T+Ei)*l,f=Math.sin(T+Ei)*(i?i/2-c:l),t.arc(n-d,r-a,c,T-we,T-Xe),t.arc(n+f,r-o,c,T-Xe,T),t.arc(n+d,r+a,c,T,T+Xe),t.arc(n-f,r+o,c,T+Xe,T+we),t.closePath();break;case"rect":if(!_){l=Math.SQRT1_2*v,h=i?i/2:l,t.rect(n-h,r-l,2*h,2*l);break}T+=Ei;case"rectRot":d=Math.cos(T)*(i?i/2:v),o=Math.cos(T)*v,a=Math.sin(T)*v,f=Math.sin(T)*(i?i/2:v),t.moveTo(n-d,r-a),t.lineTo(n+f,r-o),t.lineTo(n+d,r+a),t.lineTo(n-f,r+o),t.closePath();break;case"crossRot":T+=Ei;case"cross":d=Math.cos(T)*(i?i/2:v),o=Math.cos(T)*v,a=Math.sin(T)*v,f=Math.sin(T)*(i?i/2:v),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o);break;case"star":d=Math.cos(T)*(i?i/2:v),o=Math.cos(T)*v,a=Math.sin(T)*v,f=Math.sin(T)*(i?i/2:v),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o),T+=Ei,d=Math.cos(T)*(i?i/2:v),o=Math.cos(T)*v,a=Math.sin(T)*v,f=Math.sin(T)*(i?i/2:v),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o);break;case"line":o=i?i/2:Math.cos(T)*v,a=Math.sin(T)*v,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(T)*(i?i/2:v),r+Math.sin(T)*v);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function ll(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Gg(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Qg(t){t.restore()}function BL(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function $L(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function WL(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Se(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function HL(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,h=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,h),t.lineTo(a,h),t.stroke()}}function qL(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function cl(t,e,n,r,i,s={}){const o=Qe(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,WL(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&qL(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),Se(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),HL(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function Ku(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*we,we,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,we,Xe,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,Xe,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-Xe,!0),t.lineTo(n+o.topLeft,r)}const KL=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,GL=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function QL(t,e){const n=(""+t).match(KL);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const YL=t=>+t||0;function Yg(t,e){const n={},r=ge(e),i=r?Object.keys(e):e,s=ge(t)?r?o=>ue(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=YL(s(o));return n}function JI(t){return Yg(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Vs(t){return Yg(t,["topLeft","topRight","bottomLeft","bottomRight"])}function hn(t){const e=JI(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Et(t,e){t=t||{},e=e||$e.font;let n=ue(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=ue(t.style,e.style);r&&!(""+r).match(GL)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:ue(t.family,e.family),lineHeight:QL(ue(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:ue(t.weight,e.weight),string:""};return i.string=zL(i),i}function vc(t,e,n,r){let i,s,o;for(i=0,s=t.length;i<s;++i)if(o=t[i],o!==void 0&&o!==void 0)return o}function XL(t,e,n){const{min:r,max:i}=t,s=BI(e,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function rs(t,e){return Object.assign(Object.create(t),e)}function Xg(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=nb("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>Xg([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return eb(a,l,()=>sV(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return tw(a).includes(l)},ownKeys(a){return tw(a)},set(a,l,c){const h=a._storage||(a._storage=i());return a[l]=h[l]=c,delete a._keys,!0}})}function ro(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:ZI(t,r),setContext:s=>ro(t,s,n,r),override:s=>ro(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return eb(s,o,()=>ZL(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function ZI(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:si(n)?n:()=>n,isIndexable:si(r)?r:()=>r}}const JL=(t,e)=>t?t+$g(e):e,Jg=(t,e)=>ge(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function eb(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function ZL(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return si(a)&&o.isScriptable(e)&&(a=eV(e,a,t,n)),Qe(a)&&a.length&&(a=tV(e,a,t,o.isIndexable)),Jg(e,a)&&(a=ro(a,i,s&&s[e],o)),a}function eV(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);return a.delete(t),Jg(t,l)&&(l=Zg(i._scopes,i,t,l)),l}function tV(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(ge(e[0])){const l=e,c=i._scopes.filter(h=>h!==l);e=[];for(const h of l){const d=Zg(c,i,t,h);e.push(ro(d,s,o&&o[t],a))}}return e}function tb(t,e,n){return si(t)?t(e,n):t}const nV=(t,e)=>t===!0?e:typeof t=="string"?Qi(e,t):void 0;function rV(t,e,n,r,i){for(const s of e){const o=nV(n,s);if(o){t.add(o);const a=tb(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function Zg(t,e,n,r){const i=e._rootScopes,s=tb(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=ew(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=ew(a,o,s,l,r),l===null)?!1:Xg(Array.from(a),[""],i,s,()=>iV(e,n,r))}function ew(t,e,n,r,i){for(;n;)n=rV(t,e,n,r,i);return n}function iV(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return Qe(i)&&ge(n)?n:i||{}}function sV(t,e,n,r){let i;for(const s of e)if(i=nb(JL(s,t),n),typeof i<"u")return Jg(t,i)?Zg(n,r,t,i):i}function nb(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function tw(t){let e=t._keys;return e||(e=t._keys=oV(t._scopes)),e}function oV(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}const aV=Number.EPSILON||1e-14,io=(t,e)=>e<t.length&&!t[e].skip&&t[e],rb=t=>t==="x"?"y":"x";function lV(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=Dp(s,i),l=Dp(o,s);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const d=r*c,f=r*h;return{previous:{x:s.x-d*(o.x-i.x),y:s.y-d*(o.y-i.y)},next:{x:s.x+f*(o.x-i.x),y:s.y+f*(o.y-i.y)}}}function cV(t,e,n){const r=t.length;let i,s,o,a,l,c=io(t,0);for(let h=0;h<r-1;++h)if(l=c,c=io(t,h+1),!(!l||!c)){if(Ia(e[h],0,aV)){n[h]=n[h+1]=0;continue}i=n[h]/e[h],s=n[h+1]/e[h],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[h]=i*o*e[h],n[h+1]=s*o*e[h])}}function uV(t,e,n="x"){const r=rb(n),i=t.length;let s,o,a,l=io(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=io(t,c+1),!a)continue;const h=a[n],d=a[r];o&&(s=(h-o[n])/3,a[`cp1${n}`]=h-s,a[`cp1${r}`]=d-s*e[c]),l&&(s=(l[n]-h)/3,a[`cp2${n}`]=h+s,a[`cp2${r}`]=d+s*e[c])}}function hV(t,e="x"){const n=rb(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=io(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=io(t,o+1),!!l){if(c){const h=c[e]-l[e];i[o]=h!==0?(c[n]-l[n])/h:0}s[o]=a?c?Fn(i[o-1])!==Fn(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}cV(t,i,s),uV(t,s,e)}function wc(t,e,n){return Math.max(Math.min(t,n),e)}function dV(t,e){let n,r,i,s,o,a=ll(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&ll(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=wc(i.cp1x,e.left,e.right),i.cp1y=wc(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=wc(i.cp2x,e.left,e.right),i.cp2y=wc(i.cp2y,e.top,e.bottom)))}function fV(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")hV(t,i);else{let c=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=lV(c,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&dV(t,n)}function ey(){return typeof window<"u"&&typeof document<"u"}function ty(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Gu(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const Bh=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function pV(t,e){return Bh(t).getPropertyValue(e)}const mV=["top","right","bottom","left"];function Vi(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=mV[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const gV=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function yV(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(gV(i,s,t.target))a=i,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function ki(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=Bh(n),s=i.boxSizing==="border-box",o=Vi(i,"padding"),a=Vi(i,"border","width"),{x:l,y:c,box:h}=yV(t,n),d=o.left+(h&&a.left),f=o.top+(h&&a.top);let{width:g,height:_}=e;return s&&(g-=o.width+a.width,_-=o.height+a.height),{x:Math.round((l-d)/g*n.width/r),y:Math.round((c-f)/_*n.height/r)}}function _V(t,e,n){let r,i;if(e===void 0||n===void 0){const s=t&&ty(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=Bh(s),l=Vi(a,"border","width"),c=Vi(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=Gu(a.maxWidth,s,"clientWidth"),i=Gu(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||Hu,maxHeight:i||Hu}}const Lr=t=>Math.round(t*10)/10;function vV(t,e,n,r){const i=Bh(t),s=Vi(i,"margin"),o=Gu(i.maxWidth,t,"clientWidth")||Hu,a=Gu(i.maxHeight,t,"clientHeight")||Hu,l=_V(t,e,n);let{width:c,height:h}=l;if(i.boxSizing==="content-box"){const f=Vi(i,"border","width"),g=Vi(i,"padding");c-=g.width+f.width,h-=g.height+f.height}return c=Math.max(0,c-s.width),h=Math.max(0,r?c/r:h-s.height),c=Lr(Math.min(c,o,l.maxWidth)),h=Lr(Math.min(h,a,l.maxHeight)),c&&!h&&(h=Lr(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&h>l.height&&(h=l.height,c=Lr(Math.floor(h*r))),{width:c,height:h}}function nw(t,e,n){const r=e||1,i=Lr(t.height*r),s=Lr(t.width*r);t.height=Lr(t.height),t.width=Lr(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const wV=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};ey()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function rw(t,e){const n=pV(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Ci(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function EV(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function xV(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=Ci(t,i,n),a=Ci(i,s,n),l=Ci(s,e,n),c=Ci(o,a,n),h=Ci(a,l,n);return Ci(c,h,n)}const TV=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},SV=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function js(t,e,n){return t?TV(e,n):SV()}function ib(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function sb(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function ob(t){return t==="angle"?{between:al,compare:IL,normalize:gn}:{between:Or,compare:(e,n)=>e-n,normalize:e=>e}}function iw({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function IV(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=ob(r),l=e.length;let{start:c,end:h,loop:d}=t,f,g;if(d){for(c+=l,h+=l,f=0,g=l;f<g&&o(a(e[c%l][r]),i,s);++f)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:d,style:t.style}}function bV(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=ob(r),{start:h,end:d,loop:f,style:g}=IV(t,e,n),_=[];let v=!1,T=null,w,x,b;const R=()=>l(i,b,w)&&a(i,b)!==0,N=()=>a(s,w)===0||l(s,b,w),M=()=>v||R(),S=()=>!v||N();for(let E=h,C=h;E<=d;++E)x=e[E%o],!x.skip&&(w=c(x[r]),w!==b&&(v=l(w,i,s),T===null&&M()&&(T=a(w,i)===0?E:C),T!==null&&S()&&(_.push(iw({start:T,end:E,loop:f,count:o,style:g})),T=null),C=E,b=w));return T!==null&&_.push(iw({start:T,end:d,loop:f,count:o,style:g})),_}function kV(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=bV(r[i],t.points,e);s.length&&n.push(...s)}return n}function CV(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function AV(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function PV(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=CV(n,i,s,r);if(r===!0)return sw(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+i:a,c=!!t._fullLoop&&o===0&&a===i-1;return sw(t,AV(n,o,l,c),n,e)}function sw(t,e,n,r){return!r||!r.setContext||!n?e:RV(t,e,n,r)}function RV(t,e,n,r){const i=t._chart.getContext(),s=ow(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let h=s,d=e[0].start,f=d;function g(_,v,T,w){const x=a?-1:1;if(_!==v){for(_+=l;n[_%l].skip;)_-=x;for(;n[v%l].skip;)v+=x;_%l!==v%l&&(c.push({start:_%l,end:v%l,loop:T,style:w}),h=w,d=v%l)}}for(const _ of e){d=a?d:_.start;let v=n[d%l],T;for(f=d+1;f<=_.end;f++){const w=n[f%l];T=ow(r.setContext(rs(i,{type:"segment",p0:v,p1:w,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),NV(T,h)&&g(d,f-1,_.loop,h),v=w,h=T}d<f-1&&g(d,f-1,_.loop,h)}return c}function ow(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function NV(t,e){if(!e)return!1;const n=[],r=function(i,s){return qg(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function Ec(t,e,n){return t.options.clip?t[n]:e[n]}function DV(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:Ec(n,e,"left"),right:Ec(n,e,"right"),top:Ec(r,e,"top"),bottom:Ec(r,e,"bottom")}:e}function MV(t,e){const n=e._clip;if(n.disabled)return!1;const r=DV(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class OV{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=GI.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Wn=new OV;const aw="transparent",LV={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=Y0(t||aw),i=r.valid&&Y0(e||aw);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class VV{constructor(e,n,r,i){const s=n[r];i=vc([e.to,i,s,e.from]);const o=vc([e.from,s,i]);this._active=!0,this._fn=e.fn||LV[e.type||typeof o],this._easing=ba[e.easing]||ba.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=vc([e.to,n,i,e.from]),this._from=vc([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class ab{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!ge(e))return;const n=Object.keys($e.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!ge(s))return;const o={};for(const a of n)o[a]=s[a];(Qe(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=FV(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&jV(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,n));continue}const h=n[c];let d=s[c];const f=r.get(c);if(d)if(f&&d.active()){d.update(f,h,a);continue}else d.cancel();if(!f||!f.duration){e[c]=h;continue}s[c]=d=new VV(f,e,c,h),i.push(d)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return Wn.add(this._chart,r),!0}}function jV(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function FV(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function lw(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function UV(t,e,n){if(n===!1)return!1;const r=lw(t,n),i=lw(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function zV(t){let e,n,r,i;return ge(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function lb(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function cw(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,l,c;if(e===null)return;let h=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(h=!0,r.all)continue;break}c=t.values[l],un(c)&&(s||e===0||Fn(e)===Fn(c))&&(e+=c)}return!h&&!r.all?0:e}function BV(t,e){const{iScale:n,vScale:r}=e,i=n.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[i]:h,[s]:t[h]};return a}function nf(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function $V(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function WV(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function HV(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function uw(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function hw(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,h=$V(s,o,r),d=e.length;let f;for(let g=0;g<d;++g){const _=e[g],{[l]:v,[c]:T}=_,w=_._stacks||(_._stacks={});f=w[c]=HV(i,h,v),f[a]=T,f._top=uw(f,o,!0,r.type),f._bottom=uw(f,o,!1,r.type);const x=f._visualValues||(f._visualValues={});x[a]=T}}function rf(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function qV(t,e){return rs(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function KV(t,e,n){return rs(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Bo(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const sf=t=>t==="reset"||t==="none",dw=(t,e)=>e?t:Object.assign({},t),GV=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:lb(n,!0),values:null};class Fs{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=nf(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Bo(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(d,f,g,_)=>d==="x"?f:d==="r"?_:g,s=n.xAxisID=ue(r.xAxisID,rf(e,"x")),o=n.yAxisID=ue(r.yAxisID,rf(e,"y")),a=n.rAxisID=ue(r.rAxisID,rf(e,"r")),l=n.indexAxis,c=n.iAxisID=i(l,s,o,a),h=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&K0(this._data,this),e._stacked&&Bo(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(ge(n)){const i=this._cachedMeta;this._data=BV(n,i)}else if(r!==n){if(r){K0(r,this);const i=this._cachedMeta;Bo(i),i._parsed=[]}n&&Object.isExtensible(n)&&AL(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=nf(n.vScale,n),n.stack!==r.stack&&(i=!0,Bo(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&(hw(this,n._parsed),n._stacked=nf(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&n===i.length?!0:r._sorted,c=e>0&&r._parsed[e-1],h,d,f;if(this._parsing===!1)r._parsed=i,r._sorted=!0,f=i;else{Qe(i[e])?f=this.parseArrayData(r,i,e,n):ge(i[e])?f=this.parseObjectData(r,i,e,n):f=this.parsePrimitiveData(r,i,e,n);const g=()=>d[a]===null||c&&d[a]<c[a];for(h=0;h<n;++h)r._parsed[h+e]=d=f[h],l&&(g()&&(l=!1),c=d);r._sorted=l}o&&hw(this,f)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),h=s===o,d=new Array(i);let f,g,_;for(f=0,g=i;f<g;++f)_=f+r,d[f]={[a]:h||s.parse(c[_],_),[l]:o.parse(n[_],_)};return d}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,c,h,d;for(l=0,c=i;l<c;++l)h=l+r,d=n[h],a[l]={x:s.parse(d[0],h),y:o.parse(d[1],h)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let h,d,f,g;for(h=0,d=i;h<d;++h)f=h+r,g=n[f],c[h]={x:s.parse(Qi(g,a),f),y:o.parse(Qi(g,l),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:lb(i,!0),values:n._stacks[e.axis]._visualValues};return cw(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=cw(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=GV(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=WV(a);let f,g;function _(){g=i[f];const v=g[a.axis];return!un(g[e.axis])||h>v||d<v}for(f=0;f<o&&!(!_()&&(this.updateRangeFromParsed(c,e,g,l),s));++f);if(s){for(f=o-1;f>=0;--f)if(!_()){this.updateRangeFromParsed(c,e,g,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],un(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=zV(ue(this.options.clip,UV(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let h;for(r.dataset&&r.dataset.draw(e,s,a,l),h=a;h<a+l;++h){const d=i[h];d.hidden||(d.active&&c?o.push(d):d.draw(e,s))}for(h=0;h<o.length;++h)o[h].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=KV(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=qV(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&ol(r);if(a)return dw(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,e),d=i?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),h),g=Object.keys($e.elements[e]),_=()=>this.getContext(r,i,n),v=c.resolveNamedOptions(f,g,_,d);return v.$shared&&(v.$shared=l,s[o]=Object.freeze(dw(v,l))),v}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,n),f=h.getOptionScopes(this.getDataset(),d);l=h.createResolver(f,this.getContext(e,r,n))}const c=new ab(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||sf(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){sf(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!sf(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&Bo(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}J(Fs,"defaults",{}),J(Fs,"datasetElementType",null),J(Fs,"dataElementType",null);function QV(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=n.length;i<s;i++)r=r.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=KI(r.sort((i,s)=>i-s))}return t._cache.$bar}function YV(t){const e=t.iScale,n=QV(e,t.type);let r=e._length,i,s,o,a;const l=()=>{o===32767||o===-32768||(ol(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=n.length;i<s;++i)o=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),l();return r}function XV(t,e,n,r){const i=n.barThickness;let s,o;return Se(i)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[t]-s/2}}function JV(t,e,n,r){const i=e.pixels,s=i[t];let o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}function ZV(t,e,n,r){const i=n.parse(t[0],r),s=n.parse(t[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:s,min:o,max:a}}function cb(t,e,n,r){return Qe(t)?ZV(t,e,n,r):e[n.axis]=n.parse(t,r),e}function fw(t,e,n,r){const i=t.iScale,s=t.vScale,o=i.getLabels(),a=i===s,l=[];let c,h,d,f;for(c=n,h=n+r;c<h;++c)f=e[c],d={},d[i.axis]=a||i.parse(o[c],c),l.push(cb(f,d,s,c));return l}function of(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function ej(t,e,n){return t!==0?Fn(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function tj(t){let e,n,r,i,s;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:e,top:i,bottom:s}}function nj(t,e,n,r){let i=e.borderSkipped;const s={};if(!i){t.borderSkipped=s;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:h}=tj(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=h:(s[pw(h,o,a,l)]=!0,i=c)),s[pw(i,o,a,l)]=!0,t.borderSkipped=s}function pw(t,e,n,r){return r?(t=rj(t,e,n),t=mw(t,n,e)):t=mw(t,e,n),t}function rj(t,e,n){return t===e?n:t===n?e:t}function mw(t,e,n){return t==="start"?e:t==="end"?n:t}function ij(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class Qc extends Fs{parsePrimitiveData(e,n,r,i){return fw(e,n,r,i)}parseArrayData(e,n,r,i){return fw(e,n,r,i)}parseObjectData(e,n,r,i){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,h=o.axis==="x"?a:l,d=[];let f,g,_,v;for(f=r,g=r+i;f<g;++f)v=n[f],_={},_[s.axis]=s.parse(Qi(v,c),f),d.push(cb(Qi(v,h),_,o,f));return d}updateRangeFromParsed(e,n,r,i){super.updateRangeFromParsed(e,n,r,i);const s=r._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:i}=n,s=this.getParsed(e),o=s._custom,a=of(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,i){const s=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),h=this._getRuler(),{sharedOptions:d,includeOptions:f}=this._getSharedOptions(n,i);for(let g=n;g<n+r;g++){const _=this.getParsed(g),v=s||Se(_[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(g),T=this._calculateBarIndexPixels(g,h),w=(_._stacks||{})[a.axis],x={horizontal:c,base:v.base,enableBorderRadius:!w||of(_._custom)||o===w._top||o===w._bottom,x:c?v.head:T.center,y:c?T.center:v.head,height:c?T.size:Math.abs(v.size),width:c?Math.abs(v.size):T.size};f&&(x.options=d||this.resolveDataElementOptions(g,e[g].active?"active":i));const b=x.options||e[g].options;nj(x,b,w,o),ij(x,b,h.ratio),this.updateElement(e[g],g,x,i)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),s=r.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[r.axis],c=h=>{const d=h._parsed.find(g=>g[r.axis]===l),f=d&&d[h.vScale.axis];if(Se(f)||isNaN(f))return!0};for(const h of i)if(!(n!==void 0&&c(h))&&((s===!1||o.indexOf(h.stack)===-1||s===void 0&&h.stack===void 0)&&o.push(h.stack),h.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(r=>e[r].axis===n).shift()}_getAxis(){const e={},n=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)e[ue(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,r){const i=this._getStacks(e,r),s=n!==void 0?i.indexOf(n):-1;return s===-1?i.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,i=[];let s,o;for(s=0,o=n.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const a=e.barThickness;return{min:a||YV(n),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,h=of(c);let d=l[n.axis],f=0,g=r?this.applyStack(n,l,r):d,_,v;g!==d&&(f=g-d,g=d),h&&(d=c.barStart,g=c.barEnd-c.barStart,d!==0&&Fn(d)!==Fn(c.barEnd)&&(f=0),f+=d);const T=!Se(s)&&!h?s:f;let w=n.getPixelForValue(T);if(this.chart.getDataVisibility(e)?_=n.getPixelForValue(f+g):_=w,v=_-w,Math.abs(v)<o){v=ej(v,n,a)*o,d===a&&(w-=v/2);const x=n.getPixelForDecimal(0),b=n.getPixelForDecimal(1),R=Math.min(x,b),N=Math.max(x,b);w=Math.max(Math.min(w,N),R),_=w+v,r&&!h&&(l._stacks[n.axis]._visualValues[i]=n.getValueForPixel(_)-n.getValueForPixel(w))}if(w===n.getPixelForValue(a)){const x=Fn(v)*n.getLineWidthForValue(a)/2;w+=x,v-=x}return{size:v,base:w,head:_,center:_+v/2}}_calculateBarIndexPixels(e,n){const r=n.scale,i=this.options,s=i.skipNull,o=ue(i.maxBarThickness,1/0);let a,l;const c=this._getAxisCount();if(n.grouped){const h=s?this._getStackCount(e):n.stackCount,d=i.barThickness==="flex"?JV(e,n,i,h*c):XV(e,n,i,h*c),f=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,g=this._getAxis().indexOf(ue(f,this.getFirstScaleIdForIndexAxis())),_=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0)+g;a=d.start+d.chunk*_+d.chunk/2,l=Math.min(o,d.chunk*d.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[n.axis]!==null&&!r[s].hidden&&r[s].draw(this._ctx)}}J(Qc,"id","bar"),J(Qc,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),J(Qc,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function sj(t,e,n){let r=1,i=1,s=0,o=0;if(e<Ue){const a=t,l=a+e,c=Math.cos(a),h=Math.sin(a),d=Math.cos(l),f=Math.sin(l),g=(b,R,N)=>al(b,a,l,!0)?1:Math.max(R,R*n,N,N*n),_=(b,R,N)=>al(b,a,l,!0)?-1:Math.min(R,R*n,N,N*n),v=g(0,c,d),T=g(Xe,h,f),w=_(we,c,d),x=_(we+Xe,h,f);r=(v-w)/2,i=(T-x)/2,s=-(v+w)/2,o=-(T+x)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}class ia extends Fs{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=l=>+r[l];if(ge(r[e])){const{key:l="value"}=this._parsing;s=c=>+Qi(r[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)i._parsed[o]=s(o)}}_getRotation(){return er(this.options.rotation-90)}_getCircumference(){return er(this.options.circumference)}_getRotationExtents(){let e=Ue,n=-Ue;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),o=i._getCircumference();e=Math.min(e,s),n=Math.max(n,s+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,i=this._cachedMeta,s=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(dL(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:g,offsetX:_,offsetY:v}=sj(d,h,l),T=(r.width-o)/f,w=(r.height-o)/g,x=Math.max(Math.min(T,w)/2,0),b=BI(this.options.radius,x),R=Math.max(b*l,0),N=(b-R)/this._getVisibleDatasetWeightTotal();this.offsetX=_*b,this.offsetY=v*b,i.total=this.calculateTotal(),this.outerRadius=b-N*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-N*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/Ue)}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,h=(a.left+a.right)/2,d=(a.top+a.bottom)/2,f=s&&c.animateScale,g=f?0:this.innerRadius,_=f?0:this.outerRadius,{sharedOptions:v,includeOptions:T}=this._getSharedOptions(n,i);let w=this._getRotation(),x;for(x=0;x<n;++x)w+=this._circumference(x,s);for(x=n;x<n+r;++x){const b=this._circumference(x,s),R=e[x],N={x:h+this.offsetX,y:d+this.offsetY,startAngle:w,endAngle:w+b,circumference:b,outerRadius:_,innerRadius:g};T&&(N.options=v||this.resolveDataElementOptions(x,R.active?"active":i)),w+=b,this.updateElement(R,x,N,i)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,i;for(i=0;i<n.length;i++){const s=e._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Ue*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=Kg(n._parsed[e],r.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const r=this.chart;let i,s,o,a,l;if(!e){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){o=r.getDatasetMeta(i),e=o.data,a=o.controller;break}}if(!e)return 0;for(i=0,s=e.length;i<s;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,i=e.length;r<i;++r){const s=this.resolveDataElementOptions(r);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(ue(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}J(ia,"id","doughnut"),J(ia,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),J(ia,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),J(ia,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((l,c)=>{const d=e.getDatasetMeta(0).controller.getStyle(c);return{text:l,fillStyle:d.backgroundColor,fontColor:s,hidden:!e.getDataVisibility(c),lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:d.borderWidth,strokeStyle:d.borderColor,textAlign:i,pointStyle:r,borderRadius:o&&(a||d.borderRadius),index:c}}):[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class Vp extends ia{}J(Vp,"id","pie"),J(Vp,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});function Ti(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class ny{constructor(e){J(this,"options");this.options=e||{}}static override(e){Object.assign(ny.prototype,e)}init(){}formats(){return Ti()}parse(){return Ti()}format(){return Ti()}add(){return Ti()}diff(){return Ti()}startOf(){return Ti()}endOf(){return Ti()}}var oj={_date:ny};function aj(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const c=a._reversePixels?kL:Mp;if(r){if(i._sharedOptions){const h=s[0],d=typeof h.getRange=="function"&&h.getRange(e);if(d){const f=c(s,e,n-d),g=c(s,e,n+d);return{lo:f.lo,hi:g.hi}}}}else{const h=c(s,e,n);if(l){const{vScale:d}=i._cachedMeta,{_parsed:f}=t,g=f.slice(0,h.lo+1).reverse().findIndex(v=>!Se(v[d.axis]));h.lo-=Math.max(0,g);const _=f.slice(h.hi).findIndex(v=>!Se(v[d.axis]));h.hi+=Math.max(0,_)}return h}}return{lo:0,hi:s.length-1}}function $h(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:h}=s[a],{lo:d,hi:f}=aj(s[a],e,o,i);for(let g=d;g<=f;++g){const _=h[g];_.skip||r(_,c,g)}}}function lj(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function af(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||$h(t,n,e,function(a,l,c){!i&&!ll(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function cj(t,e,n,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],r),{angle:d}=HI(o,{x:e.x,y:e.y});al(d,c,h)&&i.push({element:o,datasetIndex:a,index:l})}return $h(t,n,e,s),i}function uj(t,e,n,r,i,s){let o=[];const a=lj(n);let l=Number.POSITIVE_INFINITY;function c(h,d,f){const g=h.inRange(e.x,e.y,i);if(r&&!g)return;const _=h.getCenterPoint(i);if(!(!!s||t.isPointInArea(_))&&!g)return;const T=a(e,_);T<l?(o=[{element:h,datasetIndex:d,index:f}],l=T):T===l&&o.push({element:h,datasetIndex:d,index:f})}return $h(t,n,e,c),o}function lf(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?cj(t,e,n,i):uj(t,e,n,r,i,s)}function gw(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return $h(t,n,e,(l,c,h)=>{l[o]&&l[o](e[n],i)&&(s.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var hj={modes:{index(t,e,n,r){const i=ki(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?af(t,i,s,r,o):lf(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,d=c.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:h})}),l):[]},dataset(t,e,n,r){const i=ki(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?af(t,i,s,r,o):lf(t,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(t,e,n,r){const i=ki(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return af(t,i,s,r,o)},nearest(t,e,n,r){const i=ki(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return lf(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=ki(e,t);return gw(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=ki(e,t);return gw(t,i,"y",n.intersect,r)}}};const ub=["left","top","right","bottom"];function $o(t,e){return t.filter(n=>n.pos===e)}function yw(t,e){return t.filter(n=>ub.indexOf(n.pos)===-1&&n.box.axis===e)}function Wo(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function dj(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function fj(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!ub.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function pj(t,e){const n=fj(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=h?h*i:l&&e.availableHeight)}return n}function mj(t){const e=dj(t),n=Wo(e.filter(c=>c.box.fullSize),!0),r=Wo($o(e,"left"),!0),i=Wo($o(e,"right")),s=Wo($o(e,"top"),!0),o=Wo($o(e,"bottom")),a=yw(e,"x"),l=yw(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:$o(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function _w(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function hb(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function gj(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!ge(i)){n.size&&(t[i]-=n.size);const d=r[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?s.height:s.width),n.size=d.size/d.count,t[i]+=n.size}s.getPadding&&hb(o,s.getPadding());const a=Math.max(0,e.outerWidth-_w(o,t,"left","right")),l=Math.max(0,e.outerHeight-_w(o,t,"top","bottom")),c=a!==t.w,h=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:h}:{same:h,other:c}}function yj(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function _j(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function sa(t,e,n,r){const i=[];let s,o,a,l,c,h;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,_j(a.horizontal,e));const{same:d,other:f}=gj(e,n,a,r);c|=d&&i.length,h=h||f,l.fullSize||i.push(a)}return c&&sa(i,e,n,r)||h}function xc(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function vw(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*h,f=c.size||l.height;ol(c.start)&&(o=c.start),l.fullSize?xc(l,i.left,o,n.outerWidth-i.right-i.left,f):xc(l,e.left+c.placed,o,d,f),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*h,f=c.size||l.width;ol(c.start)&&(s=c.start),l.fullSize?xc(l,s,i.top,f,n.outerHeight-i.bottom-i.top):xc(l,s,e.top+c.placed,f,d),c.start=s,c.placed+=d,s=l.right}}e.x=s,e.y=o}var rn={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=hn(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=mj(t.boxes),l=a.vertical,c=a.horizontal;ve(t.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});const h=l.reduce((v,T)=>T.box.options&&T.box.options.display===!1?v:v+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/h,hBoxMaxHeight:o/2}),f=Object.assign({},i);hb(f,hn(r));const g=Object.assign({maxPadding:f,w:s,h:o,x:i.left,y:i.top},i),_=pj(l.concat(c),d);sa(a.fullSize,g,d,_),sa(l,g,d,_),sa(c,g,d,_)&&sa(l,g,d,_),yj(g),vw(a.leftAndTop,g,d,_),g.x+=g.w,g.y+=g.h,vw(a.rightAndBottom,g,d,_),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},ve(a.chartArea,v=>{const T=v.box;Object.assign(T,t.chartArea),T.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class db{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class vj extends db{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Yc="$chartjs",wj={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ww=t=>t===null||t==="";function Ej(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[Yc]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",ww(i)){const s=rw(t,"width");s!==void 0&&(t.width=s)}if(ww(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=rw(t,"height");s!==void 0&&(t.height=s)}return t}const fb=wV?{passive:!0}:!1;function xj(t,e,n){t&&t.addEventListener(e,n,fb)}function Tj(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,fb)}function Sj(t,e){const n=wj[t.type]||t.type,{x:r,y:i}=ki(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function Qu(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function Ij(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Qu(a.addedNodes,r),o=o&&!Qu(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function bj(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Qu(a.removedNodes,r),o=o&&!Qu(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const ul=new Map;let Ew=0;function pb(){const t=window.devicePixelRatio;t!==Ew&&(Ew=t,ul.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function kj(t,e){ul.size||window.addEventListener("resize",pb),ul.set(t,e)}function Cj(t){ul.delete(t),ul.size||window.removeEventListener("resize",pb)}function Aj(t,e,n){const r=t.canvas,i=r&&ty(r);if(!i)return;const s=QI((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||s(c,h)});return o.observe(i),kj(t,s),o}function cf(t,e,n){n&&n.disconnect(),e==="resize"&&Cj(t)}function Pj(t,e,n){const r=t.canvas,i=QI(s=>{t.ctx!==null&&n(Sj(s,t))},t);return xj(r,e,i),i}class Rj extends db{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(Ej(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[Yc])return!1;const r=n[Yc].initial;["height","width"].forEach(s=>{const o=r[s];Se(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[Yc],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:Ij,detach:bj,resize:Aj}[n]||Pj;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:cf,detach:cf,resize:cf}[n]||Tj)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return vV(e,n,r,i)}isAttached(e){const n=e&&ty(e);return!!(n&&n.isConnected)}}function Nj(t){return!ey()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?vj:Rj}class Sn{constructor(){J(this,"x");J(this,"y");J(this,"active",!1);J(this,"options");J(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return qu(this.x)&&qu(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}}J(Sn,"defaults",{}),J(Sn,"defaultRoutes");function Dj(t,e){const n=t.options.ticks,r=Mj(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?Lj(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return Vj(e,c,s,o/i),c;const h=Oj(s,e,i);if(o>0){let d,f;const g=o>1?Math.round((l-a)/(o-1)):null;for(Tc(e,c,h,Se(g)?0:a-g,a),d=0,f=o-1;d<f;d++)Tc(e,c,h,s[d],s[d+1]);return Tc(e,c,h,l,Se(g)?e.length:l+g),c}return Tc(e,c,h),c}function Mj(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function Oj(t,e,n){const r=jj(t),i=e.length/n;if(!r)return Math.max(i,1);const s=wL(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function Lj(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function Vj(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function Tc(t,e,n,r,i){const s=ue(r,0),o=Math.min(ue(i,t.length),t.length);let a=0,l,c,h;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),h=s;h<0;)a++,h=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===h&&(e.push(t[c]),a++,h=Math.round(s+a*n))}function jj(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const Fj=t=>t==="left"?"right":t==="right"?"left":t,xw=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,Tw=(t,e)=>Math.min(e||t,t);function Sw(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function Uj(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(n&&(r===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function zj(t,e){ve(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function Ho(t){return t.drawTicks?t.tickLength:0}function Iw(t,e){if(!t.display)return 0;const n=Et(t.font,e),r=hn(t.padding);return(Qe(t.text)?t.text.length:1)*n.lineHeight+r.height}function Bj(t,e){return rs(t,{scale:e,type:"scale"})}function $j(t,e,n){return rs(t,{tick:n,index:e,type:"tick"})}function Wj(t,e,n){let r=Hg(t);return(n&&e!=="right"||!n&&e==="right")&&(r=Fj(r)),r}function Hj(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:h}=l;let d=0,f,g,_;const v=o-i,T=a-s;if(t.isHorizontal()){if(g=yt(r,s,a),ge(n)){const w=Object.keys(n)[0],x=n[w];_=h[w].getPixelForValue(x)+v-e}else n==="center"?_=(c.bottom+c.top)/2+v-e:_=xw(t,n,e);f=a-s}else{if(ge(n)){const w=Object.keys(n)[0],x=n[w];g=h[w].getPixelForValue(x)-T+e}else n==="center"?g=(c.left+c.right)/2-T+e:g=xw(t,n,e);_=yt(r,o,i),d=n==="left"?-Xe:Xe}return{titleX:g,titleY:_,maxWidth:f,rotation:d}}class yo extends Sn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=kn(e,Number.POSITIVE_INFINITY),n=kn(n,Number.NEGATIVE_INFINITY),r=kn(r,Number.POSITIVE_INFINITY),i=kn(i,Number.NEGATIVE_INFINITY),{min:kn(e,r),max:kn(n,i),minDefined:un(e),maxDefined:un(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:kn(n,kn(r,n)),max:kn(r,kn(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ae(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=XL(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Sw(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Dj(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ae(this.options.afterUpdate,[this])}beforeSetDimensions(){Ae(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ae(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ae(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ae(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=Ae(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){Ae(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ae(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=Tw(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const h=this._getLabelSizes(),d=h.widest.width,f=h.highest.height,g=Ft(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/r:g/(r-1),d+6>a&&(a=g/(r-(e.offset?.5:1)),l=this.maxHeight-Ho(e.grid)-n.padding-Iw(e.title,this.chart.options.font),c=Math.sqrt(d*d+f*f),o=SL(Math.min(Math.asin(Ft((h.highest.height+6)/a,-1,1)),Math.asin(Ft(l/c,-1,1))-Math.asin(Ft(f/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Ae(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ae(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Iw(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=Ho(s)+l):(e.height=this.maxHeight,e.width=Ho(s)+l),r.display&&this.ticks.length){const{first:c,last:h,widest:d,highest:f}=this._getLabelSizes(),g=r.padding*2,_=er(this.labelRotation),v=Math.cos(_),T=Math.sin(_);if(a){const w=r.mirror?0:T*d.width+v*f.height;e.height=Math.min(this.maxHeight,e.height+w+g)}else{const w=r.mirror?0:v*d.width+T*f.height;e.width=Math.min(this.maxWidth,e.width+w+g)}this._calculatePadding(c,h,T,v)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,g=0;l?c?(f=i*e.width,g=r*n.height):(f=r*e.height,g=i*n.width):s==="start"?g=n.width:s==="end"?f=e.width:s!=="inner"&&(f=e.width/2,g=n.width/2),this.paddingLeft=Math.max((f-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((g-d+o)*this.width/(this.width-d),0)}else{let h=n.height/2,d=e.height/2;s==="start"?(h=0,d=e.height):s==="end"&&(h=n.height,d=0),this.paddingTop=h+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ae(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)Se(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=Sw(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/Tw(n,r));let c=0,h=0,d,f,g,_,v,T,w,x,b,R,N;for(d=0;d<n;d+=l){if(_=e[d].label,v=this._resolveTickFontOptions(d),i.font=T=v.string,w=s[T]=s[T]||{data:{},gc:[]},x=v.lineHeight,b=R=0,!Se(_)&&!Qe(_))b=J0(i,w.data,w.gc,b,_),R=x;else if(Qe(_))for(f=0,g=_.length;f<g;++f)N=_[f],!Se(N)&&!Qe(N)&&(b=J0(i,w.data,w.gc,b,N),R+=x);o.push(b),a.push(R),c=Math.max(b,c),h=Math.max(R,h)}zj(s,n);const M=o.indexOf(c),S=a.indexOf(h),E=C=>({width:o[C]||0,height:a[C]||0});return{first:E(0),last:E(n-1),widest:E(M),highest:E(S),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return bL(this._alignToPixels?xi(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=$j(this.getContext(),e,r))}return this.$context||(this.$context=Bj(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=er(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=Ho(s),g=[],_=a.setContext(this.getContext()),v=_.display?_.width:0,T=v/2,w=function(Q){return xi(r,Q,v)};let x,b,R,N,M,S,E,C,I,P,D,A;if(o==="top")x=w(this.bottom),S=this.bottom-f,C=x-T,P=w(e.top)+T,A=e.bottom;else if(o==="bottom")x=w(this.top),P=e.top,A=w(e.bottom)-T,S=x+T,C=this.top+f;else if(o==="left")x=w(this.right),M=this.right-f,E=x-T,I=w(e.left)+T,D=e.right;else if(o==="right")x=w(this.left),I=e.left,D=w(e.right)-T,M=x+T,E=this.left+f;else if(n==="x"){if(o==="center")x=w((e.top+e.bottom)/2+.5);else if(ge(o)){const Q=Object.keys(o)[0],X=o[Q];x=w(this.chart.scales[Q].getPixelForValue(X))}P=e.top,A=e.bottom,S=x+T,C=S+f}else if(n==="y"){if(o==="center")x=w((e.left+e.right)/2);else if(ge(o)){const Q=Object.keys(o)[0],X=o[Q];x=w(this.chart.scales[Q].getPixelForValue(X))}M=x-T,E=M-f,I=e.left,D=e.right}const Y=ue(i.ticks.maxTicksLimit,d),j=Math.max(1,Math.ceil(d/Y));for(b=0;b<d;b+=j){const Q=this.getContext(b),X=s.setContext(Q),z=a.setContext(Q),H=X.lineWidth,Z=X.color,ce=z.dash||[],ie=z.dashOffset,B=X.tickWidth,se=X.tickColor,oe=X.tickBorderDash||[],ne=X.tickBorderDashOffset;R=Uj(this,b,l),R!==void 0&&(N=xi(r,R,H),c?M=E=I=D=N:S=C=P=A=N,g.push({tx1:M,ty1:S,tx2:E,ty2:C,x1:I,y1:P,x2:D,y2:A,width:H,color:Z,borderDash:ce,borderDashOffset:ie,tickWidth:B,tickColor:se,tickBorderDash:oe,tickBorderDashOffset:ne}))}return this._ticksLength=d,this._borderValue=x,g}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:d}=s,f=Ho(r.grid),g=f+h,_=d?-h:g,v=-er(this.labelRotation),T=[];let w,x,b,R,N,M,S,E,C,I,P,D,A="middle";if(i==="top")M=this.bottom-_,S=this._getXAxisLabelAlignment();else if(i==="bottom")M=this.top+_,S=this._getXAxisLabelAlignment();else if(i==="left"){const j=this._getYAxisLabelAlignment(f);S=j.textAlign,N=j.x}else if(i==="right"){const j=this._getYAxisLabelAlignment(f);S=j.textAlign,N=j.x}else if(n==="x"){if(i==="center")M=(e.top+e.bottom)/2+g;else if(ge(i)){const j=Object.keys(i)[0],Q=i[j];M=this.chart.scales[j].getPixelForValue(Q)+g}S=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")N=(e.left+e.right)/2-g;else if(ge(i)){const j=Object.keys(i)[0],Q=i[j];N=this.chart.scales[j].getPixelForValue(Q)}S=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?A="top":l==="end"&&(A="bottom"));const Y=this._getLabelSizes();for(w=0,x=a.length;w<x;++w){b=a[w],R=b.label;const j=s.setContext(this.getContext(w));E=this.getPixelForTick(w)+s.labelOffset,C=this._resolveTickFontOptions(w),I=C.lineHeight,P=Qe(R)?R.length:1;const Q=P/2,X=j.color,z=j.textStrokeColor,H=j.textStrokeWidth;let Z=S;o?(N=E,S==="inner"&&(w===x-1?Z=this.options.reverse?"left":"right":w===0?Z=this.options.reverse?"right":"left":Z="center"),i==="top"?c==="near"||v!==0?D=-P*I+I/2:c==="center"?D=-Y.highest.height/2-Q*I+I:D=-Y.highest.height+I/2:c==="near"||v!==0?D=I/2:c==="center"?D=Y.highest.height/2-Q*I:D=Y.highest.height-P*I,d&&(D*=-1),v!==0&&!j.showLabelBackdrop&&(N+=I/2*Math.sin(v))):(M=E,D=(1-P)*I/2);let ce;if(j.showLabelBackdrop){const ie=hn(j.backdropPadding),B=Y.heights[w],se=Y.widths[w];let oe=D-ie.top,ne=0-ie.left;switch(A){case"middle":oe-=B/2;break;case"bottom":oe-=B;break}switch(S){case"center":ne-=se/2;break;case"right":ne-=se;break;case"inner":w===x-1?ne-=se:w>0&&(ne-=se/2);break}ce={left:ne,top:oe,width:se+ie.width,height:B+ie.height,color:j.backdropColor}}T.push({label:R,font:C,textOffset:D,options:{rotation:v,color:X,strokeColor:z,strokeWidth:H,textAlign:Z,textBaseline:A,translation:[N,M],backdrop:ce}})}return T}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-er(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,h;return n==="left"?i?(h=this.right+s,r==="near"?c="left":r==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,r==="near"?c="right":r==="center"?(c="center",h-=l/2):(c="left",h=this.left)):n==="right"?i?(h=this.left+s,r==="near"?c="right":r==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,r==="near"?c="left":r==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,h)=>{!h.width||!h.color||(r.save(),r.lineWidth=h.width,r.strokeStyle=h.color,r.setLineDash(h.borderDash||[]),r.lineDashOffset=h.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,d,f;this.isHorizontal()?(c=xi(e,this.left,o)-o/2,h=xi(e,this.right,a)+a/2,d=f=l):(d=xi(e,this.top,o)-o/2,f=xi(e,this.bottom,a)+a/2,c=h=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,d),n.lineTo(h,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&Gg(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,h=o.textOffset;cl(r,c,0,h,l,a)}i&&Qg(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=Et(r.font),o=hn(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||ge(n)?(l+=o.bottom,Qe(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:d,rotation:f}=Hj(this,l,n,a);cl(e,r.text,0,0,s,{color:r.color,maxWidth:d,rotation:f,textAlign:Wj(a,n,i),textBaseline:"middle",translation:[c,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=ue(e.grid&&e.grid.z,-1),i=ue(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==yo.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Et(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Sc{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;Gj(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,qj(e,o,r),this.override&&$e.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in $e[i]&&(delete $e[i][r],this.override&&delete Yi[r])}}function qj(t,e,n){const r=sl(Object.create(null),[n?$e.get(n):{},$e.get(e),t.defaults]);$e.set(e,r),t.defaultRoutes&&Kj(e,t.defaultRoutes),t.descriptors&&$e.describe(e,t.descriptors)}function Kj(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");$e.route(s,i,l,a)})}function Gj(t){return"id"in t&&"defaults"in t}class Qj{constructor(){this.controllers=new Sc(Fs,"datasets",!0),this.elements=new Sc(Sn,"elements"),this.plugins=new Sc(Object,"plugins"),this.scales=new Sc(yo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):ve(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=$g(e);Ae(r["before"+i],[],r),n[e](r),Ae(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var Pn=new Qj;class Yj{constructor(){this._init=void 0}notify(e,n,r,i){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[n,i,s.options];if(Ae(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){Se(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=ue(r.options&&r.options.plugins,{}),s=Xj(r);return i===!1&&!n?[]:Zj(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function Xj(t){const e={},n=[],r=Object.keys(Pn.plugins.items);for(let s=0;s<r.length;s++)n.push(Pn.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function Jj(t,e){return!e&&t===!1?null:t===!0?{}:t}function Zj(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=Jj(r[l],i);c!==null&&s.push({plugin:a,options:eF(t.config,{plugin:a,local:n[l]},c,o)})}return s}function eF(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function jp(t,e){const n=$e.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function tF(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function nF(t,e){return t===e?"_index_":"_value_"}function bw(t){if(t==="x"||t==="y"||t==="r")return t}function rF(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Fp(t,...e){if(bw(t))return t;for(const n of e){const r=n.axis||rF(n.position)||t.length>1&&bw(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function kw(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function iF(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return kw(t,"x",n[0])||kw(t,"y",n[0])}return{}}function sF(t,e){const n=Yi[t.type]||{scales:{}},r=e.scales||{},i=jp(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!ge(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Fp(o,a,iF(o,t),$e.scales[a.type]),c=nF(l,i),h=n.scales||{};s[o]=Sa(Object.create(null),[{axis:l},a,h[l],h[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||jp(a,e),h=(Yi[a]||{}).scales||{};Object.keys(h).forEach(d=>{const f=tF(d,l),g=o[f+"AxisID"]||f;s[g]=s[g]||Object.create(null),Sa(s[g],[{axis:f},r[g],h[d]])})}),Object.keys(s).forEach(o=>{const a=s[o];Sa(a,[$e.scales[a.type],$e.scale])}),s}function mb(t){const e=t.options||(t.options={});e.plugins=ue(e.plugins,{}),e.scales=sF(t,e)}function gb(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function oF(t){return t=t||{},t.data=gb(t.data),mb(t),t}const Cw=new Map,yb=new Set;function Ic(t,e){let n=Cw.get(t);return n||(n=e(),Cw.set(t,n),yb.add(n)),n}const qo=(t,e,n)=>{const r=Qi(e,n);r!==void 0&&t.add(r)};class aF{constructor(e){this._config=oF(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=gb(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),mb(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Ic(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Ic(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Ic(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return Ic(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{e&&(l.add(e),h.forEach(d=>qo(l,e,d))),h.forEach(d=>qo(l,i,d)),h.forEach(d=>qo(l,Yi[s]||{},d)),h.forEach(d=>qo(l,$e,d)),h.forEach(d=>qo(l,Op,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),yb.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Yi[n]||{},$e.datasets[n]||{},{type:n},$e,Op]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=Aw(this._resolverCache,e,i);let l=o;if(cF(o,n)){s.$shared=!1,r=si(r)?r():r;const c=this.createResolver(e,r,a);l=ro(o,r,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,r=[""],i){const{resolver:s}=Aw(this._resolverCache,e,r);return ge(n)?ro(s,n,void 0,i):s}}function Aw(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:Xg(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const lF=t=>ge(t)&&Object.getOwnPropertyNames(t).some(e=>si(t[e]));function cF(t,e){const{isScriptable:n,isIndexable:r}=ZI(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(si(a)||lF(a))||o&&Qe(a))return!0}return!1}var uF="4.5.1";const hF=["top","bottom","left","right","chartArea"];function Pw(t,e){return t==="top"||t==="bottom"||hF.indexOf(t)===-1&&e==="x"}function Rw(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function Nw(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Ae(n&&n.onComplete,[t],e)}function dF(t){const e=t.chart,n=e.options.animation;Ae(n&&n.onProgress,[t],e)}function _b(t){return ey()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Xc={},Dw=t=>{const e=_b(t);return Object.values(Xc).filter(n=>n.canvas===e).pop()};function fF(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function pF(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var Er;let Wh=(Er=class{static register(...e){Pn.add(...e),Mw()}static unregister(...e){Pn.remove(...e),Mw()}constructor(e,n){const r=this.config=new aF(n),i=_b(e),s=Dw(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||Nj(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=hL(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Yj,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=PL(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],Xc[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Wn.listen(this,"complete",Nw),Wn.listen(this,"progress",dF),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return Se(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Pn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():nw(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Z0(this.canvas,this.ctx),this}stop(){return Wn.stop(this),this}resize(e,n){Wn.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,nw(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Ae(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};ve(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=Fp(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),ve(s,o=>{const a=o.options,l=a.id,c=Fp(l,a),h=ue(a.type,o.dtype);(a.position===void 0||Pw(a.position,c)!==Pw(o.dposition))&&(a.position=o.dposition),i[l]=!0;let d=null;if(l in r&&r[l].type===h)d=r[l];else{const f=Pn.getScale(h);d=new f({id:l,type:h,ctx:this.ctx,chart:this}),r[d.id]=d}d.init(a,e)}),ve(i,(o,a)=>{o||delete r[a]}),ve(r,o=>{rn.configure(this,o,o.options),rn.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(Rw("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||jp(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=Pn.getController(a),{datasetElementType:c,dataElementType:h}=$e.datasets[a];Object.assign(l,{dataElementType:Pn.getElement(h),datasetElementType:c&&Pn.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){ve(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:d}=this.getDatasetMeta(c),f=!i&&s.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||ve(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Rw("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){ve(this.scales,e=>{rn.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!$0(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;fF(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!$0(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;rn.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],ve(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,si(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Wn.has(this)?this.attached&&!Wn.running(this)&&Wn.start(this):(this.draw(),Nw({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},i=MV(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&Gg(n,i),e.controller.draw(),i&&Qg(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return ll(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=hj.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=rs(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);ol(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Wn.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Z0(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Xc[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};ve(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){ve(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},ve(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!$u(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(l,c)=>l.filter(h=>!c.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),l=yL(e),c=pF(e,this._lastEvent,r,l);r&&(this._lastEvent=null,Ae(s.onHover,[e,a,this],this),l&&Ae(s.onClick,[e,a,this],this));const h=!$u(a,i);return(h||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,h}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}},J(Er,"defaults",$e),J(Er,"instances",Xc),J(Er,"overrides",Yi),J(Er,"registry",Pn),J(Er,"version",uF),J(Er,"getChart",Dw),Er);function Mw(){return ve(Wh.instances,t=>t._plugins.invalidate())}function mF(t,e,n){const{startAngle:r,x:i,y:s,outerRadius:o,innerRadius:a,options:l}=e,{borderWidth:c,borderJoinStyle:h}=l,d=Math.min(c/o,gn(r-n));if(t.beginPath(),t.arc(i,s,o-c/2,r+d/2,n-d/2),a>0){const f=Math.min(c/a,gn(r-n));t.arc(i,s,a+c/2,n-f/2,r+f/2,!0)}else{const f=Math.min(c/2,o*gn(r-n));if(h==="round")t.arc(i,s,f,n-we/2,r+we/2,!0);else if(h==="bevel"){const g=2*f*f,_=-g*Math.cos(n+we/2)+i,v=-g*Math.sin(n+we/2)+s,T=g*Math.cos(r+we/2)+i,w=g*Math.sin(r+we/2)+s;t.lineTo(_,v),t.lineTo(T,w)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function gF(t,e,n){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=i/a;t.beginPath(),t.arc(s,o,a,r-c,n+c),l>i?(c=i/l,t.arc(s,o,l,n+c,r-c,!0)):t.arc(s,o,i,n+Xe,r-Xe),t.closePath(),t.clip()}function yF(t){return Yg(t,["outerStart","outerEnd","innerStart","innerEnd"])}function _F(t,e,n,r){const i=yF(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,r*e/2),a=l=>{const c=(n-Math.min(s,l))*r/2;return Ft(l,0,Math.min(s,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:Ft(i.innerStart,0,o),innerEnd:Ft(i.innerEnd,0,o)}}function us(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function Yu(t,e,n,r,i,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:h}=e,d=Math.max(e.outerRadius+r+n-c,0),f=h>0?h+r+n+c:0;let g=0;const _=i-l;if(r){const j=h>0?h-r:0,Q=d>0?d-r:0,X=(j+Q)/2,z=X!==0?_*X/(X+r):_;g=(_-z)/2}const v=Math.max(.001,_*d-n/we)/d,T=(_-v)/2,w=l+T+g,x=i-T-g,{outerStart:b,outerEnd:R,innerStart:N,innerEnd:M}=_F(e,f,d,x-w),S=d-b,E=d-R,C=w+b/S,I=x-R/E,P=f+N,D=f+M,A=w+N/P,Y=x-M/D;if(t.beginPath(),s){const j=(C+I)/2;if(t.arc(o,a,d,C,j),t.arc(o,a,d,j,I),R>0){const H=us(E,I,o,a);t.arc(H.x,H.y,R,I,x+Xe)}const Q=us(D,x,o,a);if(t.lineTo(Q.x,Q.y),M>0){const H=us(D,Y,o,a);t.arc(H.x,H.y,M,x+Xe,Y+Math.PI)}const X=(x-M/f+(w+N/f))/2;if(t.arc(o,a,f,x-M/f,X,!0),t.arc(o,a,f,X,w+N/f,!0),N>0){const H=us(P,A,o,a);t.arc(H.x,H.y,N,A+Math.PI,w-Xe)}const z=us(S,w,o,a);if(t.lineTo(z.x,z.y),b>0){const H=us(S,C,o,a);t.arc(H.x,H.y,b,w-Xe,C)}}else{t.moveTo(o,a);const j=Math.cos(C)*d+o,Q=Math.sin(C)*d+a;t.lineTo(j,Q);const X=Math.cos(I)*d+o,z=Math.sin(I)*d+a;t.lineTo(X,z)}t.closePath()}function vF(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){Yu(t,e,n,r,l,i);for(let c=0;c<s;++c)t.fill();isNaN(a)||(l=o+(a%Ue||Ue))}return Yu(t,e,n,r,l,i),t.fill(),l}function wF(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:h,borderDash:d,borderDashOffset:f,borderRadius:g}=l,_=l.borderAlign==="inner";if(!c)return;t.setLineDash(d||[]),t.lineDashOffset=f,_?(t.lineWidth=c*2,t.lineJoin=h||"round"):(t.lineWidth=c,t.lineJoin=h||"bevel");let v=e.endAngle;if(s){Yu(t,e,n,r,v,i);for(let T=0;T<s;++T)t.stroke();isNaN(a)||(v=o+(a%Ue||Ue))}_&&gF(t,e,v),l.selfJoin&&v-o>=we&&g===0&&h!=="miter"&&mF(t,e,v),s||(Yu(t,e,n,r,v,i),t.stroke())}class oa extends Sn{constructor(n){super();J(this,"circumference");J(this,"endAngle");J(this,"fullCircles");J(this,"innerRadius");J(this,"outerRadius");J(this,"pixelMargin");J(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.getProps(["x","y"],i),{angle:o,distance:a}=HI(s,{x:n,y:r}),{startAngle:l,endAngle:c,innerRadius:h,outerRadius:d,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),g=(this.options.spacing+this.options.borderWidth)/2,_=ue(f,c-l),v=al(o,l,c)&&l!==c,T=_>=Ue||v,w=Or(a,h+g,d+g);return T&&w}getCenterPoint(n){const{x:r,y:i,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:h}=this.options,d=(s+o)/2,f=(a+l+h+c)/2;return{x:r+Math.cos(d)*f,y:i+Math.sin(d)*f}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:i}=this,s=(r.offset||0)/4,o=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>Ue?Math.floor(i/Ue):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(we,i||0)),h=s*c;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,vF(n,this,h,o,a),wF(n,this,h,o,a),n.restore()}}J(oa,"id","arc"),J(oa,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),J(oa,"defaultRoutes",{backgroundColor:"backgroundColor"}),J(oa,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function vb(t,e,n=e){t.lineCap=ue(n.borderCapStyle,e.borderCapStyle),t.setLineDash(ue(n.borderDash,e.borderDash)),t.lineDashOffset=ue(n.borderDashOffset,e.borderDashOffset),t.lineJoin=ue(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ue(n.borderWidth,e.borderWidth),t.strokeStyle=ue(n.borderColor,e.borderColor)}function EF(t,e,n){t.lineTo(n.x,n.y)}function xF(t){return t.stepped?BL:t.tension||t.cubicInterpolationMode==="monotone"?$L:EF}function wb(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),h=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!h?r+c-l:c-l}}function TF(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=wb(i,n,r),h=xF(s);let{move:d=!0,reverse:f}=r||{},g,_,v;for(g=0;g<=c;++g)_=i[(a+(f?c-g:g))%o],!_.skip&&(d?(t.moveTo(_.x,_.y),d=!1):h(t,v,_,f,s.stepped),v=_);return l&&(_=i[(a+(f?c:0))%o],h(t,v,_,f,s.stepped)),!!l}function SF(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=wb(i,n,r),{move:l=!0,reverse:c}=r||{};let h=0,d=0,f,g,_,v,T,w;const x=R=>(o+(c?a-R:R))%s,b=()=>{v!==T&&(t.lineTo(h,T),t.lineTo(h,v),t.lineTo(h,w))};for(l&&(g=i[x(0)],t.moveTo(g.x,g.y)),f=0;f<=a;++f){if(g=i[x(f)],g.skip)continue;const R=g.x,N=g.y,M=R|0;M===_?(N<v?v=N:N>T&&(T=N),h=(d*h+R)/++d):(b(),t.lineTo(R,N),_=M,d=0,v=T=N),w=N}b()}function Up(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?SF:TF}function IF(t){return t.stepped?EV:t.tension||t.cubicInterpolationMode==="monotone"?xV:Ci}function bF(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),vb(t,e.options),t.stroke(i)}function kF(t,e,n,r){const{segments:i,options:s}=e,o=Up(e);for(const a of i)vb(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const CF=typeof Path2D=="function";function AF(t,e,n,r){CF&&!e.options.segment?bF(t,e,n,r):kF(t,e,n,r)}class aa extends Sn{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;fV(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=PV(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=kV(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=IF(r);let c,h;for(c=0,h=o.length;c<h;++c){const{start:d,end:f}=o[c],g=s[d],_=s[f];if(g===_){a.push(g);continue}const v=Math.abs((i-g[n])/(_[n]-g[n])),T=l(g,_,v,r.stepped);T[n]=e[n],a.push(T)}return a.length===1?a[0]:a}pathSegment(e,n,r){return Up(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=Up(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),AF(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}J(aa,"id","line"),J(aa,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),J(aa,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),J(aa,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Ow(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class Jc extends Sn{constructor(n){super();J(this,"parsed");J(this,"skip");J(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return Ow(this,n,"x",r)}inYRange(n,r){return Ow(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!ll(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,Lp(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}J(Jc,"id","point"),J(Jc,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),J(Jc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Eb(t,e){const{x:n,y:r,base:i,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,h,d;return t.horizontal?(d=o/2,a=Math.min(n,i),l=Math.max(n,i),c=r-d,h=r+d):(d=s/2,a=n-d,l=n+d,c=Math.min(r,i),h=Math.max(r,i)),{left:a,top:c,right:l,bottom:h}}function Vr(t,e,n,r){return t?0:Ft(e,n,r)}function PF(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,s=JI(r);return{t:Vr(i.top,s.top,0,n),r:Vr(i.right,s.right,0,e),b:Vr(i.bottom,s.bottom,0,n),l:Vr(i.left,s.left,0,e)}}function RF(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,s=Vs(i),o=Math.min(e,n),a=t.borderSkipped,l=r||ge(i);return{topLeft:Vr(!l||a.top||a.left,s.topLeft,0,o),topRight:Vr(!l||a.top||a.right,s.topRight,0,o),bottomLeft:Vr(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:Vr(!l||a.bottom||a.right,s.bottomRight,0,o)}}function NF(t){const e=Eb(t),n=e.right-e.left,r=e.bottom-e.top,i=PF(t,n/2,r/2),s=RF(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function uf(t,e,n,r){const i=e===null,s=n===null,a=t&&!(i&&s)&&Eb(t,r);return a&&(i||Or(e,a.left,a.right))&&(s||Or(n,a.top,a.bottom))}function DF(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function MF(t,e){t.rect(e.x,e.y,e.w,e.h)}function hf(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+s,h:t.h+o,radius:t.radius}}class Zc extends Sn{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=NF(this),a=DF(o.radius)?Ku:MF;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,hf(o,n,s)),e.clip(),a(e,hf(s,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,hf(s,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,r){return uf(this,e,n,r)}inXRange(e,n){return uf(this,e,null,n)}inYRange(e,n){return uf(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+i)/2:n,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}J(Zc,"id","bar"),J(Zc,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),J(Zc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Lw=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},OF=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Vw extends Sn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Ae(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=Et(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Lw(r,s);let c,h;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,s,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=i+a;let d=e;s.textAlign="left",s.textBaseline="middle";let f=-1,g=-h;return this.legendItems.forEach((_,v)=>{const T=r+n/2+s.measureText(_.text).width;(v===0||c[c.length-1]+T+2*a>o)&&(d+=h,c[c.length-(v>0?0:1)]=0,g+=h,f++),l[v]={left:0,top:g,row:f,width:T,height:i},c[c.length-1]+=T+a}),d}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-e;let d=a,f=0,g=0,_=0,v=0;return this.legendItems.forEach((T,w)=>{const{itemWidth:x,itemHeight:b}=LF(r,n,s,T,i);w>0&&g+b+2*a>h&&(d+=f+a,c.push({width:f,height:g}),_+=f+a,v++,f=g=0),l[w]={left:_,top:g,col:v,width:x,height:b},f=Math.max(f,x),g+=b+a}),d+=f,c.push({width:f,height:g}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=js(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=yt(r,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=yt(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=yt(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=yt(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Gg(e,this),this._draw(),Qg(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=$e.color,l=js(e.rtl,this.left,this.width),c=Et(o.font),{padding:h}=o,d=c.size,f=d/2;let g;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:_,boxHeight:v,itemHeight:T}=Lw(o,d),w=function(M,S,E){if(isNaN(_)||_<=0||isNaN(v)||v<0)return;i.save();const C=ue(E.lineWidth,1);if(i.fillStyle=ue(E.fillStyle,a),i.lineCap=ue(E.lineCap,"butt"),i.lineDashOffset=ue(E.lineDashOffset,0),i.lineJoin=ue(E.lineJoin,"miter"),i.lineWidth=C,i.strokeStyle=ue(E.strokeStyle,a),i.setLineDash(ue(E.lineDash,[])),o.usePointStyle){const I={radius:v*Math.SQRT2/2,pointStyle:E.pointStyle,rotation:E.rotation,borderWidth:C},P=l.xPlus(M,_/2),D=S+f;XI(i,I,P,D,o.pointStyleWidth&&_)}else{const I=S+Math.max((d-v)/2,0),P=l.leftForLtr(M,_),D=Vs(E.borderRadius);i.beginPath(),Object.values(D).some(A=>A!==0)?Ku(i,{x:P,y:I,w:_,h:v,radius:D}):i.rect(P,I,_,v),i.fill(),C!==0&&i.stroke()}i.restore()},x=function(M,S,E){cl(i,E.text,M,S+T/2,c,{strikethrough:E.hidden,textAlign:l.textAlign(E.textAlign)})},b=this.isHorizontal(),R=this._computeTitleHeight();b?g={x:yt(s,this.left+h,this.right-r[0]),y:this.top+h+R,line:0}:g={x:this.left+h,y:yt(s,this.top+R+h,this.bottom-n[0].height),line:0},ib(this.ctx,e.textDirection);const N=T+h;this.legendItems.forEach((M,S)=>{i.strokeStyle=M.fontColor,i.fillStyle=M.fontColor;const E=i.measureText(M.text).width,C=l.textAlign(M.textAlign||(M.textAlign=o.textAlign)),I=_+f+E;let P=g.x,D=g.y;l.setWidth(this.width),b?S>0&&P+I+h>this.right&&(D=g.y+=N,g.line++,P=g.x=yt(s,this.left+h,this.right-r[g.line])):S>0&&D+N>this.bottom&&(P=g.x=P+n[g.line].width+h,g.line++,D=g.y=yt(s,this.top+R+h,this.bottom-n[g.line].height));const A=l.x(P);if(w(A,D,M),P=RL(C,P+_+f,b?P+I:this.right,e.rtl),x(l.x(P),D,M),b)g.x+=I+h;else if(typeof M.text!="string"){const Y=c.lineHeight;g.y+=xb(M,Y)+h}else g.y+=N}),sb(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=Et(n.font),i=hn(n.padding);if(!n.display)return;const s=js(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=i.top+l;let h,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),h=this.top+c,d=yt(e.align,d,this.right-f);else{const _=this.columnSizes.reduce((v,T)=>Math.max(v,T.height),0);h=c+yt(e.align,this.top,this.bottom-_-e.labels.padding-this._computeTitleHeight())}const g=yt(a,d,d+f);o.textAlign=s.textAlign(Hg(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,cl(o,n.text,g,h,r)}_computeTitleHeight(){const e=this.options.title,n=Et(e.font),r=hn(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(Or(e,this.left,this.right)&&Or(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],Or(e,i.left,i.left+i.width)&&Or(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!FF(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=OF(i,r);i&&!s&&Ae(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&Ae(n.onHover,[e,r,this],this)}else r&&Ae(n.onClick,[e,r,this],this)}}function LF(t,e,n,r,i){const s=VF(r,t,e,n),o=jF(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function VF(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function jF(t,e,n){let r=t;return typeof e.text!="string"&&(r=xb(e,n)),r}function xb(t,e){const n=t.text?t.text.length:0;return e*n}function FF(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var UF={id:"legend",_element:Vw,start(t,e,n){const r=t.legend=new Vw({ctx:t.ctx,options:n,chart:t});rn.configure(t,r,n),rn.addBox(t,r)},stop(t){rn.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;rn.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),h=hn(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Tb extends Sn{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=Qe(r.text)?r.text.length:1;this._padding=hn(r.padding);const s=i*Et(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,c,h,d;return this.isHorizontal()?(h=yt(a,r,s),d=n+e,c=s-r):(o.position==="left"?(h=r+e,d=yt(a,i,n),l=we*-.5):(h=s-e,d=yt(a,n,i),l=we*.5),c=i-n),{titleX:h,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=Et(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);cl(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:Hg(n.align),textBaseline:"middle",translation:[o,a]})}}function zF(t,e){const n=new Tb({ctx:t.ctx,options:e,chart:t});rn.configure(t,n,e),rn.addBox(t,n),t.titleBlock=n}var BF={id:"title",_element:Tb,start(t,e,n){zF(t,n)},stop(t){const e=t.titleBlock;rn.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;rn.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const la={average(t){if(!t.length)return!1;let e,n,r=new Set,i=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),i+=l.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=Dp(e,c);h<i&&(i=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function Cn(t,e){return e&&(Qe(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Hn(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function $F(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function jw(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=Et(e.bodyFont),c=Et(e.titleFont),h=Et(e.footerFont),d=s.length,f=i.length,g=r.length,_=hn(e.padding);let v=_.height,T=0,w=r.reduce((R,N)=>R+N.before.length+N.lines.length+N.after.length,0);if(w+=t.beforeBody.length+t.afterBody.length,d&&(v+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),w){const R=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;v+=g*R+(w-g)*l.lineHeight+(w-1)*e.bodySpacing}f&&(v+=e.footerMarginTop+f*h.lineHeight+(f-1)*e.footerSpacing);let x=0;const b=function(R){T=Math.max(T,n.measureText(R).width+x)};return n.save(),n.font=c.string,ve(t.title,b),n.font=l.string,ve(t.beforeBody.concat(t.afterBody),b),x=e.displayColors?o+2+e.boxPadding:0,ve(r,R=>{ve(R.before,b),ve(R.lines,b),ve(R.after,b)}),x=0,n.font=h.string,ve(t.footer,b),n.restore(),T+=_.width,{width:T,height:v}}function WF(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function HF(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function qF(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),HF(c,t,e,n)&&(c="center"),c}function Fw(t,e,n){const r=n.yAlign||e.yAlign||WF(t,n);return{xAlign:n.xAlign||e.xAlign||qF(t,e,n,r),yAlign:r}}function KF(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function GF(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function Uw(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:g}=Vs(o);let _=KF(e,a);const v=GF(e,l,c);return l==="center"?a==="left"?_+=c:a==="right"&&(_-=c):a==="left"?_-=Math.max(h,f)+i:a==="right"&&(_+=Math.max(d,g)+i),{x:Ft(_,0,r.width-e.width),y:Ft(v,0,r.height-e.height)}}function bc(t,e,n){const r=hn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function zw(t){return Cn([],Hn(t))}function QF(t,e,n){return rs(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Bw(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const Sb={beforeTitle:$n,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:$n,beforeBody:$n,beforeLabel:$n,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Se(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:$n,afterBody:$n,beforeFooter:$n,footer:$n,afterFooter:$n};function Dt(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?Sb[e].call(n,r):i}class zp extends Sn{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new ab(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=QF(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=Dt(r,"beforeTitle",this,e),s=Dt(r,"title",this,e),o=Dt(r,"afterTitle",this,e);let a=[];return a=Cn(a,Hn(i)),a=Cn(a,Hn(s)),a=Cn(a,Hn(o)),a}getBeforeBody(e,n){return zw(Dt(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return ve(e,s=>{const o={before:[],lines:[],after:[]},a=Bw(r,s);Cn(o.before,Hn(Dt(a,"beforeLabel",this,s))),Cn(o.lines,Dt(a,"label",this,s)),Cn(o.after,Hn(Dt(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return zw(Dt(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=Dt(r,"beforeFooter",this,e),s=Dt(r,"footer",this,e),o=Dt(r,"afterFooter",this,e);let a=[];return a=Cn(a,Hn(i)),a=Cn(a,Hn(s)),a=Cn(a,Hn(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push($F(this.chart,n[l]));return e.filter&&(a=a.filter((h,d,f)=>e.filter(h,d,f,r))),e.itemSort&&(a=a.sort((h,d)=>e.itemSort(h,d,r))),ve(a,h=>{const d=Bw(e.callbacks,h);i.push(Dt(d,"labelColor",this,h)),s.push(Dt(d,"labelPointStyle",this,h)),o.push(Dt(d,"labelTextColor",this,h))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=la[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=jw(this,r),c=Object.assign({},a,l),h=Fw(this.chart,r,c),d=Uw(r,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:d}=Vs(a),{x:f,y:g}=e,{width:_,height:v}=n;let T,w,x,b,R,N;return s==="center"?(R=g+v/2,i==="left"?(T=f,w=T-o,b=R+o,N=R-o):(T=f+_,w=T+o,b=R-o,N=R+o),x=T):(i==="left"?w=f+Math.max(l,h)+o:i==="right"?w=f+_-Math.max(c,d)-o:w=this.caretX,s==="top"?(b=g,R=b-o,T=w-o,x=w+o):(b=g+v,R=b+o,T=w+o,x=w-o),N=b),{x1:T,x2:w,x3:x,y1:b,y2:R,y3:N}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=js(r.rtl,this.x,this.width);for(e.x=bc(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=Et(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,h=Et(s.bodyFont),d=bc(this,"left",s),f=i.x(d),g=l<h.lineHeight?(h.lineHeight-l)/2:0,_=n.y+g;if(s.usePointStyle){const v={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},T=i.leftForLtr(f,c)+c/2,w=_+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,Lp(e,v,T,w),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Lp(e,v,T,w)}else{e.lineWidth=ge(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const v=i.leftForLtr(f,c),T=i.leftForLtr(i.xPlus(f,1),c-2),w=Vs(o.borderRadius);Object.values(w).some(x=>x!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Ku(e,{x:v,y:_,w:c,h:l,radius:w}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Ku(e,{x:T,y:_+1,w:c-2,h:l-2,radius:w}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(v,_,c,l),e.strokeRect(v,_,c,l),e.fillStyle=o.backgroundColor,e.fillRect(T,_+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=r,d=Et(r.bodyFont);let f=d.lineHeight,g=0;const _=js(r.rtl,this.x,this.width),v=function(E){n.fillText(E,_.x(e.x+g),e.y+f/2),e.y+=f+s},T=_.textAlign(o);let w,x,b,R,N,M,S;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=bc(this,T,r),n.fillStyle=r.bodyColor,ve(this.beforeBody,v),g=a&&T!=="right"?o==="center"?c/2+h:c+2+h:0,R=0,M=i.length;R<M;++R){for(w=i[R],x=this.labelTextColors[R],n.fillStyle=x,ve(w.before,v),b=w.lines,a&&b.length&&(this._drawColorBox(n,e,R,_,r),f=Math.max(d.lineHeight,l)),N=0,S=b.length;N<S;++N)v(b[N]),f=d.lineHeight;ve(w.after,v)}g=0,f=d.lineHeight,ve(this.afterBody,v),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=js(r.rtl,this.x,this.width);for(e.x=bc(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=Et(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:h}=r,{topLeft:d,topRight:f,bottomLeft:g,bottomRight:_}=Vs(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+c-f,l),n.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+c,l+h-_),n.quadraticCurveTo(a+c,l+h,a+c-_,l+h),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+g,l+h),n.quadraticCurveTo(a,l+h,a,l+h-g),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=la[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=jw(this,e),l=Object.assign({},o,this._size),c=Fw(n,e,l),h=Uw(e,l,c,n);(i._to!==h.x||s._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=hn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),ib(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),sb(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!$u(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),l=n||!$u(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=la[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}J(zp,"positioners",la);var YF={id:"tooltip",_element:zp,positioners:la,afterInit(t,e,n){n&&(t.tooltip=new zp({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Sb},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const XF=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function JF(t,e,n,r){const i=t.indexOf(e);if(i===-1)return XF(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const ZF=(t,e)=>t===null?null:Ft(Math.round(t),0,e);function $w(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Bp extends yo{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Se(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:JF(r,e,ue(n,e),this._addedLabels),ZF(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return $w.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}J(Bp,"id","category"),J(Bp,"defaults",{ticks:{callback:$w}});function eU(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:d,includeBounds:f}=t,g=s||1,_=h-1,{min:v,max:T}=e,w=!Se(o),x=!Se(a),b=!Se(c),R=(T-v)/(d+1);let N=H0((T-v)/_/g)*g,M,S,E,C;if(N<1e-14&&!w&&!x)return[{value:v},{value:T}];C=Math.ceil(T/N)-Math.floor(v/N),C>_&&(N=H0(C*N/_/g)*g),Se(l)||(M=Math.pow(10,l),N=Math.ceil(N*M)/M),i==="ticks"?(S=Math.floor(v/N)*N,E=Math.ceil(T/N)*N):(S=v,E=T),w&&x&&s&&xL((a-o)/s,N/1e3)?(C=Math.round(Math.min((a-o)/N,h)),N=(a-o)/C,S=o,E=a):b?(S=w?o:S,E=x?a:E,C=c-1,N=(E-S)/C):(C=(E-S)/N,Ia(C,Math.round(C),N/1e3)?C=Math.round(C):C=Math.ceil(C));const I=Math.max(q0(N),q0(S));M=Math.pow(10,Se(l)?I:l),S=Math.round(S*M)/M,E=Math.round(E*M)/M;let P=0;for(w&&(f&&S!==o?(n.push({value:o}),S<o&&P++,Ia(Math.round((S+P*N)*M)/M,o,Ww(o,R,t))&&P++):S<o&&P++);P<C;++P){const D=Math.round((S+P*N)*M)/M;if(x&&D>a)break;n.push({value:D})}return x&&f&&E!==a?n.length&&Ia(n[n.length-1].value,a,Ww(a,R,t))?n[n.length-1].value=a:n.push({value:a}):(!x||E===a)&&n.push({value:E}),n}function Ww(t,e,{horizontal:n,minRotation:r}){const i=er(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class tU extends yo{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Se(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(e){const l=Fn(i),c=Fn(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=eU(i,s);return e.bounds==="ticks"&&TL(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return Kg(e,this.chart.options.locale,this.options.ticks.format)}}class $p extends tU{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=un(e)?e:0,this.max=un(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=er(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}J($p,"id","linear"),J($p,"defaults",{ticks:{callback:YI.formatters.numeric}});const Hh={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Vt=Object.keys(Hh);function Hw(t,e){return t-e}function qw(t,e){if(Se(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),un(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(qu(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function Kw(t,e,n,r){const i=Vt.length;for(let s=Vt.indexOf(t);s<i-1;++s){const o=Hh[Vt[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return Vt[s]}return Vt[i-1]}function nU(t,e,n,r,i){for(let s=Vt.length-1;s>=Vt.indexOf(n);s--){const o=Vt[s];if(Hh[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return Vt[n?Vt.indexOf(n):0]}function rU(t){for(let e=Vt.indexOf(t)+1,n=Vt.length;e<n;++e)if(Hh[Vt[e]].common)return Vt[e]}function Gw(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=Wg(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function iU(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function Qw(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:iU(t,r,i,n)}class Xu extends yo{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new oj._date(e.adapters.date);i.init(n),Sa(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:qw(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=un(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=un(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=CL(i,s,o);return this._unit=n.unit||(r.autoSkip?Kw(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):nU(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:rU(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),Qw(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Ft(n,0,o),r=Ft(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||Kw(s.minUnit,n,r,this._getLabelCapacity(n)),a=ue(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=qu(l)||l===!0,h={};let d=n,f,g;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const _=i.ticks.source==="data"&&this.getDataTimestamps();for(f=d,g=0;f<r;f=+e.add(f,a,o),g++)Gw(h,f,_);return(f===r||i.bounds==="ticks"||g===1)&&Gw(h,f,_),Object.keys(h).sort(Hw).map(v=>+v)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return Ae(o,[e,n,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],d=c&&a[c],f=r[n],g=c&&d&&f&&f.major;return this._adapter.format(e,i||(g?d:h))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=er(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,Qw(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(qw(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return KI(e.sort(Hw))}}J(Xu,"id","time"),J(Xu,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function kc(t,e,n){let r=0,i=t.length-1,s,o,a,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=Mp(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=Mp(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:l}=t[i]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class Yw extends Xu{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=kc(n,this.min),this._tableRange=kc(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,l,c,h;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)h=i[o+1],l=i[o-1],c=i[o],Math.round((h+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(kc(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return kc(this._table,r*this._tableRange+this._minPos,!0)}}J(Yw,"id","timeseries"),J(Yw,"defaults",Xu.defaults);const Ib="label";function Xw(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function sU(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function bb(t,e){t.labels=e}function kb(t,e,n=Ib){const r=[];t.datasets=e.map(i=>{const s=t.datasets.find(o=>o[n]===i[n]);return!s||!i.data||r.includes(s)?{...i}:(r.push(s),Object.assign(s,i),s)})}function oU(t,e=Ib){const n={labels:[],datasets:[]};return bb(n,t.labels),kb(n,t.datasets,e),n}function aU(t,e){const{height:n=150,width:r=300,redraw:i=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:c=[],fallbackContent:h,updateMode:d,...f}=t,g=O.useRef(null),_=O.useRef(null),v=()=>{g.current&&(_.current=new Wh(g.current,{type:o,data:oU(a,s),options:l&&{...l},plugins:c}),Xw(e,_.current))},T=()=>{Xw(e,null),_.current&&(_.current.destroy(),_.current=null)};return O.useEffect(()=>{!i&&_.current&&l&&sU(_.current,l)},[i,l]),O.useEffect(()=>{!i&&_.current&&bb(_.current.config.data,a.labels)},[i,a.labels]),O.useEffect(()=>{!i&&_.current&&a.datasets&&kb(_.current.config.data,a.datasets,s)},[i,a.datasets]),O.useEffect(()=>{_.current&&(i?(T(),setTimeout(v)):_.current.update(d))},[i,l,a.labels,a.datasets,d]),O.useEffect(()=>{_.current&&(T(),setTimeout(v))},[o]),O.useEffect(()=>(v(),()=>T()),[]),p.jsx("canvas",{ref:g,role:"img",height:n,width:r,...f,children:h})}const lU=O.forwardRef(aU);function Cb(t,e){return Wh.register(e),O.forwardRef((n,r)=>p.jsx(lU,{...n,ref:r,type:t}))}const cU=Cb("bar",Qc),uU=Cb("pie",Vp);function hU({loading:t,error:e,filteredOrders:n,stats:r,filterStatus:i,setFilterStatus:s,updateOrderStatus:o,formatDate:a,activeView:l,setActiveView:c,analyticsTimeframe:h,setAnalyticsTimeframe:d,analyticsData:f,productMap:g,totalProducts:_,barChartData:v,barChartOptions:T,pieChartData:w,pieChartOptions:x}){var C;const[b,R]=O.useState(!1),[N,M]=O.useState(null),S=I=>{M(I),R(!0)},E=()=>{R(!1),M(null)};return p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"view-toggle-section",children:[p.jsx("button",{className:`view-toggle-btn ${l==="orders"?"active":""}`,onClick:()=>c("orders"),children:"Orders List"}),p.jsx("button",{className:`view-toggle-btn ${l==="analytics"?"active":""}`,onClick:()=>c("analytics"),children:"Analytics"})]}),l==="analytics"&&p.jsxs("div",{className:"analytics-section",children:[p.jsx("h2",{children:"Orders Analytics"}),p.jsxs("div",{className:"analytics-controls",children:[p.jsx("button",{className:`time-filter-btn ${h==="day"?"active":""}`,onClick:()=>d("day"),children:"Day"}),p.jsx("button",{className:`time-filter-btn ${h==="week"?"active":""}`,onClick:()=>d("week"),children:"Week"}),p.jsx("button",{className:`time-filter-btn ${h==="month"?"active":""}`,onClick:()=>d("month"),children:"Month"}),p.jsx("button",{className:`time-filter-btn ${h==="year"?"active":""}`,onClick:()=>d("year"),children:"Year"})]}),p.jsxs("div",{className:"charts-container",children:[p.jsx("div",{className:"chart-wrapper",children:f.length===0?p.jsx("div",{className:"chart-empty",children:p.jsx("p",{children:"No data available for this period"})}):p.jsx(cU,{data:v,options:T})}),p.jsx("div",{className:"chart-wrapper",children:Object.keys(g).length===0?p.jsx("div",{className:"chart-empty",children:p.jsx("p",{children:"No products ordered yet"})}):p.jsx(uU,{data:w,options:x})})]}),Object.keys(g).length>0&&p.jsxs("div",{className:"product-stats-summary",children:[p.jsx("h3",{children:"Product Order Summary"}),p.jsx("div",{className:"product-stats-table",children:p.jsxs("table",{children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"Product Name"}),p.jsx("th",{children:"Quantity Ordered"}),p.jsx("th",{children:"Percentage"})]})}),p.jsx("tbody",{children:Object.entries(g).sort(([,I],[,P])=>P-I).map(([I,P])=>p.jsxs("tr",{children:[p.jsx("td",{className:"product-name",children:I}),p.jsx("td",{className:"product-quantity",children:P}),p.jsxs("td",{className:"product-percentage",children:[(P/_*100).toFixed(1),"%"]})]},I))})]})})]})]}),l==="orders"&&p.jsxs("div",{className:"orders-section",children:[p.jsx("div",{className:"filters-section",children:p.jsxs("div",{className:"filter-buttons",children:[p.jsxs("button",{className:`filter-btn ${i==="all"?"active":""}`,onClick:()=>s("all"),children:["All (",r.total,")"]}),p.jsxs("button",{className:`filter-btn ${i==="pending"?"active":""}`,onClick:()=>s("pending"),children:["Pending (",r.pending,")"]}),p.jsxs("button",{className:`filter-btn ${i==="confirmed"?"active":""}`,onClick:()=>s("confirmed"),children:["Confirmed (",r.confirmed,")"]}),p.jsxs("button",{className:`filter-btn ${i==="ready_for_pickup"?"active":""}`,onClick:()=>s("ready_for_pickup"),children:["Ready for Pickup (",r.ready_for_pickup,")"]}),p.jsxs("button",{className:`filter-btn ${i==="completed"?"active":""}`,onClick:()=>s("completed"),children:["Completed (",r.completed,")"]}),p.jsxs("button",{className:`filter-btn ${i==="cancelled"?"active":""}`,onClick:()=>s("cancelled"),children:["Cancelled (",r.cancelled,")"]})]})}),t&&p.jsx("div",{className:"loading",children:"Loading orders..."}),e&&p.jsx("div",{className:"error-message",children:e}),!t&&n.length===0&&p.jsx("div",{className:"empty-state",children:p.jsx("p",{children:"No orders found"})}),!t&&n.length>0&&p.jsx("div",{className:"orders-list-container",children:n.map(I=>p.jsxs("div",{className:"order-card-admin",children:[p.jsxs("div",{className:"order-card-header",children:[p.jsxs("div",{className:"order-info",children:[p.jsxs("span",{className:"order-id",children:["Order #",I.id.slice(0,8).toUpperCase()]}),p.jsx("span",{className:"order-customer",children:I.userEmail})]}),p.jsx("span",{className:`order-status status-${I.status}`,children:I.status})]}),p.jsxs("div",{className:"order-actions3",children:[p.jsx("button",{className:"action-btn view-details-btn3",onClick:()=>S(I),children:"View Details"}),I.status==="pending"&&p.jsx("button",{className:"action-btn confirm-btn",onClick:()=>o(I.id,"confirmed"),children:"Confirm Order"}),I.status==="confirmed"&&p.jsx("button",{className:"action-btn ready-btn",onClick:()=>o(I.id,"ready_for_pickup"),children:"Ready for Pickup"}),I.status==="ready_for_pickup"&&p.jsx("button",{className:"action-btn complete-btn",onClick:()=>o(I.id,"completed"),children:"Mark Completed"}),I.status!=="completed"&&I.status!=="cancelled"&&p.jsx("button",{className:"action-btn cancel-btn1",onClick:()=>{window.confirm("Are you sure you want to cancel this order?")&&o(I.id,"cancelled")},children:"Cancel Order"})]})]},I.id))})]}),b&&N&&p.jsx("div",{className:"modal-overlay",onClick:E,children:p.jsx("div",{className:"modal-content details-modal",onClick:I=>I.stopPropagation(),children:p.jsxs("div",{className:"modal-body",children:[p.jsxs("div",{className:"details-sectionnn",children:[p.jsxs("div",{className:"detail-item1",children:[p.jsx("span",{className:"detail-label1",children:"Order ID:"}),p.jsxs("span",{className:"detail-value1",children:["#",N.id.slice(0,8).toUpperCase()]})]}),p.jsxs("div",{className:"detail-item1",children:[p.jsx("span",{className:"detail-label1",children:"Date:"}),p.jsx("span",{className:"detail-value1",children:a(N.createdAt)})]}),p.jsxs("div",{className:"detail-item1",children:[p.jsx("span",{className:"detail-label1",children:"Status:"}),p.jsx("span",{className:`detail-badge status-${N.status}`,children:N.status})]})]}),p.jsx("div",{className:"divider"}),p.jsxs("div",{className:"items-section",children:[p.jsx("h4",{className:"section-title",children:"Items Ordered"}),p.jsx("div",{className:"items-in-modal",children:N.items&&N.items.map((I,P)=>p.jsxs("div",{className:"modal-item",children:[p.jsxs("div",{className:"modal-item-info",children:[p.jsx("span",{className:"modal-item-name",children:I.name}),p.jsxs("span",{className:"modal-item-qty",children:["Qty: ",I.quantity]})]}),p.jsxs("span",{className:"modal-item-subtotal",children:["",(I.price*I.quantity).toFixed(2)]})]},P))})]}),p.jsx("div",{className:"divider"}),p.jsxs("div",{className:"summary-section",children:[p.jsxs("div",{className:"summary-item",children:[p.jsx("span",{className:"summary-label",children:"Total Amount:"}),p.jsxs("span",{className:"summary-value",children:["",((C=N.totalAmount)==null?void 0:C.toFixed(2))||"0.00"]})]}),N.paymentMethod&&p.jsxs("div",{className:"summary-item",children:[p.jsx("span",{className:"summary-label",children:"Payment Method:"}),p.jsx("span",{className:"summary-value",children:N.paymentMethod})]})]}),p.jsx("button",{className:"btn btn-primary btn-close-modal",onClick:E,children:"Close"})]})})})]})}function dU({loading:t,error:e,allUsers:n,stats:r,filterRole:i,setFilterRole:s,handleDeleteUser:o,handleChangeRole:a,formatDate:l}){const[c,h]=O.useState(!1),[d,f]=O.useState(null),[g,_]=O.useState({}),v=R=>{f(R),h(!0)},T=()=>{h(!1),f(null)},w=(R,N)=>{_(M=>({...M,[R]:N}))},x=R=>{const N=g[R];N&&(a(R,N),_(M=>{const S={...M};return delete S[R],S}),(d==null?void 0:d.id)===R&&f({...d,role:N}))},b=i==="all"?n:n.filter(R=>R.role===i);return p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"users-management-section",children:[p.jsx("div",{className:"filters-section",children:p.jsxs("div",{className:"filter-buttons",children:[p.jsxs("button",{className:`filter-btn ${i==="all"?"active":""}`,onClick:()=>s("all"),children:["All Users (",r.total,")"]}),p.jsxs("button",{className:`filter-btn ${i==="user"?"active":""}`,onClick:()=>s("user"),children:["Customers (",r.customers,")"]}),p.jsxs("button",{className:`filter-btn ${i==="admin"?"active":""}`,onClick:()=>s("admin"),children:["Admins (",r.admins,")"]})]})}),t&&p.jsx("div",{className:"loading",children:"Loading users..."}),e&&p.jsx("div",{className:"error-message",children:e}),!t&&n.length===0&&p.jsx("div",{className:"empty-state",children:p.jsx("p",{children:"No users found"})}),!t&&b.length===0&&p.jsx("div",{className:"empty-state",children:p.jsxs("p",{children:["No ",i==="all"?"users":i==="admin"?"admins":"customers"," found"]})}),!t&&b.length>0&&p.jsx("div",{className:"users-list-container",children:b.map(R=>p.jsxs("div",{className:"user-card",children:[p.jsxs("div",{className:"user-card-header",children:[p.jsxs("div",{className:"user-info",children:[p.jsx("span",{className:"user-name",children:R.displayName||"No Name"}),p.jsx("span",{className:"user-email",children:R.email})]}),p.jsx("span",{className:`user-role-badge role-${R.role}`,children:R.role==="admin"?"Admin":"Customer"})]}),p.jsxs("div",{className:"user-card-actions",children:[p.jsx("button",{className:"action-btn view-details-btn",onClick:()=>v(R),children:"View Details"}),p.jsx("button",{className:"action-btn delete-btn",onClick:()=>{window.confirm(`Are you sure you want to delete ${R.displayName||R.email}?`)&&o(R.id)},children:"Delete User"})]})]},R.id))})]}),c&&d&&p.jsx("div",{className:"modal-overlay",onClick:T,children:p.jsx("div",{className:"modal-content details-modal user-details-modal",onClick:R=>R.stopPropagation(),children:p.jsxs("div",{className:"modal-body",children:[p.jsxs("div",{className:"details-section",children:[p.jsxs("div",{className:"detail-item-row",children:[p.jsx("span",{className:"detail-label",children:"Name:"}),p.jsx("span",{className:"detail-value",children:d.displayName||"No Name"})]}),p.jsxs("div",{className:"detail-item-row",children:[p.jsx("span",{className:"detail-label",children:"Email:"}),p.jsx("span",{className:"detail-value",children:d.email})]})]}),p.jsx("div",{className:"divider"}),p.jsxs("div",{className:"details-section",children:[p.jsxs("div",{className:"detail-item-row",children:[p.jsx("span",{className:"detail-label",children:"Joined:"}),p.jsx("span",{className:"detail-value",children:l(d.createdAt)})]}),p.jsxs("div",{className:"detail-item-row",children:[p.jsx("span",{className:"detail-label",children:"Account Status:"}),p.jsx("span",{className:`detail-badge role-${d.role}`,children:d.role==="admin"?"Admin":"Customer"})]})]}),p.jsx("div",{className:"divider"}),p.jsxs("div",{className:"role-management-section",children:[p.jsx("h4",{className:"section-title",children:"Change Role"}),p.jsxs("div",{className:"role-selector",children:[p.jsxs("select",{value:g[d.id]||d.role,onChange:R=>w(d.id,R.target.value),className:"role-select-input",children:[p.jsx("option",{value:"user",children:"Customer"}),p.jsx("option",{value:"admin",children:"Admin"})]}),g[d.id]&&g[d.id]!==d.role&&p.jsx("button",{className:"action-btn save-role-btn",onClick:()=>x(d.id),children:"Save Role"})]})]}),p.jsx("button",{className:"btn btn-primary btn-close-modal1",onClick:T,children:"Close"})]})})})]})}Wh.register(Bp,$p,Jc,aa,Zc,oa,BF,YF,UF);function fU(){const{user:t,userRole:e}=It(),n=Wt(),[r,i]=O.useState([]),[s,o]=O.useState([]),[a,l]=O.useState(!0),[c,h]=O.useState(""),[d,f]=O.useState("all"),[g,_]=O.useState("all"),[v,T]=O.useState("month"),[w,x]=O.useState("orders"),[b,R]=O.useState("orders");O.useEffect(()=>{if(!t||e!=="admin"){n("/");return}N(),S()},[t,e,n]);const N=async()=>{try{l(!0);const B=wn(At(be,"orders"),to("createdAt","asc")),se=await Jr(B),oe=[];se.forEach(ne=>{oe.push({id:ne.id,...ne.data()})}),i(oe),h("")}catch(B){console.error("Error fetching orders:",B),h("Failed to load orders")}finally{l(!1)}},M=async(B,se)=>{try{const oe=an(be,"orders",B);await Ta(oe,{status:se,updatedAt:new Date}),i(r.map(ne=>ne.id===B?{...ne,status:se}:ne))}catch(oe){console.error("Error updating order status:",oe),alert("Failed to update order status. Please try again.")}},S=async()=>{try{const B=wn(At(be,"users"),to("createdAt","desc")),se=await Jr(B),oe=[];se.forEach(ne=>{oe.push({id:ne.id,...ne.data()})}),o(oe),h("")}catch(B){console.error("Error fetching users:",B),h("Failed to load users")}finally{l(!1)}},E=async B=>{try{const se=an(be,"users",B);await Ta(se,{deleted:!0,deletedAt:new Date}),o(s.filter(oe=>oe.id!==B)),alert("User deleted successfully")}catch(se){console.error("Error deleting user:",se),alert("Failed to delete user. Please try again.")}},C=async(B,se)=>{try{const oe=an(be,"users",B);await Ta(oe,{role:se,updatedAt:new Date}),o(s.map(ne=>ne.id===B?{...ne,role:se}:ne)),alert(`User role updated to ${se==="admin"?"Admin":"Customer"}`)}catch(oe){console.error("Error updating user role:",oe),alert("Failed to update user role. Please try again.")}},I=B=>{var oe;return B?(((oe=B.toDate)==null?void 0:oe.call(B))||new Date(B)).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"},D=(()=>{const B=new Date,se={};return r.forEach(oe=>{var In,pi;const ne=((pi=(In=oe.createdAt)==null?void 0:In.toDate)==null?void 0:pi.call(In))||new Date(oe.createdAt);let De;if(v==="day")Math.floor((B-ne)/864e5)<=30&&(De=ne.toLocaleDateString("en-US",{month:"short",day:"numeric"}));else if(v==="week"){if(Math.floor((B-ne)/6048e5)<=12){const gi=new Date(ne);gi.setDate(ne.getDate()-ne.getDay()),De=`Week of ${gi.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`}}else v==="month"?(B.getFullYear()-ne.getFullYear())*12+(B.getMonth()-ne.getMonth())<=12&&(De=ne.toLocaleDateString("en-US",{year:"numeric",month:"long"})):v==="year"&&(De=ne.getFullYear().toString());De&&(se[De]||(se[De]={total:0,pending:0,confirmed:0,ready_for_pickup:0,completed:0,cancelled:0}),se[De].total++,se[De][oe.status]=(se[De][oe.status]||0)+1)}),Object.entries(se).sort()})(),A=()=>{const B={};let se=0;return r.forEach(oe=>{var ne;(ne=oe.items)==null||ne.forEach(De=>{const In=De.name||"Unknown Product";B[In]||(B[In]=0);const pi=De.quantity||1;B[In]+=pi,se+=pi})}),{productMap:B,totalProducts:se}},{productMap:Y,totalProducts:j}=A(),Q={labels:D.map(([B])=>B),datasets:[{label:"Total Orders",data:D.map(([,B])=>B.total),backgroundColor:"#007bff",borderColor:"#0056b3",borderWidth:1},{label:"Completed",data:D.map(([,B])=>B.completed),backgroundColor:"#28a745",borderColor:"#218838",borderWidth:1},{label:"Pending",data:D.map(([,B])=>B.pending),backgroundColor:"#ffc107",borderColor:"#ff9800",borderWidth:1}]},X={responsive:!0,maintainAspectRatio:!0,plugins:{legend:{position:"top"},title:{display:!0,text:`Orders Over Time (${v.charAt(0).toUpperCase()+v.slice(1)})`}},scales:{y:{beginAtZero:!0}}},z={labels:Object.keys(Y),datasets:[{data:Object.values(Y),backgroundColor:["#007bff","#28a745","#ffc107","#dc3545","#17a2b8","#6f42c1","#e83e8c","#fd7e14","#20c997","#6c757d"],borderColor:"#fff",borderWidth:2}]},H={responsive:!0,maintainAspectRatio:!0,plugins:{legend:{position:"right"},tooltip:{callbacks:{label:function(B){const se=B.label||"",oe=B.parsed,ne=(oe/j*100).toFixed(1);return`${se}: ${oe} (${ne}%)`}}},title:{display:!0,text:"Products Ordered Distribution"}}},Z=d==="all"?r:r.filter(B=>B.status===d),ce={total:r.length,pending:r.filter(B=>B.status==="pending").length,confirmed:r.filter(B=>B.status==="confirmed").length,ready_for_pickup:r.filter(B=>B.status==="ready_for_pickup").length,completed:r.filter(B=>B.status==="completed").length,cancelled:r.filter(B=>B.status==="cancelled").length},ie={total:s.filter(B=>!B.deleted).length,customers:s.filter(B=>B.role==="user"&&!B.deleted).length,admins:s.filter(B=>B.role==="admin"&&!B.deleted).length};return p.jsx("div",{className:"admin-orders-page",children:p.jsxs("div",{className:"admin-orders-container",children:[p.jsxs("div",{className:"dashboard-header",children:[p.jsx("h1",{children:"Admin Dashboard"}),p.jsxs("div",{className:"dashboard-nav-tabs",children:[p.jsx("button",{className:`nav-tab ${w==="orders"?"active":""}`,onClick:()=>x("orders"),children:"Orders Management"}),p.jsx("button",{className:`nav-tab ${w==="users"?"active":""}`,onClick:()=>x("users"),children:"Users Management"})]})]}),w==="orders"&&p.jsx(hU,{loading:a,error:c,filteredOrders:Z,stats:ce,filterStatus:d,setFilterStatus:f,updateOrderStatus:M,formatDate:I,activeView:b,setActiveView:R,analyticsTimeframe:v,setAnalyticsTimeframe:T,analyticsData:D,productMap:Y,totalProducts:j,barChartData:Q,barChartOptions:X,pieChartData:z,pieChartOptions:H}),w==="users"&&p.jsx(dU,{loading:a,error:c,allUsers:s.filter(B=>!B.deleted),stats:ie,filterRole:g,setFilterRole:_,handleDeleteUser:E,handleChangeRole:C,formatDate:I})]})})}function pU(){var Y;const{user:t}=It(),e=Wt(),n=Zi(),[r,i]=O.useState([]),[s,o]=O.useState(!0),[a,l]=O.useState(""),[c,h]=O.useState(null),[d,f]=O.useState(!1),[g,_]=O.useState(""),[v,T]=O.useState(""),[w,x]=O.useState("success"),[b,R]=O.useState(!1),[N,M]=O.useState(null);O.useEffect(()=>{if(!t){e("/login");return}S()},[t,e,n]);const S=async()=>{try{o(!0);const j=wn(At(be,"orders"),Xr("userId","==",t.uid)),Q=await Jr(j),X=[];Q.forEach(z=>{X.push({id:z.id,...z.data()})}),X.sort((z,H)=>{var Z,ce,ie,B;return(((ce=(Z=H.createdAt)==null?void 0:Z.toDate)==null?void 0:ce.call(Z))||new Date(0))-(((B=(ie=z.createdAt)==null?void 0:ie.toDate)==null?void 0:B.call(ie))||new Date(0))}),i(X),l("")}catch(j){console.error("Error fetching orders:",j),l("Failed to load orders")}finally{o(!1)}},E=j=>{var X;return j?(((X=j.toDate)==null?void 0:X.call(j))||new Date(j)).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"},C=j=>{h(j),f(!0),_("")},I=async()=>{if(c)try{const j=an(be,"orders",c);await Ta(j,{status:"cancelled"}),i(Q=>Q.map(X=>X.id===c?{...X,status:"cancelled"}:X)),T("Order cancelled successfully"),x("success"),f(!1),h(null)}catch(j){console.error("Error cancelling order:",j),_("Failed to cancel order. Please try again.")}},P=()=>{f(!1),h(null),_("")},D=j=>{M(j),R(!0)},A=()=>{R(!1),M(null)};return p.jsxs("div",{className:"orders-page",children:[p.jsxs("div",{className:"orders-container",children:[v&&p.jsx(jI,{message:v,type:w,duration:3e3,onClose:()=>T("")}),s&&p.jsx("div",{className:"loading",children:"Loading your orders..."}),a&&p.jsx("div",{className:"error-message",children:a}),!s&&r.length===0&&p.jsx("div",{className:"empty-statee",children:p.jsx("p",{children:"No Orders Yet"})}),!s&&r.length>0&&p.jsx("div",{className:"orders-list",children:r.map(j=>p.jsxs("div",{className:"order-card1",children:[p.jsxs("div",{className:"order-card-header",children:[p.jsxs("span",{className:"order-id1",children:["Order #",j.id.slice(0,8).toUpperCase()]}),p.jsx("span",{className:`order-status status-${j.status}`,children:j.status})]}),p.jsxs("div",{className:"order-actionss",children:[p.jsx("button",{className:"btn-view-details",onClick:()=>D(j),children:"View Details"}),j.status==="pending"&&p.jsx("button",{className:"btn-cancel-orderr",onClick:()=>C(j.id),children:"Cancel Order"})]})]},j.id))})]}),d&&p.jsx("div",{className:"modal-overlay",onClick:P,children:p.jsx("div",{className:"modal-content cancel-modal",onClick:j=>j.stopPropagation(),children:p.jsxs("div",{className:"modal-body",children:[p.jsx("p1",{children:"Are you sure you want to cancel this order? This action cannot be undone."}),g&&p.jsx("div",{className:"error-message",children:g}),p.jsxs("div",{className:"modal-actions3",children:[p.jsx("button",{className:"btn btn-secondary2",onClick:P,children:"Keep Order"}),p.jsx("button",{className:"btn btn-danger",onClick:I,children:"Cancel Order"})]})]})})}),b&&N&&p.jsx("div",{className:"modal-overlay",onClick:A,children:p.jsx("div",{className:"modal-content details-modal",onClick:j=>j.stopPropagation(),children:p.jsxs("div",{className:"modal-body",children:[p.jsxs("div",{className:"details-section",children:[p.jsxs("div",{className:"detail-itemm",children:[p.jsx("span",{className:"detail-label",children:"Order ID:"}),p.jsxs("span",{className:"detail-value",children:["#",N.id.slice(0,8).toUpperCase()]})]}),p.jsxs("div",{className:"detail-itemm",children:[p.jsx("span",{className:"detail-label",children:"Date:"}),p.jsx("span",{className:"detail-value",children:E(N.createdAt)})]}),p.jsxs("div",{className:"detail-itemm",children:[p.jsx("span",{className:"detail-label",children:"Status:"}),p.jsx("span",{className:`detail-badge status-${N.status}`,children:N.status})]})]}),p.jsx("div",{className:"divider"}),p.jsxs("div",{className:"items-section",children:[p.jsx("h4",{className:"section-title",children:"Items Ordered"}),p.jsx("div",{className:"items-in-modal",children:N.items&&N.items.map((j,Q)=>p.jsxs("div",{className:"modal-item",children:[p.jsxs("div",{className:"modal-item-info",children:[p.jsx("span",{className:"modal-item-name",children:j.name}),p.jsxs("span",{className:"modal-item-qty",children:["Qty: ",j.quantity]})]}),p.jsxs("span",{className:"modal-item-subtotal",children:["",(j.price*j.quantity).toFixed(2)]})]},Q))})]}),p.jsx("div",{className:"divider"}),p.jsxs("div",{className:"summary-section",children:[p.jsxs("div",{className:"summary-item",children:[p.jsx("span",{className:"summary-label",children:"Total Amount:"}),p.jsxs("span",{className:"summary-value",children:["",((Y=N.totalAmount)==null?void 0:Y.toFixed(2))||"0.00"]})]}),N.paymentMethod&&p.jsxs("div",{className:"summary-item",children:[p.jsx("span",{className:"summary-label",children:"Payment Method:"}),p.jsx("span",{className:"summary-value",children:N.paymentMethod})]})]}),p.jsx("button",{className:"btn btn-primary btn-close-modal",onClick:A,children:"Close"})]})})})]})}function mU({isModal:t=!1,onClose:e=null}){const{user:n}=It(),[r,i]=O.useState([]),[s,o]=O.useState(null),[a,l]=O.useState([]),[c,h]=O.useState(""),[d,f]=O.useState(!0),[g,_]=O.useState(!1),[v,T]=O.useState(null),[w,x]=O.useState(null);O.useEffect(()=>{n&&(b(),t||R())},[n,t]);const b=async()=>{try{const S=At(be,"users"),E=wn(S,Xr("role","==","admin")),C=await Jr(E);if(!C.empty){const I=C.docs[0];if(x(I.id),t){const P=[n.uid,I.id].sort().join("_");o({id:P,otherParticipant:I.id,lastMessage:""}),await N(P),T(I.data())}}f(!1)}catch(S){console.error("Error finding admin user:",S),S.code==="permission-denied"&&(console.warn("Permission denied accessing users collection. Please check Firestore rules."),t&&f(!1)),f(!1)}},R=async()=>{try{f(!0);const S=wn(At(be,"messages"),Xr("participants","array-contains",n.uid),to("lastMessageTime","desc"),b2(50)),E=await Jr(S),C=[],I=new Set;for(const P of E.docs){const D=P.data(),A=D.participants.find(Y=>Y!==n.uid);I.has(A)||(I.add(A),C.push({id:P.id,otherParticipant:A,lastMessage:D.lastMessage,lastMessageTime:D.lastMessageTime}))}i(C)}catch(S){console.error("Error fetching conversations:",S)}finally{f(!1)}},N=async S=>{try{const E=wn(At(be,"messages"),Xr("conversationId","==",S),to("timestamp","asc")),I=(await Jr(E)).docs.map(P=>({id:P.id,...P.data()}));l(I)}catch(E){console.error("Error fetching messages:",E),E.code==="permission-denied"&&console.warn("Permission denied accessing messages collection. Please check Firestore rules."),l([])}},M=async()=>{if(!(!c.trim()||!s))try{_(!0),await Fh(At(be,"messages"),{conversationId:s.id,participants:[n.uid,s.otherParticipant],sender:n.uid,senderName:n.displayName||n.email,content:c,timestamp:no(),lastMessage:c,lastMessageTime:no()}),h(""),await N(s.id)}catch(S){console.error("Error sending message:",S)}finally{_(!1)}};return d?p.jsx("div",{className:`messaging-page ${t?"messaging-modal":""}`,children:p.jsx("p",{children:"Loading messages..."})}):p.jsx("div",{className:`messaging-page ${t?"messaging-modal":""}`,children:p.jsxs("div",{className:"messaging-container",children:[t&&e&&p.jsx("button",{className:"modal-close-btn",onClick:e,children:""}),s&&p.jsxs("div",{className:"chat-window",children:[p.jsxs("div",{className:"chat-header",children:[!t&&p.jsx("button",{className:"btn-back",onClick:()=>o(null),children:" Back"}),p.jsx("h3",{children:(v==null?void 0:v.displayName)||(s==null?void 0:s.otherParticipant)||"Seller"})]}),p.jsx("div",{className:"messages-list",children:a.length===0?p.jsx("p",{className:"no-messages",children:"No messages yet. Start the conversation!"}):a.map(S=>p.jsxs("div",{className:`message ${S.sender===n.uid?"sent":"received"}`,children:[p.jsx("p",{className:"message-sender",children:S.senderName}),p.jsx("p",{className:"message-content",children:S.content}),S.timestamp&&p.jsx("span",{className:"message-time",children:new Date(S.timestamp.seconds*1e3).toLocaleTimeString()})]},S.id))}),p.jsxs("div",{className:"message-input",children:[p.jsx("input",{type:"text",value:c,onChange:S=>h(S.target.value),onKeyPress:S=>S.key==="Enter"&&M(),placeholder:"Type your message...",disabled:g}),p.jsx("button",{className:"btn-send",onClick:M,disabled:g,children:g?"Sending...":"Send"})]})]})]})})}function gU({user:t,userRole:e,displayName:n,isOpen:r,onClose:i}){const[s,o]=O.useState([]),[a,l]=O.useState(""),[c,h]=O.useState(!1),[d,f]=O.useState([]),[g,_]=O.useState(null),v=O.useRef(null),T=O.useRef(null),w=O.useRef(null);O.useEffect(()=>(r?e==="admin"?x():b("admin"):(T.current&&T.current(),w.current&&w.current()),()=>{T.current&&T.current(),w.current&&w.current()}),[r,e]),O.useEffect(()=>{if(!v.current)return;const M=requestAnimationFrame(()=>{try{v.current.scrollIntoView({behavior:"smooth",block:"end"})}catch{v.current.scrollIntoView()}});return()=>cancelAnimationFrame(M)},[s,r,g]);const x=async()=>{try{const M=wn(At(be,"messages"),Xr("participants","array-contains","admin"));w.current&&w.current(),w.current=L0(M,S=>{const E=new Map;for(const I of S.docs){const P=I.data(),D=(P.participants||[]).find(Y=>Y!=="admin");if(!D)continue;const A=E.get(D)||{userId:D,lastMessage:null,unread:0};(!A.lastMessage||P.createdAt&&A.lastMessage.createdAt&&P.createdAt.seconds>A.lastMessage.createdAt.seconds||!A.lastMessage.createdAt)&&(A.lastMessage={text:P.message,createdAt:P.createdAt}),E.set(D,A)}(async()=>{const I=[];for(const[P,D]of E.entries())try{const A=await Bu(an(be,"users",P));I.push({userId:P,displayName:A.exists()&&(A.data().displayName||A.data().email)||"User",email:A.exists()?A.data().email:"",lastMessage:D.lastMessage,unread:0})}catch{I.push({userId:P,displayName:"User",email:"",lastMessage:D.lastMessage,unread:D.unread||0})}I.sort((P,D)=>{var j,Q,X,z;const A=((Q=(j=P.lastMessage)==null?void 0:j.createdAt)==null?void 0:Q.seconds)||0;return(((z=(X=D.lastMessage)==null?void 0:X.createdAt)==null?void 0:z.seconds)||0)-A}),f(I)})()},S=>{console.error("Error setting up inbox listener:",S)})}catch(M){console.error("Error in setupInboxListener:",M)}},b=async M=>{h(!0);try{const S=wn(At(be,"messages"),Xr("participants","array-contains",M),to("createdAt","asc"));T.current&&T.current(),T.current=L0(S,E=>{const C=E.docs.filter(I=>{const D=I.data().participants||[];return e!=="admin"?D.includes(t.uid)&&D.includes("admin"):D.includes(M)&&D.includes("admin")}).map(I=>({id:I.id,...I.data()}));o(C),h(!1)},E=>{console.error("Error setting up messages listener:",E),h(!1)})}catch(S){console.error("Error in setupMessagesListener:",S),h(!1)}},R=async M=>{b(M)},N=async()=>{if(a.trim())try{let M=null,S=[];if(e==="admin"){if(!g)return;M=g,S=[g,"admin"]}else M="admin",S=[t.uid,"admin"];await Fh(At(be,"messages"),{senderId:t.uid,senderName:n,receiverId:M,participants:S,message:a,createdAt:no(),isRead:!1}),l(""),b(e==="admin"?g:"admin")}catch(M){console.error("Error sending message:",M)}};return r?p.jsx("div",{className:"modal-overlay",onClick:i,children:p.jsxs("div",{className:"messaging-modal-content",onClick:M=>M.stopPropagation(),children:[p.jsxs("div",{className:"messaging-modal-header",children:[p.jsx("h3",{children:e==="admin"?"Customer Messages":"Customization"}),p.jsx("button",{className:"modal-close-btn1",onClick:i,children:""})]}),e==="admin"?p.jsx("div",{className:"admin-inbox",children:p.jsx("div",{className:"inbox-list",children:d.length===0?p.jsx("div",{className:"empty-state33",children:p.jsx("p",{children:"No conversations yet"})}):d.map(M=>{var S,E;return p.jsxs("button",{className:`inbox-item ${g===M.userId?"active":""}`,onClick:()=>{_(M.userId),R(M.userId)},children:[p.jsx("div",{className:"inbox-left",children:p.jsx("div",{className:"inbox-avatar",children:((E=(S=M.displayName)==null?void 0:S.charAt(0))==null?void 0:E.toUpperCase())||"U"})}),p.jsx("div",{className:"inbox-mid",children:p.jsx("div",{className:"inbox-name",children:M.displayName})})]},M.userId)})})}):null,p.jsx("div",{className:"messages-container",children:c?p.jsx("div",{className:"loading-state",children:"Loading messages..."}):s.length===0?p.jsx("div",{className:"empty-state",children:p.jsx("p",{children:"You must select a converstation"})}):p.jsxs("div",{className:"messages-list",children:[s.map(M=>p.jsxs("div",{className:`message-bubble ${M.senderId===t.uid?"sent":"received"}`,children:[p.jsx("p",{className:"message-sender",children:M.senderName}),p.jsx("p",{className:"message-text",children:M.message})]},M.id)),p.jsx("div",{ref:v})]})}),p.jsxs("div",{className:"message-input-area",children:[p.jsx("input",{type:"text",value:a,onChange:M=>l(M.target.value),onKeyPress:M=>M.key==="Enter"&&N(),placeholder:"Type your message...",className:"message-input"}),p.jsx("button",{onClick:N,className:"btn-send",children:"Send"})]})]})}):null}function yU(){const{user:t,userRole:e,logout:n}=It(),r=Wt(),[i,s]=O.useState(""),[o,a]=O.useState(!1);O.useEffect(()=>{if(!t){r("/login");return}l()},[t,r]),O.useEffect(()=>{t&&!i&&l()},[t,i]);const l=async()=>{if(t)try{const d=an(be,"users",t.uid),f=await Bu(d);if(f.exists()){const g=f.data();g.displayName?s(g.displayName):s(t.email||"User")}else s(t.email||"User")}catch(d){console.error("Error fetching user data:",d),s(t.email||"User")}},c=async()=>{try{await n(),r("/")}catch(d){console.error("Logout error:",d)}},h=()=>{r("/dashboard")};return p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"profile-page",children:p.jsxs("div",{className:"profile-container",children:[p.jsx("div",{className:"profile-card",children:p.jsxs("div",{className:"profile-header-top",children:[p.jsxs("div",{className:"profile-details",children:[p.jsx("h1",{className:"profile-display-name",children:i}),p.jsx("p",{className:"profile-email",children:t==null?void 0:t.email})]}),p.jsx("button",{onClick:c,className:"btn-logout-header",children:"Logout"})]})}),p.jsxs("div",{className:"messaging-card",children:[p.jsx("div",{className:"card-header",children:p.jsxs("h2",{children:[" ",e==="admin"?"Customer Messages":"Message us for Customization"]})}),p.jsx("div",{className:"card-content",children:p.jsx("button",{onClick:()=>a(!0),className:"btn btn-primary btn-lg",children:e==="admin"?"View Messages":"Open Chat"})})]}),e==="admin"&&p.jsxs("div",{className:"dashboard-card",children:[p.jsx("div",{className:"card-header",children:p.jsx("h2",{children:"Dashboard"})}),p.jsx("div",{className:"card-content",children:p.jsx("button",{onClick:h,className:"btn btn-primary btn-lg",children:"Open Dashboard"})})]})]})}),p.jsx(gU,{user:t,userRole:e,displayName:i,isOpen:o,onClose:()=>a(!1)})]})}function _U(){const t=Zi(),{user:e}=It(),n=t.pathname==="/",r=!n&&e;return n&&e?p.jsx(Ai,{to:"/shop",replace:!0}):p.jsxs(p.Fragment,{children:[r&&p.jsx(L2,{}),p.jsx("main",{className:n?"main-content landing":"main-content",children:p.jsxs(bP,{children:[p.jsx(Mt,{path:"/",element:p.jsx(V0,{})}),p.jsx(Mt,{path:"/home",element:p.jsx(V0,{})}),p.jsx(Mt,{path:"/login",element:p.jsx(Ai,{to:"/"})}),p.jsx(Mt,{path:"/signup",element:p.jsx(Ai,{to:"/"})}),p.jsx(Mt,{path:"/shop",element:p.jsx(U2,{})}),p.jsx(Mt,{path:"/products",element:p.jsx(Ai,{to:"/shop"})}),p.jsx(Mt,{path:"/cart",element:p.jsx(z2,{})}),p.jsx(Mt,{path:"/profile",element:p.jsx(zo,{children:p.jsx(yU,{})})}),p.jsx(Mt,{path:"/orders",element:p.jsx(zo,{children:p.jsx(pU,{})})}),p.jsx(Mt,{path:"/messages",element:p.jsx(zo,{children:p.jsx(mU,{})})}),p.jsx(Mt,{path:"/checkout",element:p.jsx(zo,{children:p.jsx(B2,{})})}),p.jsx(Mt,{path:"/dashboard",element:p.jsx(zo,{requiredRole:"admin",children:p.jsx(fU,{})})}),p.jsx(Mt,{path:"*",element:p.jsx(Ai,{to:"/"})})]})})]})}function vU(){return p.jsx(DP,{children:p.jsx(N2,{children:p.jsx(D2,{children:p.jsx(_U,{})})})})}df.createRoot(document.getElementById("root")).render(p.jsx(Zu.StrictMode,{children:p.jsx(vU,{})}));
